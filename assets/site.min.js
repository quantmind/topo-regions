!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.d3=t.d3||{})}(this,function(t){"use strict";function e(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function n(){}function r(t,e){var r=new n;if(t instanceof n)t.each(function(t,e){r.set(e,t)});else if(Array.isArray(t)){var i,o=-1,a=t.length;if(null==e)for(;++o<a;)r.set(o,t[o]);else for(;++o<a;)r.set(e(i=t[o],o,t),i)}else if(t)for(var u in t)r.set(u,t[u]);return r}function i(){}function o(t,e){var n=new i;if(t instanceof i)t.each(function(t){n.add(t)});else if(t){var r=-1,o=t.length;if(null==e)for(;++r<o;)n.add(t[r]);else for(;++r<o;)n.add(e(t[r],r,t))}return n}function a(t){return"[object Object]"===Ds.call(t)}function u(t){return"[object String]"===Ds.call(t)}function s(t){return"[object Function]"===Ds.call(t)}function c(t){return"[object Array]"===Ds.call(t)}function l(t){return"[object Date]"===Ds.call(t)}function f(t){return"[object Number]"===Ds.call(t)}function h(t){return"[object Promise]"===Ds.call(t)}function d(t){Xs.logger.info(Is+" "+t)}function p(){return tc||(rc(v),tc=nc.now()+ec)}function v(){tc=0}function g(){this._call=this._time=this._next=null}function m(t,e,n){var r=new g;return r.restart(t,e,n),r}function y(){p(),++Gs;for(var t,e=Fs;e;)(t=tc-e._time)>=0&&e._call.call(null,t),e=e._next;--Gs}function b(){tc=(Qs=nc.now())+ec,Gs=Zs=0;try{y()}finally{Gs=0,x(),tc=0}}function _(){var t=nc.now(),e=t-Qs;e>Ks&&(ec-=e,Qs=t)}function x(){for(var t,e,n=Fs,r=1/0;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:Fs=e);Us=t,w(r)}function w(t){Gs||(Zs&&(Zs=clearTimeout(Zs)),t-tc>24?(t<1/0&&(Zs=setTimeout(b,t-nc.now()-ec)),Js&&(Js=clearInterval(Js))):(Js||(Qs=nc.now(),Js=setInterval(_,Ks)),Gs=1,rc(b)))}function M(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===ac&&e.documentElement.namespaceURI===ac?e.createElement(t):e.createElementNS(n,t)}}function E(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function k(t,e,n){return t=A(t,e,n),function(e){var n=e.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||t.call(this,e)}}function A(t,e,n){return function(r){var i=vc;vc=r;try{t.call(this,this.__data__,e,n)}finally{vc=i}}}function T(t){return t.trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}})}function C(t){return function(){var e=this.__on;if(e){for(var n,r=0,i=-1,o=e.length;r<o;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++i]=n:this.removeEventListener(n.type,n.listener,n.capture);++i?e.length=i:delete this.__on}}}function S(t,e,n){var r=pc.hasOwnProperty(t.type)?k:A;return function(i,o,a){var u,s=this.__on,c=r(e,o,a);if(s)for(var l=0,f=s.length;l<f;++l)if((u=s[l]).type===t.type&&u.name===t.name)return this.removeEventListener(u.type,u.listener,u.capture),this.addEventListener(u.type,u.listener=c,u.capture=n),void(u.value=e);this.addEventListener(t.type,c,n),u={type:t.type,name:t.name,value:e,listener:c,capture:n},s?s.push(u):this.__on=[u]}}function N(t,e,n,r){var i=vc;t.sourceEvent=vc,vc=t;try{return e.apply(n,r)}finally{vc=i}}function P(){}function O(){return[]}function z(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function D(t,e,n,r,i,o){for(var a,u=0,s=e.length,c=o.length;u<c;++u)(a=e[u])?(a.__data__=o[u],r[u]=a):n[u]=new z(t,o[u]);for(;u<s;++u)(a=e[u])&&(i[u]=a)}function $(t,e,n,r,i,o,a){var u,s,c,l={},f=e.length,h=o.length,d=new Array(f);for(u=0;u<f;++u)(s=e[u])&&(d[u]=c=Mc+a.call(s,s.__data__,u,e),c in l?i[u]=s:l[c]=s);for(u=0;u<h;++u)(s=l[c=Mc+a.call(t,o[u],u,o)])?(r[u]=s,s.__data__=o[u],l[c]=null):n[u]=new z(t,o[u]);for(u=0;u<f;++u)(s=e[u])&&l[d[u]]===s&&(i[u]=s)}function j(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function L(t){return function(){this.removeAttribute(t)}}function I(t){return function(){this.removeAttributeNS(t.space,t.local)}}function R(t,e){return function(){this.setAttribute(t,e)}}function F(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function U(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function X(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Y(t){return function(){this.style.removeProperty(t)}}function q(t,e,n){return function(){this.style.setProperty(t,e,n)}}function H(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function B(t,e){return t.style.getPropertyValue(e)||Ec(t).getComputedStyle(t,null).getPropertyValue(e)}function W(t){return function(){delete this[t]}}function V(t,e){return function(){this[t]=e}}function G(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function Z(t){return t.trim().split(/^|\s+/)}function J(t){return t.classList||new K(t)}function K(t){this._node=t,this._names=Z(t.getAttribute("class")||"")}function Q(t,e){for(var n=J(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function tt(t,e){for(var n=J(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function et(t){return function(){Q(this,t)}}function nt(t){return function(){tt(this,t)}}function rt(t,e){return function(){(e.apply(this,arguments)?Q:tt)(this,t)}}function it(){this.textContent=""}function ot(t){return function(){this.textContent=t}}function at(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function ut(){this.innerHTML=""}function st(t){return function(){this.innerHTML=t}}function ct(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function lt(){this.nextSibling&&this.parentNode.appendChild(this)}function ft(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function ht(){return null}function dt(){var t=this.parentNode;t&&t.removeChild(this)}function pt(t,e,n){var r=Ec(t),i=r.CustomEvent;"function"==typeof i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function vt(t,e){return function(){return pt(this,t,e)}}function gt(t,e){return function(){return pt(this,t,e.apply(this,arguments))}}function mt(t,e){this._groups=t,this._parents=e}function yt(){return new mt([[document.documentElement]],kc)}function bt(t){function e(t){Cc(this).el=t}return e.prototype=Os({},Sc,t),e}function _t(t,e,n){return oc(function(){e.$set(n,t.value())})}function xt(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r)throw new Error("illegal type: "+t);r[t]=[]}return new wt(r)}function wt(t){this._=t}function Mt(t,e){return t.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");if(r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}})}function Et(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function kt(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=Dc,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}function At(t){var e=$s?window.handlebars:require("handlebars");if(e)return e.compile(t);Ys("compile function requires handlebars")}function Tt(t,e){if(u(t)){if(!e)return t;if(!At(t))return t}return t(e)}function Ct(t,e){var n=Ac(document.createElement("div"));n.html(Tt(t,e));var r=n.node().children;return 1!==r.length&&Ys("HtmlElement function should return one root element only, got "+r.length),r[0]}function St(t){this.response=t,this.description=t.statusText}function Nt(t){if(t.status>=300)throw new St(t);var e=(t.headers.get("content-type")||"").split(";")[0];if("application/json"===e)return t.json();throw new Error("Expected JSON content type, got "+e)}function Pt(t,e,n){switch(e.type){case Ic.IDENTIFIER:return t[e.name];case Ic.LITERAL:return n?t[e.value]:e.value;case Ic.ARRAY_EXP:return e.elements.map(function(e){return Pt(t,e)});case Ic.LOGICAL_EXP:case Ic.BINARY_EXP:return $t(e.operator,Pt(t,e.left),Pt(t,e.right));case Ic.CALL_EXP:return zt(t,e.callee,e.arguments);case Ic.MEMBER_EXP:return Pt(Pt(t,e.object),e.property,!0);case Ic.CONDITIONAL_EXP:return Pt(t,e.test)?Pt(t,e.consequent):Pt(t,e.alternate);case Ic.UNARY_EXP:return Dt(e.operator,Pt(t,e.argument))}}function Ot(t,e){switch(1===arguments.length&&(e=o()),t.type){case Ic.IDENTIFIER:e.add(t.name);break;case Ic.ARRAY_EXP:t.elements.forEach(function(t){return Ot(t,e)});break;case Ic.BINARY_EXP:Ot(t.left,e),Ot(t.right,e);break;case Ic.CALL_EXP:Ot(t.callee,e),t.arguments.forEach(function(t){return Ot(t,e)});break;case Ic.MEMBER_EXP:e.add(jt(t));break;case Ic.CONDITIONAL_EXP:Ot(t.test,e),Ot(t.consequent,e),Pt(t.alternate,e);break;case Ic.UNARY_EXP:Ot(t.argument,e)}return e}function zt(t,e,n){var r;if(n=n.map(function(e){return Pt(t,e)}),e.type!==Ic.IDENTIFIER&&(t=Pt(t,e.object),e=e.property),!(r=t[e.name]))throw new EvalError('callable "'+e.name+'" not found in context');return r.apply(t,n)}function Dt(t,e){return Kc[t]||(Kc[t]=new Function("arg","return "+t+" arg")),Kc[t](e)}function $t(t,e,n){return Qc[t]||(Qc[t]=new Function("a","b","return a "+t+" b")),Qc[t](e,n)}function jt(t){return t.type===Ic.IDENTIFIER?t.name:jt(t.object)+"."+t.property.name}function Lt(t){this.codes=Ic,this.expr=t,this.parsed=Jc(t)}function It(t,e){var n=r(),i=null;n.set("",rl()),Object.defineProperties(nl(t),{$events:{get:function(){return n}}}),t.$child=function(e){return null===i&&(i=Rt(t)),new i(e)},t.$update(e)}function Rt(t){function e(e){It(this,e),Object.defineProperties(this,{parent:{get:function(){return t}},isolated:{get:function(){return!1}}})}return e.prototype=t,e}function Ft(t){return a(t)&&"[object d3Model]"===t.toString()}function Ut(t,e,n){function r(r){if(u&&(r=u.get.call(t)),r!==n){var o=n;n=i(r,o);var a=t.name||"model";Rs("updating "+a+"."+e),t.$change(e,o),t.$change()}}function i(e,n){return e===n?n:c(e)?o(e,n):Ft(n)?a(e,n):il(e)?t.$new(e):e}function o(t,e){Ft(e)&&e.$off(),c(e)||(e=[]);for(var n=0;n<t.length;++n)t[n]=i(t[n],e[n]);return t}function a(t,e){return il(t)?(e.$update(t),e):(e.$off(),i(t))}var u;t.$events.set(e,rl()),Object.defineProperty(t,e,function(){var i={get:function(){return n}};return s(n)&&(n={get:n}),il(n)&&s(n.get)?(n=(u=n).get.call(t),u.reactOn?u.reactOn.forEach(function(n){t.$on(n+"."+e,r)}):Ys("reactive lazy property "+e+" does not specify 'reactOn' list or properties"),s(u.set)&&(i.set=u.set)):i.set=r,i}()),n=i(n),t.$change(e)}function Xt(t,e){var n=t.$events.get(e);return!n&&t.parent?Xt(t.parent,e):n}function Yt(t,e){e?t.on("change."+e,null):t.on("change",null)}function qt(t){It(this,t)}function Ht(t){return new qt(t)}function Bt(t,e,n){var r=t.get(e.uid),i=3===arguments.length?e[n]:void 0;r||(r={model:e,events:o()},t.set(e.uid,r)),s(i)||2===arguments.length?r.events.add(""):i instanceof Ht?(r.events.add(""),Bt(t,i)):(e.$isReactive(n)||e.$set(n,e[n]),r.events.add(n))}function Wt(t,e,n,i){function o(e){var n=Ls(e,"parent"),o=r(n?n.components:null),a=r(n?n.directives:i),u=xt("message","mounted"),d={};c.each(function(t,e){o.set(e,t)}),l.each(function(t,e){a.set(e,t)}),Vt(o,Ls(e,"components")),Gt(a,Ls(e,"directives")),Object.defineProperties(this,{name:{get:function(){return t}},components:{get:function(){return o}},directives:{get:function(){return a}},parent:{get:function(){return n}},root:{get:function(){return n?n.root:this}},cache:{get:function(){return n?n.cache:d}},props:{get:function(){return h}},uid:{get:function(){return this.model.uid}},events:{get:function(){return u}}}),this.model=Os({},s(f)?f():f,Ls(e,"model")),sl.call("component-created",void 0,this)}function a(t){return new o(t)}s(e)&&(e={render:e});var u=Os({},e),c=Vt(r(),Ls(u,"components")),l=Gt(r(),Ls(u,"directives")),f=Ls(u,"model"),h=Ls(u,"props");return o.prototype=Os({},n,u),a.prototype=o.prototype,a}function Vt(t,e){return r(e).each(function(e,n){t.set(n,Wt(n,e,cl))}),t}function Gt(t,e){return r(e).each(function(e,n){t.set(n,al(e))}),t}function Zt(t,e,n){return Object.defineProperty(Cc(t),"el",{get:function(){return e}}),t.select(e).view(t).mount(null,n).then(function(){return Kt(t,n)})}function Jt(t,e){return void 0===t.isMounted?(t.isMounted=!1,!1):(t.isMounted?Ys("view "+t.name+" already mounted"):(t.isMounted=!0,t.mounted(),e&&e(t),t.events.call("mounted",void 0,t,e),t.events.on("mounted",null),sl.call("component-mounted",void 0,t)),!0)}function Kt(t,e){var n=t.parent;t.childrenMounted(),n&&!n.isMounted?n.events.on("mounted."+t.uid,function(){Jt(t,e)}):Jt(t,e)}function Qt(t,e,n,r){return n?(1!==(n=jc(n)).size()&&Ys("render function must return a single HTML node"),n=n.node(),e.parentNode.insertBefore(n,e),t.select(e).remove(),Zt(t,n,r)):Ys("render function must return a single HTML node. It returned nothing!")}function te(t){for(var e={},n=void 0,r=0;r<t.attributes.length;++r)e[(n=t.attributes[r]).name]=n.value;return e}function ee(){this.attrs={},this.all=[]}function ne(t,e,n,r){if(t&&t.tagName){var i=e.components.get(t.tagName.toLowerCase()),o=fl(t,e.directives),a=o.preMount();if(a)return a.execute(e.model);var u=void 0;return u=i?[i({parent:e}).mount(t,n,r)]:Bs(t.children).map(function(t){return ne(t,e,n,r)}),Promise.all(u).then(function(){return o.execute(e.model)})}}function re(t){if(!t)return Ys("element not defined, pass an identifier or an HTMLElement object");var e=(s(t.node)?t:Ac(t)).node();if(e)return e;Ys("could not find "+t+" element")}function ie(){var t=this.__d3_directives__,e=this.__d3_view__;t&&(t.all.forEach(function(t){return t.destroy()}),delete this.__d3_directives__),e&&(e.destroy(),delete this.__d3_view__)}function oe(){document.removeEventListener("DOMContentLoaded",oe),window.removeEventListener("load",oe),ae()}function ae(){for(var t=void 0;Xs.readyCallbacks.length;)t=Xs.readyCallbacks.shift(),ic(t)}function ue(t,e,n){var r,i,o;if(a(n))for(i in n)a(r=n[i])&&("d3-"===i.substring(0,3)?(o=i.replace("-","_"),e.$set(o,r),r=o):r=JSON.stringify(r)),t.attr(i,r||"")}function se(t){var e=t.type||"text";return _l[e]||e}function ce(t){var e=this.model.data.children;if(e){if(!c(e))return ml("children should be an array of fields, for "+(void 0===e?"undefined":Vs(e))),t;t.selectAll(".d3form").data(e).enter().append(le).classed("d3form",!0)}return t}function le(t){var e=se(t);return e||(ml("Could not find form component "+t.type),e="input",t.type="hidden"),document.createElement("d3-form-"+e)}function fe(t){var e=t.attr("min"),n=t.attr("max");return e=null===e?-1/0:+e,n=null===n?1/0:+n,[e,n]}function he(t,e){return{set:function(e,n){n[t]},validate:function(t,n){return e(t,n)}}}function de(t){var e=t.label||t.name;return"<label for="+t.id+' class="control-label" d3-class="[srOnly ? \'sr-only\' : null]">'+e+"</label>\n<slot></slot>"}function pe(t,e){return'<div class="input-group" :class="bootstrapStatus()">\n<span class="input-group-addon" id="'+t+'">'+e+"</span>\n<slot></slot>\n</div>"}function ve(t){return'<div class="form-check">\n<label class="form-check-label">\n<slot></slot>\n'+t+"\n</label>\n</div>"}function ge(t,e,n){var r=zl[n.attr("type")]||zl[n.node().tagName.toLowerCase()];if(!r)return e;var i=void 0;return r.forEach(function(r){(i=zl.wrappers[r])?e=i(t,e,n):ml("Could not find form field wrapper "+r)}),e}function me(t){function e(r){var i=t(r+""),o=n.get(i);return o||n.set(i,o=new Promise(function(t,n){var r=document.createElement("script");r.onload=function(){if(1!==$l.length)return n(new Error("invalid module"));t($l.pop()(e))},r.onerror=function(){n(new Error("unable to load module"))},r.async=!0,r.src=i,window.define=xe,document.head.appendChild(r)})),o}var n=new Map;return function(t){return arguments.length>1?Promise.all(jl.call(arguments,e)).then(ye):e(t)}}function ye(t){for(var e,n,r={},i=-1,o=t.length;++i<o;)for(n in e=t[i])Il.call(e,n)&&(null==e[n]?Object.defineProperty(r,n,{get:be(e,n)}):r[n]=e[n]);return r}function be(t,e){return function(){return t[e]}}function _e(t){return t+""=="exports"}function xe(t,e,n){arguments.length<3&&(n=e,e=t),arguments.length<2&&(n=e,e=[]),$l.push(Ll.call(e,_e)?function(t){var r={};return Promise.all(jl.call(e,function(e){return _e(e+="")?r:t(e)})).then(function(t){return n.apply(null,t),r})}:function(t){return Promise.all(jl.call(e,t)).then(function(t){return"function"==typeof n?n.apply(null,t):n})})}function we(t){return"string"==typeof t&&Rl.test(t)}function Me(t){return function(e,n){return Ul(t(e),n)}}function Ee(t,e,n){var r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=Vl?10:o>=Gl?5:o>=Zl?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=Vl?10:o>=Gl?5:o>=Zl?2:1)}function ke(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=Vl?i*=10:o>=Gl?i*=5:o>=Zl&&(i*=2),e<t?-i:i}function Ae(t){rf.logger.info(ef+" "+t)}function Te(t){function e(t){ff(this).el=t}return e.prototype=Os({},hf,t),e}function Ce(t,e,n){return lf(function(){e.$set(n,t.value())})}function Se(t){var e=$s?window.handlebars:require("handlebars");if(e)return e.compile(t);of("compile function requires handlebars")}function Ne(t,e){if(u(t)){if(!e)return t;if(!Se(t))return t}return t(e)}function Pe(t,e){var n=Ac(document.createElement("div"));n.html(Ne(t,e));var r=n.node().children;return 1!==r.length&&of("HtmlElement function should return one root element only, got "+r.length),r[0]}function Oe(t){this.response=t,this.description=t.statusText}function ze(t){if(t.status>=300)throw new Oe(t);var e=(t.headers.get("content-type")||"").split(";")[0];if("application/json"===e)return t.json();throw new Error("Expected JSON content type, got "+e)}function De(t,e,n){switch(e.type){case _f.IDENTIFIER:return t[e.name];case _f.LITERAL:return n?t[e.value]:e.value;case _f.ARRAY_EXP:return e.elements.map(function(e){return De(t,e)});case _f.LOGICAL_EXP:case _f.BINARY_EXP:return Ie(e.operator,De(t,e.left),De(t,e.right));case _f.CALL_EXP:return je(t,e.callee,e.arguments);case _f.MEMBER_EXP:return De(De(t,e.object),e.property,!0);case _f.CONDITIONAL_EXP:return De(t,e.test)?De(t,e.consequent):De(t,e.alternate);case _f.UNARY_EXP:return Le(e.operator,De(t,e.argument))}}function $e(t,e){switch(1===arguments.length&&(e=o()),t.type){case _f.IDENTIFIER:e.add(t.name);break;case _f.ARRAY_EXP:t.elements.forEach(function(t){return $e(t,e)});break;case _f.BINARY_EXP:$e(t.left,e),$e(t.right,e);break;case _f.CALL_EXP:$e(t.callee,e),t.arguments.forEach(function(t){return $e(t,e)});break;case _f.MEMBER_EXP:e.add(Re(t));break;case _f.CONDITIONAL_EXP:$e(t.test,e),$e(t.consequent,e),De(t.alternate,e);break;case _f.UNARY_EXP:$e(t.argument,e)}return e}function je(t,e,n){var r;if(n=n.map(function(e){return De(t,e)}),e.type!==_f.IDENTIFIER&&(t=De(t,e.object),e=e.property),!(r=t[e.name]))throw new EvalError('callable "'+e.name+'" not found in context');return r.apply(t,n)}function Le(t,e){return Df[t]||(Df[t]=new Function("arg","return "+t+" arg")),Df[t](e)}function Ie(t,e,n){return $f[t]||($f[t]=new Function("a","b","return a "+t+" b")),$f[t](e,n)}function Re(t){return t.type===_f.IDENTIFIER?t.name:Re(t.object)+"."+t.property.name}function Fe(t){this.codes=_f,this.expr=t,this.parsed=zf(t)}function Ue(t,e){var n=r(),i=null;n.set("",Rf()),Object.defineProperties(If(t),{$events:{get:function(){return n}}}),t.$child=function(e){return null===i&&(i=Xe(t)),new i(e)},t.$update(e)}function Xe(t){function e(e){Ue(this,e),Object.defineProperties(this,{parent:{get:function(){return t}},isolated:{get:function(){return!1}}})}return e.prototype=t,e}function Ye(t){return a(t)&&"[object d3Model]"===t.toString()}function qe(t,e,n){function r(r){if(u&&(r=u.get.call(t)),r!==n){var o=n;n=i(r,o);var a=t.name||"model";nf("updating "+a+"."+e),t.$change(e,o),t.$change()}}function i(e,n){return e===n?n:c(e)?o(e,n):Ye(n)?a(e,n):Ff(e)?t.$new(e):e}function o(t,e){Ye(e)&&e.$off(),c(e)||(e=[]);for(var n=0;n<t.length;++n)t[n]=i(t[n],e[n]);return t}function a(t,e){return Ff(t)?(e.$update(t),e):(e.$off(),i(t))}var u;t.$events.set(e,Rf()),Object.defineProperty(t,e,function(){var i={get:function(){return n}};return s(n)&&(n={get:n}),Ff(n)&&s(n.get)?(n=(u=n).get.call(t),u.reactOn?u.reactOn.forEach(function(n){t.$on(n+"."+e,r)}):of("reactive lazy property "+e+" does not specify 'reactOn' list or properties"),s(u.set)&&(i.set=u.set)):i.set=r,i}()),n=i(n),t.$change(e)}function He(t,e){var n=t.$events.get(e);return!n&&t.parent?He(t.parent,e):n}function Be(t,e){e?t.on("change."+e,null):t.on("change",null)}function We(t){Ue(this,t)}function Ve(t){return new We(t)}function Ge(t,e,n){var r=t.get(e.uid),i=3===arguments.length?e[n]:void 0;r||(r={model:e,events:o()},t.set(e.uid,r)),s(i)||2===arguments.length?r.events.add(""):i instanceof Ve?(r.events.add(""),Ge(t,i)):(e.$isReactive(n)||e.$set(n,e[n]),r.events.add(n))}function Ze(t,e,n,i){function o(e){var n=Ls(e,"parent"),o=r(n?n.components:null),a=r(n?n.directives:i),u=xt("message","mounted"),d={};c.each(function(t,e){o.set(e,t)}),l.each(function(t,e){a.set(e,t)}),Je(o,Ls(e,"components")),Ke(a,Ls(e,"directives")),Object.defineProperties(this,{name:{get:function(){return t}},components:{get:function(){return o}},directives:{get:function(){return a}},parent:{get:function(){return n}},root:{get:function(){return n?n.root:this}},cache:{get:function(){return n?n.cache:d}},props:{get:function(){return h}},uid:{get:function(){return this.model.uid}},events:{get:function(){return u}}}),this.model=Os({},s(f)?f():f,Ls(e,"model")),qf.call("component-created",void 0,this)}function a(t){return new o(t)}s(e)&&(e={render:e});var u=Os({},e),c=Je(r(),Ls(u,"components")),l=Ke(r(),Ls(u,"directives")),f=Ls(u,"model"),h=Ls(u,"props");return o.prototype=Os({},n,u),a.prototype=o.prototype,a}function Je(t,e){return r(e).each(function(e,n){t.set(n,Ze(n,e,Hf))}),t}function Ke(t,e){return r(e).each(function(e,n){t.set(n,Xf(e))}),t}function Qe(t,e,n){return Object.defineProperty(ff(t),"el",{get:function(){return e}}),t.select(e).view(t).mount(null,n).then(function(){return en(t,n)})}function tn(t,e){return void 0===t.isMounted?(t.isMounted=!1,!1):(t.isMounted?of("view "+t.name+" already mounted"):(t.isMounted=!0,t.mounted(),e&&e(t),t.events.call("mounted",void 0,t,e),t.events.on("mounted",null),qf.call("component-mounted",void 0,t)),!0)}function en(t,e){var n=t.parent;t.childrenMounted(),n&&!n.isMounted?n.events.on("mounted."+t.uid,function(){tn(t,e)}):tn(t,e)}function nn(t,e,n,r){return n?(1!==(n=yf(n)).size()&&of("render function must return a single HTML node"),n=n.node(),e.parentNode.insertBefore(n,e),t.select(e).remove(),Qe(t,n,r)):of("render function must return a single HTML node. It returned nothing!")}function rn(t){for(var e={},n=void 0,r=0;r<t.attributes.length;++r)e[(n=t.attributes[r]).name]=n.value;return e}function on(){this.attrs={},this.all=[]}function an(t,e,n,r){if(t&&t.tagName){var i=e.components.get(t.tagName.toLowerCase()),o=Wf(t,e.directives),a=o.preMount();if(a)return a.execute(e.model);var u=void 0;return u=i?[i({parent:e}).mount(t,n,r)]:sf(t.children).map(function(t){return an(t,e,n,r)}),Promise.all(u).then(function(){return o.execute(e.model)})}}function un(t){if(!t)return of("element not defined, pass an identifier or an HTMLElement object");var e=(s(t.node)?t:Ac(t)).node();if(e)return e;of("could not find "+t+" element")}function sn(){var t=this.__d3_directives__,e=this.__d3_view__;t&&(t.all.forEach(function(t){return t.destroy()}),delete this.__d3_directives__),e&&(e.destroy(),delete this.__d3_view__)}function cn(t,e,n){var r,i,o;if(a(n))for(i in n)a(r=n[i])&&("d3-"===i.substring(0,3)?(o=i.replace("-","_"),e.$set(o,r),r=o):r=JSON.stringify(r)),t.attr(i,r||"")}function ln(t){var e=t.type||"text";return eh[e]||e}function fn(t){var e=this.model.data.children;if(e){if(!c(e))return Kf("children should be an array of fields, for "+(void 0===e?"undefined":Vs(e))),t;t.selectAll(".d3form").data(e).enter().append(hn).classed("d3form",!0)}return t}function hn(t){var e=ln(t);return e||(Kf("Could not find form component "+t.type),e="input",t.type="hidden"),document.createElement("d3-form-"+e)}function dn(t){var e=t.attr("min"),n=t.attr("max");return e=null===e?-1/0:+e,n=null===n?1/0:+n,[e,n]}function pn(t,e){return{set:function(e,n){n[t]},validate:function(t,n){return e(t,n)}}}function vn(t){return"string"==typeof t&&ih.test(t)}function gn(t){return new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}")}function mn(t,e){var n=gn(t);return function(r,i){return e(n(r),i,t)}}function yn(t){var e=Object.create(null),n=[];return t.forEach(function(t){for(var r in t)r in e||n.push(e[r]=r)}),n}function bn(t){var e=(t.headers.get("content-type")||"").split(";")[0];return yh.has(e)?t.text().then(dh):"text/tab-separated-values"===e?t.text().then(ph):"application/json"===e?t.json():(vh("Cannot load content type '"+e+"'"),[])}function _n(){this.frames=r(),Object.defineProperties(this,{type:{get:function(){return"frameCollection"}}})}function xn(t,e,n){c(t)&&(t={store:n,data:t,dimensions:{},series:r()}),Object.defineProperties(this,{_inner:{get:function(){return t}},store:{get:function(){return t.store}},data:{get:function(){return t.data}},dimensions:{get:function(){return t.dimensions}},series:{get:function(){return t.series}},type:{get:function(){return"dataframe"}}}),this.serie=e}function wn(t,e){return t.reduce(function(t,n){return void 0!==e(n)&&(t+=1),t},0)}function Mn(t,e,n,r){function i(e){return t(e=new Date(+e)),e}return i.floor=i,i.ceil=function(n){return t(n=new Date(n-1)),e(n,1),t(n),n},i.round=function(t){var e=i(t),n=i.ceil(t);return t-e<n-t?e:n},i.offset=function(t,n){return e(t=new Date(+t),null==n?1:Math.floor(n)),t},i.range=function(n,r,o){var a=[];if(n=i.ceil(n),o=null==o?1:Math.floor(o),!(n<r&&o>0))return a;do{a.push(new Date(+n))}while(e(n,o),t(n),n<r);return a},i.filter=function(n){return Mn(function(e){if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)},function(t,r){if(t>=t)if(r<0)for(;++r<=0;)for(;e(t,-1),!n(t););else for(;--r>=0;)for(;e(t,1),!n(t););})},n&&(i.count=function(e,r){return Oh.setTime(+e),zh.setTime(+r),t(Oh),t(zh),Math.floor(n(Oh,zh))},i.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?i.filter(r?function(e){return r(e)%t==0}:function(e){return i.count(0,e)%t==0}):i:null}),i}function En(t){return Mn(function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+7*e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*$h)/jh})}function kn(t){return Mn(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+7*e)},function(t,e){return(e-t)/jh})}function An(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Tn(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Cn(t){return{y:t,m:0,d:1,H:0,M:0,S:0,L:0}}function Sn(t){function e(t,e){return function(n){var r,i,o,a=[],u=-1,s=0,c=t.length;for(n instanceof Date||(n=new Date(+n));++u<c;)37===t.charCodeAt(u)&&(a.push(t.slice(s,u)),null!=(i=id[r=t.charAt(++u)])?r=t.charAt(++u):i="e"===r?" ":"0",(o=e[r])&&(r=o(n,i)),a.push(r),s=u+1);return a.push(t.slice(s,u)),a.join("")}}function n(t,e){return function(n){var i,o,a=Cn(1900);if(r(a,t,n+="",0)!=n.length)return null;if("Q"in a)return new Date(a.Q);if("p"in a&&(a.H=a.H%12+12*a.p),"V"in a){if(a.V<1||a.V>53)return null;"w"in a||(a.w=1),"Z"in a?(i=(o=(i=Tn(Cn(a.y))).getUTCDay())>4||0===o?Zh.ceil(i):Zh(i),i=Vh.offset(i,7*(a.V-1)),a.y=i.getUTCFullYear(),a.m=i.getUTCMonth(),a.d=i.getUTCDate()+(a.w+6)%7):(i=(o=(i=e(Cn(a.y))).getDay())>4||0===o?Xh.ceil(i):Xh(i),i=Fh.offset(i,7*(a.V-1)),a.y=i.getFullYear(),a.m=i.getMonth(),a.d=i.getDate()+(a.w+6)%7)}else("W"in a||"U"in a)&&("w"in a||(a.w="u"in a?a.u%7:"W"in a?1:0),o="Z"in a?Tn(Cn(a.y)).getUTCDay():e(Cn(a.y)).getDay(),a.m=0,a.d="W"in a?(a.w+6)%7+7*a.W-(o+5)%7:a.w+7*a.U-(o+6)%7);return"Z"in a?(a.H+=a.Z/100|0,a.M+=a.Z%100,Tn(a)):e(a)}}function r(t,e,n,r){for(var i,o,a=0,u=e.length,s=n.length;a<u;){if(r>=s)return-1;if(37===(i=e.charCodeAt(a++))){if(i=e.charAt(a++),!(o=E[i in id?e.charAt(a++):i])||(r=o(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}var i=t.dateTime,o=t.date,a=t.time,u=t.periods,s=t.days,c=t.shortDays,l=t.months,f=t.shortMonths,h=On(u),d=zn(u),p=On(s),v=zn(s),g=On(c),m=zn(c),y=On(l),b=zn(l),_=On(f),x=zn(f),w={a:function(t){return c[t.getDay()]},A:function(t){return s[t.getDay()]},b:function(t){return f[t.getMonth()]},B:function(t){return l[t.getMonth()]},c:null,d:Qn,e:Qn,f:ir,H:tr,I:er,j:nr,L:rr,m:or,M:ar,p:function(t){return u[+(t.getHours()>=12)]},Q:Dr,s:$r,S:ur,u:sr,U:cr,V:lr,w:fr,W:hr,x:null,X:null,y:dr,Y:pr,Z:vr,"%":zr},M={a:function(t){return c[t.getUTCDay()]},A:function(t){return s[t.getUTCDay()]},b:function(t){return f[t.getUTCMonth()]},B:function(t){return l[t.getUTCMonth()]},c:null,d:gr,e:gr,f:xr,H:mr,I:yr,j:br,L:_r,m:wr,M:Mr,p:function(t){return u[+(t.getUTCHours()>=12)]},Q:Dr,s:$r,S:Er,u:kr,U:Ar,V:Tr,w:Cr,W:Sr,x:null,X:null,y:Nr,Y:Pr,Z:Or,"%":zr},E={a:function(t,e,n){var r=g.exec(e.slice(n));return r?(t.w=m[r[0].toLowerCase()],n+r[0].length):-1},A:function(t,e,n){var r=p.exec(e.slice(n));return r?(t.w=v[r[0].toLowerCase()],n+r[0].length):-1},b:function(t,e,n){var r=_.exec(e.slice(n));return r?(t.m=x[r[0].toLowerCase()],n+r[0].length):-1},B:function(t,e,n){var r=y.exec(e.slice(n));return r?(t.m=b[r[0].toLowerCase()],n+r[0].length):-1},c:function(t,e,n){return r(t,i,e,n)},d:Yn,e:Yn,f:Gn,H:Hn,I:Hn,j:qn,L:Vn,m:Xn,M:Bn,p:function(t,e,n){var r=h.exec(e.slice(n));return r?(t.p=d[r[0].toLowerCase()],n+r[0].length):-1},Q:Jn,s:Kn,S:Wn,u:$n,U:jn,V:Ln,w:Dn,W:In,x:function(t,e,n){return r(t,o,e,n)},X:function(t,e,n){return r(t,a,e,n)},y:Fn,Y:Rn,Z:Un,"%":Zn};return w.x=e(o,w),w.X=e(a,w),w.c=e(i,w),M.x=e(o,M),M.X=e(a,M),M.c=e(i,M),{format:function(t){var n=e(t+="",w);return n.toString=function(){return t},n},parse:function(t){var e=n(t+="",An);return e.toString=function(){return t},e},utcFormat:function(t){var n=e(t+="",M);return n.toString=function(){return t},n},utcParse:function(t){var e=n(t,Tn);return e.toString=function(){return t},e}}}function Nn(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function Pn(t){return t.replace(ud,"\\$&")}function On(t){return new RegExp("^(?:"+t.map(Pn).join("|")+")","i")}function zn(t){for(var e={},n=-1,r=t.length;++n<r;)e[t[n].toLowerCase()]=n;return e}function Dn(t,e,n){var r=od.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function $n(t,e,n){var r=od.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function jn(t,e,n){var r=od.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function Ln(t,e,n){var r=od.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function In(t,e,n){var r=od.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function Rn(t,e,n){var r=od.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function Fn(t,e,n){var r=od.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Un(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Xn(t,e,n){var r=od.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function Yn(t,e,n){var r=od.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function qn(t,e,n){var r=od.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function Hn(t,e,n){var r=od.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function Bn(t,e,n){var r=od.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function Wn(t,e,n){var r=od.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function Vn(t,e,n){var r=od.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function Gn(t,e,n){var r=od.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Zn(t,e,n){var r=ad.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function Jn(t,e,n){var r=od.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function Kn(t,e,n){var r=od.exec(e.slice(n));return r?(t.Q=1e3*+r[0],n+r[0].length):-1}function Qn(t,e){return Nn(t.getDate(),e,2)}function tr(t,e){return Nn(t.getHours(),e,2)}function er(t,e){return Nn(t.getHours()%12||12,e,2)}function nr(t,e){return Nn(1+Fh.count(Hh(t),t),e,3)}function rr(t,e){return Nn(t.getMilliseconds(),e,3)}function ir(t,e){return rr(t,e)+"000"}function or(t,e){return Nn(t.getMonth()+1,e,2)}function ar(t,e){return Nn(t.getMinutes(),e,2)}function ur(t,e){return Nn(t.getSeconds(),e,2)}function sr(t){var e=t.getDay();return 0===e?7:e}function cr(t,e){return Nn(Uh.count(Hh(t),t),e,2)}function lr(t,e){var n=t.getDay();return t=n>=4||0===n?Yh(t):Yh.ceil(t),Nn(Yh.count(Hh(t),t)+(4===Hh(t).getDay()),e,2)}function fr(t){return t.getDay()}function hr(t,e){return Nn(Xh.count(Hh(t),t),e,2)}function dr(t,e){return Nn(t.getFullYear()%100,e,2)}function pr(t,e){return Nn(t.getFullYear()%1e4,e,4)}function vr(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Nn(e/60|0,"0",2)+Nn(e%60,"0",2)}function gr(t,e){return Nn(t.getUTCDate(),e,2)}function mr(t,e){return Nn(t.getUTCHours(),e,2)}function yr(t,e){return Nn(t.getUTCHours()%12||12,e,2)}function br(t,e){return Nn(1+Vh.count(Qh(t),t),e,3)}function _r(t,e){return Nn(t.getUTCMilliseconds(),e,3)}function xr(t,e){return _r(t,e)+"000"}function wr(t,e){return Nn(t.getUTCMonth()+1,e,2)}function Mr(t,e){return Nn(t.getUTCMinutes(),e,2)}function Er(t,e){return Nn(t.getUTCSeconds(),e,2)}function kr(t){var e=t.getUTCDay();return 0===e?7:e}function Ar(t,e){return Nn(Gh.count(Qh(t),t),e,2)}function Tr(t,e){var n=t.getUTCDay();return t=n>=4||0===n?Jh(t):Jh.ceil(t),Nn(Jh.count(Qh(t),t)+(4===Qh(t).getUTCDay()),e,2)}function Cr(t){return t.getUTCDay()}function Sr(t,e){return Nn(Zh.count(Qh(t),t),e,2)}function Nr(t,e){return Nn(t.getUTCFullYear()%100,e,2)}function Pr(t,e){return Nn(t.getUTCFullYear()%1e4,e,4)}function Or(){return"+0000"}function zr(){return"%"}function Dr(t){return+t}function $r(t){return Math.floor(+t/1e3)}function jr(t,e){var n=void 0;return e?(e.forEach(function(e){e&&(c(n=e(t))?t=t.new(n):n&&(t=n))}),t):t}function Lr(t,e,n,r){var i=r.dataName(Ls(n,"name")),o=[];Object.defineProperties(t,{name:{get:function(){return i}},store:{get:function(){return r}},type:{get:function(){return e}},transforms:{get:function(){return o}},config:{get:function(){return n}}}),t.initialise(n),t.addTransforms(Ls(n,"transforms")),r.sources.set(i,t),hd.call("init",void 0,t)}function Ir(t){var e=r();Object.defineProperties(this,{sources:{get:function(){return e}}}),this.transforms=Os({},fd),this.dataCount=0,this.model=t}function Rr(t,e){var n=t.__transition;if(!n||!(n=n[e])||n.state>md)throw new Error("too late");return n}function Fr(t,e){var n=t.__transition;if(!n||!(n=n[e])||n.state>bd)throw new Error("too late");return n}function Ur(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("too late");return n}function Xr(t,e,n){function r(s){var c,l,f,h;if(n.state!==yd)return o();for(c in u)if((h=u[c]).name===n.name){if(h.state===_d)return ic(r);h.state===xd?(h.state=Md,h.timer.stop(),h.on.call("interrupt",t,t.__data__,h.index,h.group),delete u[c]):+c<e&&(h.state=Md,h.timer.stop(),delete u[c])}if(ic(function(){n.state===_d&&(n.state=xd,n.timer.restart(i,n.delay,n.time),i(s))}),n.state=bd,n.on.call("start",t,t.__data__,n.index,n.group),n.state===bd){for(n.state=_d,a=new Array(f=n.tween.length),c=0,l=-1;c<f;++c)(h=n.tween[c].value.call(t,t.__data__,n.index,n.group))&&(a[++l]=h);a.length=l+1}}function i(e){for(var r=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(o),n.state=wd,1),i=-1,u=a.length;++i<u;)a[i].call(null,r);n.state===wd&&(n.on.call("end",t,t.__data__,n.index,n.group),o())}function o(){n.state=Md,n.timer.stop(),delete u[e];for(var r in u)return;delete t.__transition}var a,u=t.__transition;u[e]=n,n.timer=m(function(t){n.state=yd,n.timer.restart(r,n.delay,n.time),n.delay<=t&&r(t-n.delay)},0,n.time)}function Yr(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function qr(){}function Hr(t){var e;return t=(t+"").trim().toLowerCase(),(e=Nd.exec(t))?(e=parseInt(e[1],16),new Zr(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1)):(e=Pd.exec(t))?Br(parseInt(e[1],16)):(e=Od.exec(t))?new Zr(e[1],e[2],e[3],1):(e=zd.exec(t))?new Zr(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Dd.exec(t))?Wr(e[1],e[2],e[3],e[4]):(e=$d.exec(t))?Wr(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=jd.exec(t))?Jr(e[1],e[2]/100,e[3]/100,1):(e=Ld.exec(t))?Jr(e[1],e[2]/100,e[3]/100,e[4]):Id.hasOwnProperty(t)?Br(Id[t]):"transparent"===t?new Zr(NaN,NaN,NaN,0):null}function Br(t){return new Zr(t>>16&255,t>>8&255,255&t,1)}function Wr(t,e,n,r){return r<=0&&(t=e=n=NaN),new Zr(t,e,n,r)}function Vr(t){return t instanceof qr||(t=Hr(t)),t?(t=t.rgb(),new Zr(t.r,t.g,t.b,t.opacity)):new Zr}function Gr(t,e,n,r){return 1===arguments.length?Vr(t):new Zr(t,e,n,null==r?1:r)}function Zr(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function Jr(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Qr(t,e,n,r)}function Kr(t){if(t instanceof Qr)return new Qr(t.h,t.s,t.l,t.opacity);if(t instanceof qr||(t=Hr(t)),!t)return new Qr;if(t instanceof Qr)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,u=o-i,s=(o+i)/2;return u?(a=e===o?(n-r)/u+6*(n<r):n===o?(r-e)/u+2:(e-n)/u+4,u/=s<.5?o+i:2-o-i,a*=60):u=s>0&&s<1?0:a,new Qr(a,u,s,t.opacity)}function Qr(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function ti(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function ei(t){if(t instanceof ni)return new ni(t.l,t.a,t.b,t.opacity);if(t instanceof si){var e=t.h*Rd;return new ni(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}t instanceof Zr||(t=Vr(t));var n=ai(t.r),r=ai(t.g),i=ai(t.b),o=ri((.4124564*n+.3575761*r+.1804375*i)/Ud),a=ri((.2126729*n+.7151522*r+.072175*i)/Xd);return new ni(116*a-16,500*(o-a),200*(a-ri((.0193339*n+.119192*r+.9503041*i)/Yd)),t.opacity)}function ni(t,e,n,r){this.l=+t,this.a=+e,this.b=+n,this.opacity=+r}function ri(t){return t>Wd?Math.pow(t,1/3):t/Bd+qd}function ii(t){return t>Hd?t*t*t:Bd*(t-qd)}function oi(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function ai(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function ui(t){if(t instanceof si)return new si(t.h,t.c,t.l,t.opacity);t instanceof ni||(t=ei(t));var e=Math.atan2(t.b,t.a)*Fd;return new si(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function si(t,e,n,r){this.h=+t,this.c=+e,this.l=+n,this.opacity=+r}function ci(t){if(t instanceof fi)return new fi(t.h,t.s,t.l,t.opacity);t instanceof Zr||(t=Vr(t));var e=t.r/255,n=t.g/255,r=t.b/255,i=(ep*r+Qd*e-tp*n)/(ep+Qd-tp),o=r-i,a=(Kd*(n-i)-Zd*o)/Jd,u=Math.sqrt(a*a+o*o)/(Kd*i*(1-i)),s=u?Math.atan2(a,o)*Fd-120:NaN;return new fi(s<0?s+360:s,u,i,t.opacity)}function li(t,e,n,r){return 1===arguments.length?ci(t):new fi(t,e,n,null==r?1:r)}function fi(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function hi(t,e){return function(n){return t+n*e}}function di(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function pi(t){return 1==(t=+t)?vi:function(e,n){return n-e?di(e,n,t):ap(isNaN(e)?n:e)}}function vi(t,e){var n=e-t;return n?hi(t,n):ap(isNaN(t)?e:t)}function gi(t){return function(){return t}}function mi(t){return function(e){return t(e)+""}}function yi(t,e,n,r){function i(t){return t.length?t.pop()+" ":""}function o(t,r,i,o,a,u){if(t!==i||r!==o){var s=a.push("translate(",null,e,null,n);u.push({i:s-4,x:lp(t,i)},{i:s-2,x:lp(r,o)})}else(i||o)&&a.push("translate("+i+e+o+n)}function a(t,e,n,o){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),o.push({i:n.push(i(n)+"rotate(",null,r)-2,x:lp(t,e)})):e&&n.push(i(n)+"rotate("+e+r)}function u(t,e,n,o){t!==e?o.push({i:n.push(i(n)+"skewX(",null,r)-2,x:lp(t,e)}):e&&n.push(i(n)+"skewX("+e+r)}function s(t,e,n,r,o,a){if(t!==n||e!==r){var u=o.push(i(o)+"scale(",null,",",null,")");a.push({i:u-4,x:lp(t,n)},{i:u-2,x:lp(e,r)})}else 1===n&&1===r||o.push(i(o)+"scale("+n+","+r+")")}return function(e,n){var r=[],i=[];return e=t(e),n=t(n),o(e.translateX,e.translateY,n.translateX,n.translateY,r,i),a(e.rotate,n.rotate,r,i),u(e.skewX,n.skewX,r,i),s(e.scaleX,e.scaleY,n.scaleX,n.scaleY,r,i),e=n=null,function(t){for(var e,n=-1,o=i.length;++n<o;)r[(e=i[n]).i]=e.x(t);return r.join("")}}}function bi(t){return function e(n){function r(e,r){var i=t((e=li(e)).h,(r=li(r)).h),o=vi(e.s,r.s),a=vi(e.l,r.l),u=vi(e.opacity,r.opacity);return function(t){return e.h=i(t),e.s=o(t),e.l=a(Math.pow(t,n)),e.opacity=u(t),e+""}}return n=+n,r.gamma=e,r}(1)}function _i(t,e){var n,r;return function(){var i=Fr(this,t),o=i.tween;if(o!==n)for(var a=0,u=(r=n=o).length;a<u;++a)if(r[a].name===e){(r=r.slice()).splice(a,1);break}i.tween=r}}function xi(t,e,n){var r,i;if("function"!=typeof n)throw new Error;return function(){var o=Fr(this,t),a=o.tween;if(a!==r){i=(r=a).slice();for(var u={name:e,value:n},s=0,c=i.length;s<c;++s)if(i[s].name===e){i[s]=u;break}s===c&&i.push(u)}o.tween=i}}function wi(t,e,n){var r=t._id;return t.each(function(){var t=Fr(this,r);(t.value||(t.value={}))[e]=n.apply(this,arguments)}),function(t){return Ur(t,r).value[e]}}function Mi(t){return function(){this.removeAttribute(t)}}function Ei(t){return function(){this.removeAttributeNS(t.space,t.local)}}function ki(t,e,n){var r,i;return function(){var o=this.getAttribute(t);return o===n?null:o===r?i:i=e(r=o,n)}}function Ai(t,e,n){var r,i;return function(){var o=this.getAttributeNS(t.space,t.local);return o===n?null:o===r?i:i=e(r=o,n)}}function Ti(t,e,n){var r,i,o;return function(){var a,u=n(this);{if(null!=u)return(a=this.getAttribute(t))===u?null:a===r&&u===i?o:o=e(r=a,i=u);this.removeAttribute(t)}}}function Ci(t,e,n){var r,i,o;return function(){var a,u=n(this);{if(null!=u)return(a=this.getAttributeNS(t.space,t.local))===u?null:a===r&&u===i?o:o=e(r=a,i=u);this.removeAttributeNS(t.space,t.local)}}}function Si(t,e){function n(){var n=this,r=e.apply(n,arguments);return r&&function(e){n.setAttributeNS(t.space,t.local,r(e))}}return n._value=e,n}function Ni(t,e){function n(){var n=this,r=e.apply(n,arguments);return r&&function(e){n.setAttribute(t,r(e))}}return n._value=e,n}function Pi(t,e){return function(){Rr(this,t).delay=+e.apply(this,arguments)}}function Oi(t,e){return e=+e,function(){Rr(this,t).delay=e}}function zi(t,e){return function(){Fr(this,t).duration=+e.apply(this,arguments)}}function Di(t,e){return e=+e,function(){Fr(this,t).duration=e}}function $i(t,e){if("function"!=typeof e)throw new Error;return function(){Fr(this,t).ease=e}}function ji(t){return(t+"").trim().split(/^|\s+/).every(function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t})}function Li(t,e,n){var r,i,o=ji(e)?Rr:Fr;return function(){var a=o(this,t),u=a.on;u!==r&&(i=(r=u).copy()).on(e,n),a.on=i}}function Ii(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function Ri(t,e){var n,r,i;return function(){var o=B(this,t),a=(this.style.removeProperty(t),B(this,t));return o===a?null:o===n&&a===r?i:i=e(n=o,r=a)}}function Fi(t){return function(){this.style.removeProperty(t)}}function Ui(t,e,n){var r,i;return function(){var o=B(this,t);return o===n?null:o===r?i:i=e(r=o,n)}}function Xi(t,e,n){var r,i,o;return function(){var a=B(this,t),u=n(this);return null==u&&(this.style.removeProperty(t),u=B(this,t)),a===u?null:a===r&&u===i?o:o=e(r=a,i=u)}}function Yi(t,e,n){function r(){var r=this,i=e.apply(r,arguments);return i&&function(e){r.style.setProperty(t,i(e),n)}}return r._value=e,r}function qi(t){return function(){this.textContent=t}}function Hi(t){return function(){var e=t(this);this.textContent=null==e?"":e}}function Bi(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Wi(t){return yt().transition(t)}function Vi(){return++kp}function Gi(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))return Tp.time=p(),Tp;return n}function Zi(t,e){return"string"==typeof t&&t.indexOf("%")===t.length-1?Sp(.01*parseFloat(t)*e):+t}function Ji(t,e){var n={width:e.width,height:e.height};return n.width||(n.width=Ki(t),n.width?n.widthElement=to(t):n.width=Np),n.height||(n.height=Qi(t),n.height?n.heightElement=eo(t):n.height=Pp),n.height=ld(Zi(n.height,n.width),void 0,no()),n}function Ki(t){var e=oo(t,"width");if(e)return ro(e)}function Qi(t){var e=oo(t,"width");if(e)return io(e)}function to(t){return oo(t,"width")}function eo(t){return oo(t,"height")}function no(){return window.innerHeight}function ro(t){var e=t.getBoundingClientRect().width,n=Ac(t);return e-ao(n.style("padding-left"))-ao(n.style("padding-right"))}function io(t){var e=t.getBoundingClientRect().height,n=Ac(t);return e-ao(n.style("padding-top"))-ao(n.style("padding-bottom"))}function oo(t,e){for(var n=t.node?t.node():t;n&&"BODY"!==n.tagName;){if(n.getBoundingClientRect()[e])return n;n=n.parentNode}}function ao(t){return t&&"px"==t.substring(t.length-2)?+t.substring(0,t.length-2):0}function uo(t){if(c(t))return t.map(uo);if(a(t)){var e={};for(var n in t)e[n]=uo(t[n]);return e}return t}function so(t){function e(e){var r=e+"",a=n.get(r);if(!a){if(o!==Rp)return o;n.set(r,a=i.push(e))}return t[(a-1)%t.length]}var n=r(),i=[],o=Rp;return t=null==t?[]:Ip.call(t),e.domain=function(t){if(!arguments.length)return i.slice();i=[],n=r();for(var o,a,u=-1,s=t.length;++u<s;)n.has(a=(o=t[u])+"")||n.set(a,i.push(o));return e},e.range=function(n){return arguments.length?(t=Ip.call(n),e):t.slice()},e.unknown=function(t){return arguments.length?(o=t,e):o},e.copy=function(){return so().domain(i).range(t).unknown(o)},e}function co(){function t(){var t=i().length,r=a[1]<a[0],f=a[r-0],h=a[1-r];e=(h-f)/Math.max(1,t-s+2*c),u&&(e=Math.floor(e)),f+=(h-f-e*(t-s))*l,n=e*(1-s),u&&(f=Math.round(f),n=Math.round(n));var d=Wl(t).map(function(t){return f+e*t});return o(r?d.reverse():d)}var e,n,r=so().unknown(void 0),i=r.domain,o=r.range,a=[0,1],u=!1,s=0,c=0,l=.5;return delete r.unknown,r.domain=function(e){return arguments.length?(i(e),t()):i()},r.range=function(e){return arguments.length?(a=[+e[0],+e[1]],t()):a.slice()},r.rangeRound=function(e){return a=[+e[0],+e[1]],u=!0,t()},r.bandwidth=function(){return n},r.step=function(){return e},r.round=function(e){return arguments.length?(u=!!e,t()):u},r.padding=function(e){return arguments.length?(s=c=Math.max(0,Math.min(1,e)),t()):s},r.paddingInner=function(e){return arguments.length?(s=Math.max(0,Math.min(1,e)),t()):s},r.paddingOuter=function(e){return arguments.length?(c=Math.max(0,Math.min(1,e)),t()):c},r.align=function(e){return arguments.length?(l=Math.max(0,Math.min(1,e)),t()):l},r.copy=function(){return co().domain(i()).range(a).round(u).paddingInner(s).paddingOuter(c).align(l)},t()}function lo(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return lo(e())},t}function fo(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Fp(e)}function ho(t){return function(e,n){var r=t(e=+e,n=+n);return function(t){return t<=e?0:t>=n?1:r(t)}}}function po(t){return function(e,n){var r=t(e=+e,n=+n);return function(t){return t<=0?e:t>=1?n:r(t)}}}function vo(t,e,n,r){var i=t[0],o=t[1],a=e[0],u=e[1];return o<i?(i=n(o,i),a=r(u,a)):(i=n(i,o),a=r(a,u)),function(t){return a(i(t))}}function go(t,e,n,r){var i=Math.min(t.length,e.length)-1,o=new Array(i),a=new Array(i),u=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++u<i;)o[u]=n(t[u],t[u+1]),a[u]=r(e[u],e[u+1]);return function(e){var n=Yl(t,e,1,i)-1;return a[n](o[n](e))}}function mo(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp())}function yo(t,e){function n(){return i=Math.min(u.length,s.length)>2?go:vo,o=a=null,r}function r(e){return(o||(o=i(u,s,l?ho(t):t,c)))(+e)}var i,o,a,u=Xp,s=Xp,c=vp,l=!1;return r.invert=function(t){return(a||(a=i(s,u,fo,l?po(e):e)))(+t)},r.domain=function(t){return arguments.length?(u=Lp.call(t,Up),n()):u.slice()},r.range=function(t){return arguments.length?(s=Ip.call(t),n()):s.slice()},r.rangeRound=function(t){return s=Ip.call(t),c=gp,n()},r.clamp=function(t){return arguments.length?(l=!!t,n()):l},r.interpolate=function(t){return arguments.length?(c=t,n()):c},n()}function bo(t){return new _o(t)}function _o(t){if(!(e=Gp.exec(t)))throw new Error("invalid format: "+t);var e,n=e[1]||" ",r=e[2]||">",i=e[3]||"-",o=e[4]||"",a=!!e[5],u=e[6]&&+e[6],s=!!e[7],c=e[8]&&+e[8].slice(1),l=e[9]||"";"n"===l?(s=!0,l="g"):Vp[l]||(l=""),(a||"0"===n&&"="===r)&&(a=!0,n="0",r="="),this.fill=n,this.align=r,this.sign=i,this.symbol=o,this.zero=a,this.width=u,this.comma=s,this.precision=c,this.type=l}function xo(t){var e=t.domain;return t.ticks=function(t){var n=e();return Jl(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){return ov(e(),t,n)},t.nice=function(n){null==n&&(n=10);var r,i=e(),o=0,a=i.length-1,u=i[o],s=i[a];return s<u&&(r=u,u=s,s=r,r=o,o=a,a=r),(r=Ee(u,s,n))>0?r=Ee(u=Math.floor(u/r)*r,s=Math.ceil(s/r)*r,n):r<0&&(r=Ee(u=Math.ceil(u*r)/r,s=Math.floor(s*r)/r,n)),r>0?(i[o]=Math.floor(u/r)*r,i[a]=Math.ceil(s/r)*r,e(i)):r<0&&(i[o]=Math.ceil(u*r)/r,i[a]=Math.floor(s*r)/r,e(i)),t},t}function wo(){var t=yo(fo,lp);return t.copy=function(){return mo(t,wo())},xo(t)}function Mo(){function t(t){return+t}var e=[0,1];return t.invert=t,t.domain=t.range=function(n){return arguments.length?(e=Lp.call(n,Up),t):e.slice()},t.copy=function(){return Mo().domain(e)},xo(t)}function Eo(t,e){return(e=Math.log(e/t))?function(n){return Math.log(n/t)/e}:Fp(e)}function ko(t,e){return t<0?function(n){return-Math.pow(-e,n)*Math.pow(-t,1-n)}:function(n){return Math.pow(e,n)*Math.pow(t,1-n)}}function Ao(t){return isFinite(t)?+("1e"+t):t<0?0:t}function To(t){return 10===t?Ao:t===Math.E?Math.exp:function(e){return Math.pow(t,e)}}function Co(t){return t===Math.E?Math.log:10===t&&Math.log10||2===t&&Math.log2||(t=Math.log(t),function(e){return Math.log(e)/t})}function So(t){return function(e){return-t(-e)}}function No(){function t(){return i=Co(r),o=To(r),n()[0]<0&&(i=So(i),o=So(o)),e}var e=yo(Eo,ko).domain([1,10]),n=e.domain,r=10,i=Co(10),o=To(10);return e.base=function(e){return arguments.length?(r=+e,t()):r},e.domain=function(e){return arguments.length?(n(e),t()):n()},e.ticks=function(t){var e,a=n(),u=a[0],s=a[a.length-1];(e=s<u)&&(h=u,u=s,s=h);var c,l,f,h=i(u),d=i(s),p=null==t?10:+t,v=[];if(!(r%1)&&d-h<p){if(h=Math.round(h)-1,d=Math.round(d)+1,u>0){for(;h<d;++h)for(l=1,c=o(h);l<r;++l)if(!((f=c*l)<u)){if(f>s)break;v.push(f)}}else for(;h<d;++h)for(l=r-1,c=o(h);l>=1;--l)if(!((f=c*l)<u)){if(f>s)break;v.push(f)}}else v=Jl(h,d,Math.min(d-h,p)).map(o);return e?v.reverse():v},e.tickFormat=function(t,n){if(null==n&&(n=10===r?".0e":","),"function"!=typeof n&&(n=Jp(n)),t===1/0)return n;null==t&&(t=10);var a=Math.max(1,r*t/e.ticks().length);return function(t){var e=t/o(Math.round(i(t)));return e*r<r-.5&&(e*=r),e<=a?n(t):""}},e.nice=function(){return n(av(n(),{floor:function(t){return o(Math.floor(i(t)))},ceil:function(t){return o(Math.ceil(i(t)))}}))},e.copy=function(){return mo(e,No().base(r))},e}function Po(t,e){return t<0?-Math.pow(-t,e):Math.pow(t,e)}function Oo(){var t=1,e=yo(function(e,n){return(n=Po(n,t)-(e=Po(e,t)))?function(r){return(Po(r,t)-e)/n}:Fp(n)},function(e,n){return n=Po(n,t)-(e=Po(e,t)),function(r){return Po(e+n*r,1/t)}}),n=e.domain;return e.exponent=function(e){return arguments.length?(t=+e,n(n())):t},e.copy=function(){return mo(e,Oo().exponent(t))},xo(e)}function zo(){function t(){var t=0,o=Math.max(1,r.length);for(i=new Array(o-1);++t<o;)i[t-1]=Kl(n,t/o);return e}function e(t){if(!isNaN(t=+t))return r[Yl(i,t)]}var n=[],r=[],i=[];return e.invertExtent=function(t){var e=r.indexOf(t);return e<0?[NaN,NaN]:[e>0?i[e-1]:n[0],e<i.length?i[e]:n[n.length-1]]},e.domain=function(e){if(!arguments.length)return n.slice();n=[];for(var r,i=0,o=e.length;i<o;++i)null==(r=e[i])||isNaN(r=+r)||n.push(r);return n.sort(Ul),t()},e.range=function(e){return arguments.length?(r=Ip.call(e),t()):r.slice()},e.quantiles=function(){return i.slice()},e.copy=function(){return zo().domain(n).range(r)},e}function Do(){function t(t){if(t<=t)return a[Yl(o,t,0,i)]}function e(){var e=-1;for(o=new Array(i);++e<i;)o[e]=((e+1)*r-(e-i)*n)/(i+1);return t}var n=0,r=1,i=1,o=[.5],a=[0,1];return t.domain=function(t){return arguments.length?(n=+t[0],r=+t[1],e()):[n,r]},t.range=function(t){return arguments.length?(i=(a=Ip.call(t)).length-1,e()):a.slice()},t.invertExtent=function(t){var e=a.indexOf(t);return e<0?[NaN,NaN]:e<1?[n,o[0]]:e>=i?[o[i-1],r]:[o[e-1],o[e]]},t.copy=function(){return Do().domain([n,r]).range(a)},xo(t)}function $o(){function t(t){if(t<=t)return n[Yl(e,t,0,r)]}var e=[.5],n=[0,1],r=1;return t.domain=function(i){return arguments.length?(e=Ip.call(i),r=Math.min(e.length,n.length-1),t):e.slice()},t.range=function(i){return arguments.length?(n=Ip.call(i),r=Math.min(e.length,n.length-1),t):n.slice()},t.invertExtent=function(t){var r=n.indexOf(t);return[e[r-1],e[r]]},t.copy=function(){return $o().domain(e).range(n)},t}function jo(t){return new Date(t)}function Lo(t){return t instanceof Date?+t:+new Date(+t)}function Io(t,e,n,r,i,o,a,u,s){function c(u){return(a(u)<u?p:o(u)<u?v:i(u)<u?g:r(u)<u?m:e(u)<u?n(u)<u?y:b:t(u)<u?_:x)(u)}function l(e,n,r,i){if(null==e&&(e=10),"number"==typeof e){var o=Math.abs(r-n)/e,a=Xl(function(t){return t[2]}).right(w,o);a===w.length?(i=ke(n/dv,r/dv,e),e=t):a?(i=(a=w[o/w[a-1][2]<w[a][2]/o?a-1:a])[1],e=a[0]):(i=ke(n,r,e),e=u)}return null==i?e:e.every(i)}var f=yo(fo,lp),h=f.invert,d=f.domain,p=s(".%L"),v=s(":%S"),g=s("%I:%M"),m=s("%I %p"),y=s("%a %d"),b=s("%b %d"),_=s("%B"),x=s("%Y"),w=[[a,1,uv],[a,5,5*uv],[a,15,15*uv],[a,30,30*uv],[o,1,sv],[o,5,5*sv],[o,15,15*sv],[o,30,30*sv],[i,1,cv],[i,3,3*cv],[i,6,6*cv],[i,12,12*cv],[r,1,lv],[r,2,2*lv],[n,1,fv],[e,1,hv],[e,3,3*hv],[t,1,dv]];return f.invert=function(t){return new Date(h(t))},f.domain=function(t){return arguments.length?d(Lp.call(t,Lo)):d().map(jo)},f.ticks=function(t,e){var n,r=d(),i=r[0],o=r[r.length-1],a=o<i;return a&&(n=i,i=o,o=n),n=l(t,i,o,e),n=n?n.range(i,o+1):[],a?n.reverse():n},f.tickFormat=function(t,e){return null==e?c:s(e)},f.nice=function(t,e){var n=d();return(t=l(t,n[0],n[n.length-1],e))?d(av(n,t)):f},f.copy=function(){return mo(f,Io(t,e,n,r,i,o,a,u,s))},f}function Ro(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}function Fo(t){function e(e){var o=(e-n)/(r-n);return t(i?Math.max(0,Math.min(1,o)):o)}var n=0,r=1,i=!1;return e.domain=function(t){return arguments.length?(n=+t[0],r=+t[1],e):[n,r]},e.clamp=function(t){return arguments.length?(i=!!t,e):i},e.interpolator=function(n){return arguments.length?(t=n,e):t},e.copy=function(){return Fo(t).domain([n,r]).clamp(i)},xo(e)}function Uo(){var t=this.__visual__;t?(t.destroy(),nf('Removed "'+t.toString()+'" from DOM, '+zp.live.length+" live visuals left")):Ch("d3-visual without __visual__ object")}function Xo(t){var e=void 0,n=void 0;Object.keys(t).forEach(function(r){e=t[r].options,n=t[r].prototype,e&&(zp.options[r]=e),n&&Os(zv,n)})}function Yo(t,e){function n(e,n){var r=this.initialise(e,n);Object.defineProperties(this,{element:{get:function(){return r}},sel:{get:function(){return Ac(r)}},paperType:{get:function(){return t}}})}return n.prototype=Os({},$v,e),zp.papers[t]=n,n}function qo(t){var e=t.getModel("menu"),n=t.dim(e.height,t.height,e.minHeight,e.maxHeight);t.menu.style("height",n+"px")}function Ho(t){var e=t.dataStore,n=Ls(t.options,"data");e||(e=new Ir(t.getModel("dataContext")),t.model.root.dataStore=e),e.addSources(n)}function Bo(t){var e=t.dataStore,n=Ls(t,"data");n&&(u(n)&&(n={source:n}),n.name||(n.name=t.model.uid),(n=e.addSources(n))?t.model.$set("data",n.name):Ch("Could not create data source "+n.name))}function Wo(t,e){var n=Vo(t.menu.style("height")),r=e.maxSize?Math.min(n-4,e.maxSize):n-4,i=t.dim(e.size,t.width,e.minSize,r);t.menu.select(".title").html(e.text).style("font-size",i+"px").style("line-height",n+"px")}function Vo(t){return+t.substring(0,t.length-2)}function Go(t,e){var n=e.options[t];void 0===n||a(n)||(e.options[t]=Qo(n||0))}function Zo(t,e,n){return Rv.reduce(function(r,i){return r[i]=Zi(t[i],Fv.indexOf(i)>-1?e:n),r},{})}function Jo(t){delete t.__boundingBox,c(t.layers)&&t.layers.forEach(Jo)}function Ko(){return{width:this.innerWidth,height:this.innerHeight,margin:Qo(0),padding:Qo(0),total:Qo(0),innerWidth:this.innerWidth,innerHeight:this.innerHeight,$nomargins:this.$nomargins}}function Qo(t){return{left:t,right:t,top:t,bottom:t}}function ta(t){return"translate("+(t+.5)+",0)"}function ea(t){return"translate(0,"+(t+.5)+")"}function na(t){return function(e){return+t(e)}}function ra(t){var e=Math.max(0,t.bandwidth()-1)/2;return t.round()&&(e=Math.round(e)),function(n){return+t(n)+e}}function ia(){return!this.__axis}function oa(t,e){function n(n){var h=null==i?e.ticks?e.ticks.apply(e,r):e.domain():i,d=null==o?e.tickFormat?e.tickFormat.apply(e,r):Xv:o,p=Math.max(a,0)+s,v=e.range(),g=+v[0]+.5,m=+v[v.length-1]+.5,y=(e.bandwidth?ra:na)(e.copy()),b=n.selection?n.selection():n,_=b.selectAll(".domain").data([null]),x=b.selectAll(".tick").data(h,e).order(),w=x.exit(),M=x.enter().append("g").attr("class","tick"),E=x.select("line"),k=x.select("text");_=_.merge(_.enter().insert("path",".tick").attr("class","domain").attr("stroke","#000")),x=x.merge(M),E=E.merge(M.append("line").attr("stroke","#000").attr(l+"2",c*a)),k=k.merge(M.append("text").attr("fill","#000").attr(l,c*p).attr("dy",t===Yv?"0em":t===Hv?"0.71em":"0.32em")),n!==b&&(_=_.transition(n),x=x.transition(n),E=E.transition(n),k=k.transition(n),w=w.transition(n).attr("opacity",Wv).attr("transform",function(t){return isFinite(t=y(t))?f(t):this.getAttribute("transform")}),M.attr("opacity",Wv).attr("transform",function(t){var e=this.parentNode.__axis;return f(e&&isFinite(e=e(t))?e:y(t))})),w.remove(),_.attr("d",t===Bv||t==qv?"M"+c*u+","+g+"H0.5V"+m+"H"+c*u:"M"+g+","+c*u+"V0.5H"+m+"V"+c*u),x.attr("opacity",1).attr("transform",function(t){return f(y(t))}),E.attr(l+"2",c*a),k.attr(l,c*p).text(d),b.filter(ia).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===qv?"start":t===Bv?"end":"middle"),b.each(function(){this.__axis=y})}var r=[],i=null,o=null,a=6,u=6,s=3,c=t===Yv||t===Bv?-1:1,l=t===Bv||t===qv?"x":"y",f=t===Yv||t===Hv?ta:ea;return n.scale=function(t){return arguments.length?(e=t,n):e},n.ticks=function(){return r=Uv.call(arguments),n},n.tickArguments=function(t){return arguments.length?(r=null==t?[]:Uv.call(t),n):r.slice()},n.tickValues=function(t){return arguments.length?(i=null==t?null:Uv.call(t),n):i&&i.slice()},n.tickFormat=function(t){return arguments.length?(o=t,n):o},n.tickSize=function(t){return arguments.length?(a=u=+t,n):a},n.tickSizeInner=function(t){return arguments.length?(a=+t,n):a},n.tickSizeOuter=function(t){return arguments.length?(u=+t,n):u},n.tickPadding=function(t){return arguments.length?(s=+t,n):s},n}function aa(t,e,n,r){var i=Vv.get(t)(e).tickSize(n.tickSize);return null!==n.tickSizeOuter&&i.tickSizeOuter(n.tickSizeOuter),l(r)?i.tickFormat(ed(n.timeFormat)):null!==n.format&&i.tickFormat(Jp(n.format)),i.ticks(n.ticks)}function ua(t,e,n){t.select("path.domain").attr("stroke",e.stroke);var r=t.selectAll("text").attr("fill",e.stroke);if(e.hide){var i=n.range();Math.abs(i[0]-i[i.length-1])<e.hide?t.style("opacity",0):t.style("opacity",1)}e.rotate&&r.attr("transform","rotate("+e.rotate+")").style("text-anchor",e.ancor)}function sa(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function ca(){return new sa}function la(t){return t>1?0:t<-1?sg:Math.acos(t)}function fa(t){return t>=1?cg:t<=-1?-cg:Math.asin(t)}function ha(t){return t.innerRadius}function da(t){return t.outerRadius}function pa(t){return t.startAngle}function va(t){return t.endAngle}function ga(t){return t&&t.padAngle}function ma(t,e,n,r,i,o,a,u){var s=n-t,c=r-e,l=a-i,f=u-o,h=(l*(e-o)-f*(t-i))/(f*s-l*c);return[t+h*s,e+h*c]}function ya(t,e,n,r,i,o,a){var u=t-n,s=e-r,c=(a?o:-o)/ag(u*u+s*s),l=c*s,f=-c*u,h=t+l,d=e+f,p=n+l,v=r+f,g=(h+p)/2,m=(d+v)/2,y=p-h,b=v-d,_=y*y+b*b,x=i-o,w=h*v-p*d,M=(b<0?-1:1)*ag(rg(0,x*x*_-w*w)),E=(w*b-y*M)/_,k=(-w*y-b*M)/_,A=(w*b+y*M)/_,T=(-w*y+b*M)/_,C=E-g,S=k-m,N=A-g,P=T-m;return C*C+S*S>N*N+P*P&&(E=A,k=T),{cx:E,cy:k,x01:-l,y01:-f,x11:E*(i/x-1),y11:k*(i/x-1)}}function ba(t){this._context=t}function _a(t){return t[0]}function xa(t){return t[1]}function wa(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function Ma(t){this._context=t}function Ea(t){this._context=t}function ka(t){this._context=t}function Aa(t,e){this._basis=new Ma(t),this._beta=e}function Ta(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function Ca(t,e){this._context=t,this._k=(1-e)/6}function Sa(t,e){this._context=t,this._k=(1-e)/6}function Na(t,e){this._context=t,this._k=(1-e)/6}function Pa(t,e,n){var r=t._x1,i=t._y1,o=t._x2,a=t._y2;if(t._l01_a>ug){var u=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,s=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*u-t._x0*t._l12_2a+t._x2*t._l01_2a)/s,i=(i*u-t._y0*t._l12_2a+t._y2*t._l01_2a)/s}if(t._l23_a>ug){var c=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,l=3*t._l23_a*(t._l23_a+t._l12_a);o=(o*c+t._x1*t._l23_2a-e*t._l12_2a)/l,a=(a*c+t._y1*t._l23_2a-n*t._l12_2a)/l}t._context.bezierCurveTo(r,i,o,a,t._x2,t._y2)}function Oa(t,e){this._context=t,this._alpha=e}function za(t,e){this._context=t,this._alpha=e}function Da(t,e){this._context=t,this._alpha=e}function $a(t){this._context=t}function ja(t){return t<0?-1:1}function La(t,e,n){var r=t._x1-t._x0,i=e-t._x1,o=(t._y1-t._y0)/(r||i<0&&-0),a=(n-t._y1)/(i||r<0&&-0),u=(o*i+a*r)/(r+i);return(ja(o)+ja(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(u))||0}function Ia(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function Ra(t,e,n){var r=t._x0,i=t._y0,o=t._x1,a=t._y1,u=(o-r)/3;t._context.bezierCurveTo(r+u,i+u*e,o-u,a-u*n,o,a)}function Fa(t){this._context=t}function Ua(t){this._context=new Xa(t)}function Xa(t){this._context=t}function Ya(t){this._context=t}function qa(t){var e,n,r=t.length-1,i=new Array(r),o=new Array(r),a=new Array(r);for(i[0]=0,o[0]=2,a[0]=t[0]+2*t[1],e=1;e<r-1;++e)i[e]=1,o[e]=4,a[e]=4*t[e]+2*t[e+1];for(i[r-1]=2,o[r-1]=7,a[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=i[e]/o[e-1],o[e]-=n,a[e]-=n*a[e-1];for(i[r-1]=a[r-1]/o[r-1],e=r-2;e>=0;--e)i[e]=(a[e]-i[e+1])/o[e];for(o[r-1]=(t[r]+i[r-1])/2,e=0;e<r-1;++e)o[e]=2*t[e+1]-i[e+1];return[i,o]}function Ha(t,e){return t[e]}function Ba(t){for(var e,n=0,r=-1,i=t.length;++r<i;)(e=+t[r][1])&&(n+=e);return n}function Wa(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Yg&&e.documentElement.namespaceURI===Yg?e.createElement(t):e.createElementNS(n,t)}}function Va(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Ga(t,e,n){return t=Za(t,e,n),function(e){var n=e.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||t.call(this,e)}}function Za(t,e,n){return function(r){try{t.call(this,this.__data__,e,n)}finally{}}}function Ja(t){return t.trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}})}function Ka(t){return function(){var e=this.__on;if(e){for(var n,r=0,i=-1,o=e.length;r<o;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++i]=n:this.removeEventListener(n.type,n.listener,n.capture);++i?e.length=i:delete this.__on}}}function Qa(t,e,n){var r=Jg.hasOwnProperty(t.type)?Ga:Za;return function(i,o,a){var u,s=this.__on,c=r(e,o,a);if(s)for(var l=0,f=s.length;l<f;++l)if((u=s[l]).type===t.type&&u.name===t.name)return this.removeEventListener(u.type,u.listener,u.capture),this.addEventListener(u.type,u.listener=c,u.capture=n),void(u.value=e);this.addEventListener(t.type,c,n),u={type:t.type,name:t.name,value:e,listener:c,capture:n},s?s.push(u):this.__on=[u]}}function tu(){}function eu(){return[]}function nu(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function ru(t,e,n,r,i,o){for(var a,u=0,s=e.length,c=o.length;u<c;++u)(a=e[u])?(a.__data__=o[u],r[u]=a):n[u]=new nu(t,o[u]);for(;u<s;++u)(a=e[u])&&(i[u]=a)}function iu(t,e,n,r,i,o,a){var u,s,c,l={},f=e.length,h=o.length,d=new Array(f);for(u=0;u<f;++u)(s=e[u])&&(d[u]=c=nm+a.call(s,s.__data__,u,e),c in l?i[u]=s:l[c]=s);for(u=0;u<h;++u)(s=l[c=nm+a.call(t,o[u],u,o)])?(r[u]=s,s.__data__=o[u],l[c]=null):n[u]=new nu(t,o[u]);for(u=0;u<f;++u)(s=e[u])&&l[d[u]]===s&&(i[u]=s)}function ou(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function au(t){return function(){this.removeAttribute(t)}}function uu(t){return function(){this.removeAttributeNS(t.space,t.local)}}function su(t,e){return function(){this.setAttribute(t,e)}}function cu(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function lu(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function fu(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function hu(t){return function(){this.style.removeProperty(t)}}function du(t,e,n){return function(){this.style.setProperty(t,e,n)}}function pu(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function vu(t){return function(){delete this[t]}}function gu(t,e){return function(){this[t]=e}}function mu(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function yu(t){return t.trim().split(/^|\s+/)}function bu(t){return t.classList||new _u(t)}function _u(t){this._node=t,this._names=yu(t.getAttribute("class")||"")}function xu(t,e){for(var n=bu(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function wu(t,e){for(var n=bu(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function Mu(t){return function(){xu(this,t)}}function Eu(t){return function(){wu(this,t)}}function ku(t,e){return function(){(e.apply(this,arguments)?xu:wu)(this,t)}}function Au(){this.textContent=""}function Tu(t){return function(){this.textContent=t}}function Cu(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function Su(){this.innerHTML=""}function Nu(t){return function(){this.innerHTML=t}}function Pu(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function Ou(){this.nextSibling&&this.parentNode.appendChild(this)}function zu(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Du(){return null}function $u(){var t=this.parentNode;t&&t.removeChild(this)}function ju(t,e,n){var r=rm(t),i=r.CustomEvent;i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function Lu(t,e){return function(){return ju(this,t,e)}}function Iu(t,e){return function(){return ju(this,t,e.apply(this,arguments))}}function Ru(t,e){this._groups=t,this._parents=e}function Fu(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r)throw new Error("illegal type: "+t);r[t]=[]}return new Uu(r)}function Uu(t){this._=t}function Xu(t,e){return t.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");if(r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}})}function Yu(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function qu(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=am,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}function Hu(t){return function(e,n){return sm(t(e),n)}}function Bu(t,e,n){var r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=lm?10:o>=fm?5:o>=hm?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=lm?10:o>=fm?5:o>=hm?2:1)}function Wu(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=lm?i*=10:o>=fm?i*=5:o>=hm&&(i*=2),e<t?-i:i}function Vu(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:mm(e)}function Gu(t){return function(e,n){var r=t(e=+e,n=+n);return function(t){return t<=e?0:t>=n?1:r(t)}}}function Zu(t){return function(e,n){var r=t(e=+e,n=+n);return function(t){return t<=0?e:t>=1?n:r(t)}}}function Ju(t,e,n,r){var i=t[0],o=t[1],a=e[0],u=e[1];return o<i?(i=n(o,i),a=r(u,a)):(i=n(i,o),a=r(a,u)),function(t){return a(i(t))}}function Ku(t,e,n,r){var i=Math.min(t.length,e.length)-1,o=new Array(i),a=new Array(i),u=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++u<i;)o[u]=n(t[u],t[u+1]),a[u]=r(e[u],e[u+1]);return function(e){var n=cm(t,e,1,i)-1;return a[n](o[n](e))}}function Qu(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp())}function ts(t,e){function n(){return i=Math.min(u.length,s.length)>2?Ku:Ju,o=a=null,r}function r(e){return(o||(o=i(u,s,l?Gu(t):t,c)))(+e)}var i,o,a,u=bm,s=bm,c=vp,l=!1;return r.invert=function(t){return(a||(a=i(s,u,Vu,l?Zu(e):e)))(+t)},r.domain=function(t){return arguments.length?(u=vm.call(t,ym),n()):u.slice()},r.range=function(t){return arguments.length?(s=gm.call(t),n()):s.slice()},r.rangeRound=function(t){return s=gm.call(t),c=gp,n()},r.clamp=function(t){return arguments.length?(l=!!t,n()):l},r.interpolate=function(t){return arguments.length?(c=t,n()):c},n()}function es(t){return new ns(t)}function ns(t){if(!(e=Am.exec(t)))throw new Error("invalid format: "+t);var e,n=e[1]||" ",r=e[2]||">",i=e[3]||"-",o=e[4]||"",a=!!e[5],u=e[6]&&+e[6],s=!!e[7],c=e[8]&&+e[8].slice(1),l=e[9]||"";"n"===l?(s=!0,l="g"):km[l]||(l=""),(a||"0"===n&&"="===r)&&(a=!0,n="0",r="="),this.fill=n,this.align=r,this.sign=i,this.symbol=o,this.zero=a,this.width=u,this.comma=s,this.precision=c,this.type=l}function rs(t){var e=t.domain;return t.ticks=function(t){var n=e();return dm(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){return jm(e(),t,n)},t.nice=function(n){var r=e(),i=r.length-1,o=null==n?10:n,a=r[0],u=r[i],s=Wu(a,u,o);return s&&(s=Wu(Math.floor(a/s)*s,Math.ceil(u/s)*s,o),r[0]=Math.floor(a/s)*s,r[i]=Math.ceil(u/s)*s,e(r)),t},t}function is(){var t=ts(Vu,lp);return t.copy=function(){return Qu(t,is())},rs(t)}function os(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}function as(t){if(!(e=qm.exec(t)))throw new Error("invalid format: "+t);var e,n=e[1]||" ",r=e[2]||">",i=e[3]||"-",o=e[4]||"",a=!!e[5],u=e[6]&&+e[6],s=!!e[7],c=e[8]&&+e[8].slice(1),l=e[9]||"";"n"===l?(s=!0,l="g"):Ym[l]||(l=""),(a||"0"===n&&"="===r)&&(a=!0,n="0",r="="),this.fill=n,this.align=r,this.sign=i,this.symbol=o,this.zero=a,this.width=u,this.comma=s,this.precision=c,this.type=l}function us(t){return t}function ss(t){return t.left||t.right||t.top||t.bottom}function cs(t,e){var n=t.document.documentElement,r=Ac(t).on("dragstart.drag",null);e&&(r.on("click.drag",gy,!0),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function ls(){vc.stopImmediatePropagation()}function fs(t){return{type:t}}function hs(){return!vc.button}function ds(){var t=this.ownerSVGElement||this;return[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function ps(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function vs(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function gs(){return ys(ky)}function ms(){return ys(Ay)}function ys(t){function e(e){var r=e.property("__brush",a).selectAll(".overlay").data([fs("overlay")]);r.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Cy.overlay).merge(r).each(function(){var t=ps(this).extent;Ac(this).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1])}),e.selectAll(".selection").data([fs("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Cy.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var i=e.selectAll(".handle").data(t.handles,function(t){return t.type});i.exit().remove(),i.enter().append("rect").attr("class",function(t){return"handle handle--"+t.type}).attr("cursor",function(t){return Cy[t.type]}),e.each(n).attr("fill","none").attr("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush touchstart.brush",o)}function n(){var t=Ac(this),e=ps(this).selection;e?(t.selectAll(".selection").style("display",null).attr("x",e[0][0]).attr("y",e[0][1]).attr("width",e[1][0]-e[0][0]).attr("height",e[1][1]-e[0][1]),t.selectAll(".handle").style("display",null).attr("x",function(t){return"e"===t.type[t.type.length-1]?e[1][0]-f/2:e[0][0]-f/2}).attr("y",function(t){return"s"===t.type[0]?e[1][1]-f/2:e[0][1]-f/2}).attr("width",function(t){return"n"===t.type||"s"===t.type?e[1][0]-e[0][0]+f:f}).attr("height",function(t){return"e"===t.type||"w"===t.type?e[1][1]-e[0][1]+f:f})):t.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function r(t,e){return t.__brush.emitter||new i(t,e)}function i(t,e){this.that=t,this.args=e,this.state=t.__brush,this.active=0}function o(){function e(){var t=yc(x);!z||b||_||(Math.abs(t[0]-$[0])>Math.abs(t[1]-$[1])?_=!0:b=!0),$=t,y=!0,_y(),i()}function i(){var t;switch(g=$[0]-D[0],m=$[1]-D[1],M){case wy:case xy:E&&(g=Math.max(S-a,Math.min(P-h,g)),s=a+g,d=h+g),k&&(m=Math.max(N-l,Math.min(O-p,m)),f=l+m,v=p+m);break;case My:E<0?(g=Math.max(S-a,Math.min(P-a,g)),s=a+g,d=h):E>0&&(g=Math.max(S-h,Math.min(P-h,g)),s=a,d=h+g),k<0?(m=Math.max(N-l,Math.min(O-l,m)),f=l+m,v=p):k>0&&(m=Math.max(N-p,Math.min(O-p,m)),f=l,v=p+m);break;case Ey:E&&(s=Math.max(S,Math.min(P,a-g*E)),d=Math.max(S,Math.min(P,h+g*E))),k&&(f=Math.max(N,Math.min(O,l-m*k)),v=Math.max(N,Math.min(O,p+m*k)))}d<s&&(E*=-1,t=a,a=h,h=t,t=s,s=d,d=t,w in Sy&&I.attr("cursor",Cy[w=Sy[w]])),v<f&&(k*=-1,t=l,l=p,p=t,t=f,f=v,v=t,w in Ny&&I.attr("cursor",Cy[w=Ny[w]])),A.selection&&(C=A.selection),b&&(s=C[0][0],d=C[1][0]),_&&(f=C[0][1],v=C[1][1]),C[0][0]===s&&C[0][1]===f&&C[1][0]===d&&C[1][1]===v||(A.selection=[[s,f],[d,v]],n.call(x),j.brush())}function o(){if(ls(),vc.touches){if(vc.touches.length)return;u&&clearTimeout(u),u=setTimeout(function(){u=null},500),L.on("touchmove.brush touchend.brush touchcancel.brush",null)}else cs(vc.view,y),R.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);L.attr("pointer-events","all"),I.attr("cursor",Cy.overlay),A.selection&&(C=A.selection),vs(C)&&(A.selection=null,n.call(x)),j.end()}if(vc.touches){if(vc.changedTouches.length<vc.touches.length)return _y()}else if(u)return;if(c.apply(this,arguments)){var a,s,l,f,h,d,p,v,g,m,y,b,_,x=this,w=vc.target.__data__.type,M="selection"===(vc.metaKey?w="overlay":w)?xy:vc.altKey?Ey:My,E=t===Ay?null:Py[w],k=t===ky?null:Oy[w],A=ps(x),T=A.extent,C=A.selection,S=T[0][0],N=T[0][1],P=T[1][0],O=T[1][1],z=E&&k&&vc.shiftKey,D=yc(x),$=D,j=r(x,arguments).beforestart();"overlay"===w?A.selection=C=[[a=t===Ay?S:D[0],l=t===ky?N:D[1]],[h=t===Ay?P:a,p=t===ky?O:l]]:(a=C[0][0],l=C[0][1],h=C[1][0],p=C[1][1]),s=a,f=l,d=h,v=p;var L=Ac(x).attr("pointer-events","none"),I=L.selectAll(".overlay").attr("cursor",Cy[w]);if(vc.touches)L.on("touchmove.brush",e,!0).on("touchend.brush touchcancel.brush",o,!0);else{var R=Ac(vc.view).on("keydown.brush",function(){switch(vc.keyCode){case 16:z=E&&k;break;case 18:M===My&&(E&&(h=d-g*E,a=s+g*E),k&&(p=v-m*k,l=f+m*k),M=Ey,i());break;case 32:M!==My&&M!==Ey||(E<0?h=d-g:E>0&&(a=s-g),k<0?p=v-m:k>0&&(l=f-m),M=wy,I.attr("cursor",Cy.selection),i());break;default:return}_y()},!0).on("keyup.brush",function(){switch(vc.keyCode){case 16:z&&(b=_=z=!1,i());break;case 18:M===Ey&&(E<0?h=d:E>0&&(a=s),k<0?p=v:k>0&&(l=f),M=My,i());break;case 32:M===wy&&(vc.altKey?(E&&(h=d-g*E,a=s+g*E),k&&(p=v-m*k,l=f+m*k),M=Ey):(E<0?h=d:E>0&&(a=s),k<0?p=v:k>0&&(l=f),M=My),I.attr("cursor",Cy[w]),i());break;default:return}_y()},!0).on("mousemove.brush",e,!0).on("mouseup.brush",o,!0);my(vc.view)}ls(),kd(x),n.call(x),j.start()}}function a(){var e=this.__brush||{selection:null};return e.extent=s.apply(this,arguments),e.dim=t,e}var u,s=ds,c=hs,l=xt(e,"start","brush","end"),f=6;return e.move=function(e,i){e.selection?e.on("start.brush",function(){r(this,arguments).beforestart().start()}).on("interrupt.brush end.brush",function(){r(this,arguments).end()}).tween("brush",function(){function e(t){a.selection=1===t&&vs(c)?null:l(t),n.call(o),u.brush()}var o=this,a=o.__brush,u=r(o,arguments),s=a.selection,c=t.input("function"==typeof i?i.apply(this,arguments):i,a.extent),l=vp(s,c);return s&&c?e:e(1)}):e.each(function(){var e=this,o=arguments,a=e.__brush,u=t.input("function"==typeof i?i.apply(e,o):i,a.extent),s=r(e,o).beforestart();kd(e),a.selection=null==u||vs(u)?null:u,n.call(e),s.start().brush().end()})},i.prototype={beforestart:function(){return 1==++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(){return this.starting&&(this.starting=!1,this.emit("start")),this},brush:function(){return this.emit("brush"),this},end:function(){return 0==--this.active&&(delete this.state.emitter,this.emit("end")),this},emit:function(n){N(new by(e,n,t.output(this.state.selection)),l.apply,l,[n,this.that,this.args])}},e.extent=function(t){return arguments.length?(s="function"==typeof t?t:yy([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),e):s},e.filter=function(t){return arguments.length?(c="function"==typeof t?t:yy(!!t),e):c},e.handleSize=function(t){return arguments.length?(f=+t,e):f},e.on=function(){var t=l.on.apply(l,arguments);return t===l?e:t},e}function bs(t,e,n,r){this.data=t,this.stacked=r,this.x=e,this.y=n}function _s(t){return t}function xs(t){this.vertical=!0,this.init(t),this.sx.rangeRound([0,this.box.innerWidth]),this.sy.rangeRound([this.box.innerHeight,0])}function ws(t){this.init(t),this.sx.rangeRound([0,this.box.innerHeight]),this.sy.rangeRound([0,this.box.innerWidth])}function Ms(){function t(t){var c=this;t.each(function(l,f){var h=(l=l.map(o).sort(Ul)).length,d=l[0],p=l[h-1],v=l.quartiles=u(l),g=a&&a(l),m=g&&g.map(function(t){return l[t]}),y=g?Wl(0,g[0]).concat(Wl(g[1]+1,h)):Wl(h),b=wo().domain(i&&i.call(c,l,f)||[d,p]).range([n,0]),_=c.__chart__||wo().domain([0,1/0]).range(b.range());c.__chart__=b;var x=t.selectAll("line.center").data(m?[m]:[]);x.enter().insert("line","rect").attr("class","center").attr("x1",e/2).attr("y1",function(t){return _(t[0])}).attr("x2",e/2).attr("y2",function(t){return _(t[1])}).style("opacity",1e-6).transition().duration(r).style("opacity",1).attr("y1",function(t){return b(t[0])}).attr("y2",function(t){return b(t[1])}),x.transition().duration(r).style("opacity",1).attr("y1",function(t){return b(t[0])}).attr("y2",function(t){return b(t[1])}),x.exit().transition().duration(r).style("opacity",1e-6).attr("y1",function(t){return b(t[0])}).attr("y2",function(t){return b(t[1])}).remove();var w=t.selectAll("rect.box").data([v]);w.enter().append("rect").attr("class","box").attr("x",0).attr("y",function(t){return _(t[2])}).attr("width",e).attr("height",function(t){return _(t[0])-_(t[2])}).transition().duration(r).attr("y",function(t){return b(t[2])}).attr("height",function(t){return b(t[0])-b(t[2])}),w.transition().duration(r).attr("y",function(t){return b(t[2])}).attr("height",function(t){return b(t[0])-b(t[2])});var M=t.selectAll("line.median").data([v[1]]);M.enter().append("line").attr("class","median").attr("x1",0).attr("y1",_).attr("x2",e).attr("y2",_).transition().duration(r).attr("y1",b).attr("y2",b),M.transition().duration(r).attr("y1",b).attr("y2",b);var E=t.selectAll("line.whisker").data(m||[]);E.enter().insert("line","circle, text").attr("class","whisker").attr("x1",0).attr("y1",_).attr("x2",e).attr("y2",_).style("opacity",1e-6).transition().duration(r).attr("y1",b).attr("y2",b).style("opacity",1),E.transition().duration(r).attr("y1",b).attr("y2",b).style("opacity",1),E.exit().transition().duration(r).attr("y1",b).attr("y2",b).style("opacity",1e-6).remove();var k=t.selectAll("circle.outlier").data(y,Number);k.enter().insert("circle","text").attr("class","outlier").attr("r",5).attr("cx",e/2).attr("cy",function(t){return _(l[t])}).style("opacity",1e-6).transition().duration(r).attr("cy",function(t){return b(l[t])}).style("opacity",1),k.transition().duration(r).attr("cy",function(t){return b(l[t])}).style("opacity",1),k.exit().transition().duration(r).attr("cy",function(t){return b(l[t])}).style("opacity",1e-6).remove();var A=s||b.tickFormat(8),T=t.selectAll("text.box").data(v);T.enter().append("text").attr("class","box").attr("dy",".3em").attr("dx",function(t,e){return 1&e?6:-6}).attr("x",function(t,n){return 1&n?e:0}).attr("y",_).attr("text-anchor",function(t,e){return 1&e?"start":"end"}).text(A).transition().duration(r).attr("y",b),T.transition().duration(r).text(A).attr("y",b);var C=t.selectAll("text.whisker").data(m||[]);C.enter().append("text").attr("class","whisker").attr("dy",".3em").attr("dx",6).attr("x",e).attr("y",_).text(A).style("opacity",1e-6).transition().duration(r).attr("y",b).style("opacity",1),C.transition().duration(r).text(A).attr("y",b).style("opacity",1),C.exit().transition().duration(r).attr("y",b).style("opacity",1e-6).remove()})}var e=1,n=1,r=0,i=null,o=Number,a=Es,u=ks,s=null;return t.width=function(n){return arguments.length?(e=n,t):e},t.height=function(e){return arguments.length?(n=e,t):n},t.tickFormat=function(e){return arguments.length?(s=e,t):s},t.duration=function(e){return arguments.length?(r=e,t):r},t.domain=function(e){return arguments.length?(i=null===e?e:hy(e),t):i},t.value=function(e){return arguments.length?(o=e,t):o},t.whiskers=function(e){return arguments.length?(a=e,t):a},t.quartiles=function(e){return arguments.length?(u=e,t):u},t}function Es(t){return[0,t.length-1]}function ks(t){return[Kl(t,.25),Kl(t,.5),Kl(t,.75)]}function As(){var t=vl().use(Ol).use(Dl).use(Iy);return sl.on("component-mounted",function(t){"d3form"===t.name&&t.model.$on(function(){return Ts()})}),t}function Ts(){}function Cs(){}var Ss=Object.getOwnPropertySymbols,Ns=Object.prototype.hasOwnProperty,Ps=Object.prototype.propertyIsEnumerable,Os=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(t){r[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(t){return!1}}()?Object.assign:function(t,n){for(var r,i,o=e(t),a=1;a<arguments.length;a++){r=Object(arguments[a]);for(var u in r)Ns.call(r,u)&&(o[u]=r[u]);if(Ss){i=Ss(r);for(var s=0;s<i.length;s++)Ps.call(r,i[s])&&(o[i[s]]=r[i[s]])}}return o};n.prototype=r.prototype={constructor:n,has:function(t){return"$"+t in this},get:function(t){return this["$"+t]},set:function(t,e){return this["$"+t]=e,this},remove:function(t){var e="$"+t;return e in this&&delete this[e]},clear:function(){for(var t in this)"$"===t[0]&&delete this[t]},keys:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)"$"===e[0]&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)"$"===e[0]&&++t;return t},empty:function(){for(var t in this)if("$"===t[0])return!1;return!0},each:function(t){for(var e in this)"$"===e[0]&&t(this[e],e.slice(1),this)}};var zs=r.prototype;i.prototype=o.prototype={constructor:i,has:zs.has,add:function(t){return t+="",this["$"+t]=t,this},remove:zs.remove,clear:zs.clear,values:zs.keys,size:zs.size,empty:zs.empty,each:zs.each};var Ds=Object.prototype.toString,$s="undefined"!=typeof window&&"[object Object]"!==Ds.call(window),js=$s?window.console:require("console"),Ls=function(t,e){var n=void 0;if(a(t))return n=t[e],delete t[e],n;if(c(t)){var r=+e;return r==r?t.splice(r,1)[0]:(n=t[e],delete t[e],n)}},Is="[d3-view-debug]",Rs=function(t){Xs.logger.debug&&Xs.logger.debug(t)};js.debug=null;var Fs,Us,Xs={logger:js,fetch:function(){if($s)return window.fetch}(),readyCallbacks:[],setDebug:function(t){!arguments.length||t?this.logger.debug=s(t)?t:d:this.logger.debug=null}},Ys=function(t){Xs.logger.warn("[d3-view] "+t)},qs=["disabled","readonly","required"],Hs={create:function(t){return this.arg?t:Ys("Cannot bind to empty attribute. Specify :<attr-name>")},refresh:function(t,e){return"class"===this.arg?this.refreshClass(e):c(e)?Ys("Cannot apply array to attribute "+this.arg):void(qs.indexOf(this.arg)>-1?this.sel.property(this.arg,e||!1):this.sel.attr(this.arg,e||null))},refreshClass:function(t){var e=this.sel;c(t)||(t=[t]),this.oldValue&&this.oldValue.forEach(function(t){t&&e.classed(t,!1)}),this.oldValue=t.map(function(t){var n=!0;return c(t)&&(n=t[1],t=t[0]),t&&e.classed(t,n),t})}},Bs=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Array.prototype.slice.call(t,e)},Ws={refresh:function(t,e){if(f(e)&&(e=""+e),u(e)){this.sel.html(e);for(var n=Bs(this.el.children),r=0;r<n.length;++r)this.select(n[r]).mount()}}},Vs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gs=(function(){function t(t){this.value=t}function e(e){function n(i,o){try{var a=e[i](o),u=a.value;u instanceof t?Promise.resolve(u.value).then(function(t){n("next",t)},function(t){n("throw",t)}):r(a.done?"return":"normal",a.value)}catch(t){r("throw",t)}}function r(t,e){switch(t){case"return":i.resolve({value:e,done:!0});break;case"throw":i.reject(e);break;default:i.resolve({value:e,done:!1})}(i=i.next)?n(i.key,i.arg):o=null}var i,o;this._invoke=function(t,e){return new Promise(function(r,a){var u={key:t,arg:e,resolve:r,reject:a,next:null};o?o=o.next=u:(i=o=u,n(t,e))})},"function"!=typeof e.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(e.prototype[Symbol.asyncIterator]=function(){return this}),e.prototype.next=function(t){return this._invoke("next",t)},e.prototype.throw=function(t){return this._invoke("throw",t)},e.prototype.return=function(t){return this._invoke("return",t)}}(),0),Zs=0,Js=0,Ks=1e3,Qs=0,tc=0,ec=0,nc="object"===("undefined"==typeof performance?"undefined":Vs(performance))&&performance.now?performance:Date,rc="object"===("undefined"==typeof window?"undefined":Vs(window))&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};g.prototype=m.prototype={constructor:g,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?p():+n)+(null==e?0:+e),this._next||Us===this||(Us?Us._next=this:Fs=this,Us=this),this._call=t,this._time=n,w()},stop:function(){this._call&&(this._call=null,this._time=1/0,w())}};var ic=function(t,e,n){var r=new g;return e=null==e?0:+e,r.restart(function(n){r.stop(),t(n+e)},e,n),r},oc=function(t,e){var n=null;return function(){if(null!==n)return n;var r=this,i=arguments;return n=new Promise(function(o,a){ic(function(){n=null;try{o(t?t.apply(r,i):void 0)}catch(t){a(t)}},e)})}},ac="http://www.w3.org/1999/xhtml",uc={svg:"http://www.w3.org/2000/svg",xhtml:ac,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},sc=function(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),uc.hasOwnProperty(e)?{space:uc[e],local:t}:t},cc=function(t){var e=sc(t);return(e.local?E:M)(e)},lc=function(t){return function(){return this.matches(t)}};if("undefined"!=typeof document){var fc=document.documentElement;if(!fc.matches){var hc=fc.webkitMatchesSelector||fc.msMatchesSelector||fc.mozMatchesSelector||fc.oMatchesSelector;lc=function(t){return function(){return hc.call(this,t)}}}}var dc=lc,pc={},vc=null;"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(pc={mouseenter:"mouseover",mouseleave:"mouseout"}));var gc=function(){for(var t,e=vc;t=e.sourceEvent;)e=t;return e},mc=function(t,e){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]},yc=function(t){var e=gc();return e.changedTouches&&(e=e.changedTouches[0]),mc(t,e)},bc=function(t){return null==t?P:function(){return this.querySelector(t)}},_c=function(t){return null==t?O:function(){return this.querySelectorAll(t)}},xc=function(t){return new Array(t.length)};z.prototype={constructor:z,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var wc=function(t){return function(){return t}},Mc="$",Ec=function(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView};K.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var kc=[null];mt.prototype=yt.prototype={constructor:mt,select:function(t){"function"!=typeof t&&(t=bc(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a,u=e[i],s=u.length,c=r[i]=new Array(s),l=0;l<s;++l)(o=u[l])&&(a=t.call(o,o.__data__,l,u))&&("__data__"in o&&(a.__data__=o.__data__),c[l]=a);return new mt(r,this._parents)},selectAll:function(t){"function"!=typeof t&&(t=_c(t));for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var a,u=e[o],s=u.length,c=0;c<s;++c)(a=u[c])&&(r.push(t.call(a,a.__data__,c,u)),i.push(a));return new mt(r,i)},filter:function(t){"function"!=typeof t&&(t=dc(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a=e[i],u=a.length,s=r[i]=[],c=0;c<u;++c)(o=a[c])&&t.call(o,o.__data__,c,a)&&s.push(o);return new mt(r,this._parents)},data:function(t,e){if(!t)return d=new Array(this.size()),c=-1,this.each(function(t){d[++c]=t}),d;var n=e?$:D,r=this._parents,i=this._groups;"function"!=typeof t&&(t=wc(t));for(var o=i.length,a=new Array(o),u=new Array(o),s=new Array(o),c=0;c<o;++c){var l=r[c],f=i[c],h=f.length,d=t.call(l,l&&l.__data__,c,r),p=d.length,v=u[c]=new Array(p),g=a[c]=new Array(p);n(l,f,v,g,s[c]=new Array(h),d,e);for(var m,y,b=0,_=0;b<p;++b)if(m=v[b]){for(b>=_&&(_=b+1);!(y=g[_])&&++_<p;);m._next=y||null}}return a=new mt(a,r),a._enter=u,a._exit=s,a},enter:function(){return new mt(this._enter||this._groups.map(xc),this._parents)},exit:function(){return new mt(this._exit||this._groups.map(xc),this._parents)},merge:function(t){for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),a=new Array(r),u=0;u<o;++u)for(var s,c=e[u],l=n[u],f=c.length,h=a[u]=new Array(f),d=0;d<f;++d)(s=c[d]||l[d])&&(h[d]=s);for(;u<r;++u)a[u]=e[u];return new mt(a,this._parents)},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],o=i.length-1,a=i[o];--o>=0;)(r=i[o])&&(a&&a!==r.nextSibling&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(t){t||(t=j);for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i){for(var o,a=e[i],u=a.length,s=r[i]=new Array(u),c=0;c<u;++c)(o=a[c])&&(s[c]=o);s.sort(function(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n})}return new mt(r,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),e=-1;return this.each(function(){t[++e]=this}),t},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null},size:function(){var t=0;return this.each(function(){++t}),t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,o=e[n],a=0,u=o.length;a<u;++a)(i=o[a])&&t.call(i,i.__data__,a,o);return this},attr:function(t,e){var n=sc(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?I:L:"function"==typeof e?n.local?X:U:n.local?F:R)(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?Y:"function"==typeof e?H:q)(t,e,null==n?"":n)):B(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?W:"function"==typeof e?G:V)(t,e)):this.node()[t]},classed:function(t,e){var n=Z(t+"");if(arguments.length<2){for(var r=J(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof e?rt:e?et:nt)(n,e))},text:function(t){return arguments.length?this.each(null==t?it:("function"==typeof t?at:ot)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?ut:("function"==typeof t?ct:st)(t)):this.node().innerHTML},raise:function(){return this.each(lt)},lower:function(){return this.each(ft)},append:function(t){var e="function"==typeof t?t:cc(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},insert:function(t,e){var n="function"==typeof t?t:cc(t),r=null==e?ht:"function"==typeof e?e:bc(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function(){return this.each(dt)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var r,i,o=T(t+""),a=o.length;{if(!(arguments.length<2)){for(u=e?S:C,null==n&&(n=!1),r=0;r<a;++r)this.each(u(o[r],e,n));return this}var u=this.node().__on;if(u)for(var s,c=0,l=u.length;c<l;++c)for(r=0,s=u[c];r<a;++r)if((i=o[r]).type===s.type&&i.name===s.name)return s.value}},dispatch:function(t,e){return this.each(("function"==typeof e?gt:vt)(t,e))}};var Ac=function(t){return"string"==typeof t?new mt([[document.querySelector(t)]],[document.documentElement]):new mt([[t]],kc)},Tc=function(t){return"string"==typeof t?new mt([document.querySelectorAll(t)],[document.documentElement]):new mt([null==t?[]:t],kc)},Cc=function(t){return Object.defineProperty(t,"sel",{get:function(){return Ac(this.el)}}),t},Sc={on:function(t,e){var n=_t(this,t,e);this.sel.on("input",n).on("change",n)},off:function(){this.sel.on("input",null).on("change",null)},value:function(t){if(!arguments.length)return this.sel.property("value");this.sel.property("value",t)}},Nc=bt(),Pc=bt({value:function(t){if(!arguments.length)return this.sel.property("checked");this.sel.property("checked",t)}}),Oc={input:Nc,textarea:Nc,select:bt({value:function(t){var e,n=this.sel,r=n.selectAll("option"),i=t;if(!arguments.length)return i=[],r.each(function(){(e=Ac(this)).property("selected")&&i.push(e.attr("value")||"")}),n.property("multiple")?i:i[0]||"";c(i)||(i=[t||""]),r.each(function(){e=Ac(this),t=e.attr("value")||"",e.property("selected",i.indexOf(t)>-1)})}}),checkbox:Pc},zc={create:function(t){var e=this.sel.attr("type"),n=this.el.tagName.toLowerCase(),r=Oc[e]||Oc[n];return r?(this.tag=new r(this.el),t):Ys("Cannot apply d3-value directive to "+n)},mount:function(t){var e=this.expression;if(e.parsed.type!==e.codes.IDENTIFIER)return Ys('d3-value expression support identifiers only, got "'+e.parsed.type+'": '+this.expression);var n=this.expression.expr;return t.$set(n,this.tag.value()),this.tag.on(t,n),t},refresh:function(t,e){this.tag.value(e)},destroy:function(){this.tag.off()}},Dc={value:function(){}};wt.prototype=xt.prototype={constructor:wt,on:function(t,e){var n,r=this._,i=Mt(t+"",r),o=-1,a=i.length;{if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++o<a;)if(n=(t=i[o]).type)r[n]=kt(r[n],t.name,e);else if(null==e)for(n in r)r[n]=kt(r[n],t.name,null);return this}for(;++o<a;)if((n=(t=i[o]).type)&&(n=Et(r[n],t.name)))return n}},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new wt(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,n=(r=this._[t]).length;o<n;++o)r[o].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}},St.prototype=Error.prototype;var $c=function(t){return new Promise(function(e){e(t)})},jc=function(t){return t&&!s(t.size)?Ac(t):t},Lc={isd3:!0,providers:Xs,viewElement:Ct,select:function(t){return Ac(t)},selectAll:function(t){return Tc(t)},createElement:function(t){return Ac(document.createElement(t))},fetch:function(t,e){var n=Xs.fetch;return 1==arguments.length?n(t):n(t,e)},fetchText:function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return this.fetch.apply(this,[t].concat(n)).then(function(t){return t.text()})},json:function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return this.fetch.apply(this,[t].concat(n)).then(Nt)},renderFromUrl:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=this.cache;return t in r?$c(n?Ct(r[t]):r[t]):this.fetchText(t).then(function(i){return r[t]=i,n?Ct(i,e):Tt(i,e)})},on:function(t,e,n){if(t=jc(t),null===n)return t.on(e,null);t.on(e,function(){return n(vc)})}},Ic={COMPOUND:"Compound",IDENTIFIER:"Identifier",MEMBER_EXP:"MemberExpression",LITERAL:"Literal",THIS_EXP:"ThisExpression",CALL_EXP:"CallExpression",UNARY_EXP:"UnaryExpression",BINARY_EXP:"BinaryExpression",LOGICAL_EXP:"LogicalExpression",CONDITIONAL_EXP:"ConditionalExpression",ARRAY_EXP:"ArrayExpression"},Rc=function(t,e){var n=new Error(t+" at character "+e);throw n.index=e,n.description=t,n},Fc={"-":!0,"!":!0,"~":!0,"+":!0},Uc={"||":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":10,"/":10,"%":10},Xc=function(t){var e,n=0;for(var r in t)(e=r.length)>n&&t.hasOwnProperty(r)&&(n=e);return n},Yc=Xc(Fc),qc=Xc(Uc),Hc={true:!0,false:!1,null:null},Bc=function(t){return Uc[t]||0},Wc=function(t,e,n){return{type:"||"===t||"&&"===t?Ic.LOGICAL_EXP:Ic.BINARY_EXP,operator:t,left:e,right:n}},Vc=function(t){return t>=48&&t<=57},Gc=function(t){return 36===t||95===t||t>=65&&t<=90||t>=97&&t<=122||t>=128&&!Uc[String.fromCharCode(t)]},Zc=function(t){return 36===t||95===t||t>=65&&t<=90||t>=97&&t<=122||t>=48&&t<=57||t>=128&&!Uc[String.fromCharCode(t)]},Jc=function(t){for(var e,n,r=0,i=t.charAt,o=t.charCodeAt,a=function(e){return i.call(t,e)},u=function(e){return o.call(t,e)},s=t.length,c=function(){for(var t=u(r);32===t||9===t;)t=u(++r)},l=function t(){var e,n,i=h();return c(),63!==u(r)?i:(r++,(e=t())||Rc("Expected expression",r),c(),58===u(r)?(r++,(n=t())||Rc("Expected expression",r),{type:Ic.CONDITIONAL_EXP,test:i,consequent:e,alternate:n}):void Rc("Expected :",r))},f=function(){c();for(var e=t.substr(r,qc),n=e.length;n>0;){if(Uc.hasOwnProperty(e))return r+=n,e;e=e.substr(0,--n)}return!1},h=function(){var t,e,n,i,o,a,u,s;if(a=d(),!(e=f()))return a;for(o={value:e,prec:Bc(e)},(u=d())||Rc("Expected expression after "+e,r),i=[a,o,u];(e=f())&&0!==(n=Bc(e));){for(o={value:e,prec:n};i.length>2&&n<=i[i.length-2].prec;)u=i.pop(),e=i.pop().value,a=i.pop(),t=Wc(e,a,u),i.push(t);(t=d())||Rc("Expected expression after "+e,r),i.push(o,t)}for(t=i[s=i.length-1];s>1;)t=Wc(i[s-1].value,i[s-2],t),s-=2;return t},d=function e(){var n,i,o;if(c(),n=u(r),Vc(n)||46===n)return p();if(39===n||34===n)return v();if(Gc(n)||40===n)return y();if(91===n)return _();for(o=(i=t.substr(r,Yc)).length;o>0;){if(Fc.hasOwnProperty(i))return r+=o,{type:Ic.UNARY_EXP,operator:i,argument:e(),prefix:!0};i=i.substr(0,--o)}return!1},p=function(){for(var t,e,n="";Vc(u(r));)n+=a(r++);if(46===u(r))for(n+=a(r++);Vc(u(r));)n+=a(r++);if("e"===(t=a(r))||"E"===t){for(n+=a(r++),"+"!==(t=a(r))&&"-"!==t||(n+=a(r++));Vc(u(r));)n+=a(r++);Vc(u(r-1))||Rc("Expected exponent ("+n+a(r)+")",r)}return e=u(r),Gc(e)?Rc("Variable names cannot start with a number ("+n+a(r)+")",r):46===e&&Rc("Unexpected period",r),{type:Ic.LITERAL,value:parseFloat(n),raw:n}},v=function(){for(var t,e="",n=a(r++),i=!1;r<s;){if((t=a(r++))===n){i=!0;break}if("\\"===t)switch(t=a(r++)){case"n":e+="\n";break;case"r":e+="\r";break;case"t":e+="\t";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:e+="\\"+t}else e+=t}return i||Rc('Unclosed quote after "'+e+'"',r),{type:Ic.LITERAL,value:e,raw:n+e+n}},g=function(){var e,n=u(r),i=r;for(Gc(n)?r++:Rc("Unexpected "+a(r),r);r<s&&(n=u(r),Zc(n));)r++;return e=t.slice(i,r),Hc.hasOwnProperty(e)?{type:Ic.LITERAL,value:Hc[e],raw:e}:"this"===e?{type:Ic.THIS_EXP}:{type:Ic.IDENTIFIER,name:e}},m=function(t){for(var e,n,i=[],o=!1;r<s;){if(c(),(e=u(r))===t){o=!0,r++;break}44===e?r++:((n=l())&&n.type!==Ic.COMPOUND||Rc("Expected comma",r),i.push(n))}return o||Rc("Expected "+String.fromCharCode(t),r),i},y=function(){var t,e;for(e=40===(t=u(r))?b():g(),c(),t=u(r);46===t||91===t||40===t;)r++,46===t?(c(),e={type:Ic.MEMBER_EXP,computed:!1,object:e,property:g()}):91===t?(e={type:Ic.MEMBER_EXP,computed:!0,object:e,property:l()},c(),93!==(t=u(r))&&Rc("Unclosed [",r),r++):40===t&&(e={type:Ic.CALL_EXP,arguments:m(41),callee:e}),c(),t=u(r);return e},b=function(){r++;var t=l();if(c(),41===u(r))return r++,t;Rc("Unclosed (",r)},_=function(){return r++,{type:Ic.ARRAY_EXP,elements:m(93)}},x=[];r<s;)59===(e=u(r))||44===e?r++:(n=l())?x.push(n):r<s&&Rc('Unexpected "'+a(r)+'"',r);return 1===x.length?x[0]:{type:Ic.COMPOUND,body:x}};Jc.addUnaryOp=function(t){return Yc=Math.max(t.length,Yc),Fc[t]=!0,this},Jc.addBinaryOp=function(t,e){return qc=Math.max(t.length,qc),Uc[t]=e,this},Jc.addLiteral=function(t,e){return Hc[t]=e,this},Jc.removeUnaryOp=function(t){return delete Fc[t],t.length===Yc&&(Yc=Xc(Fc)),this},Jc.removeBinaryOp=function(t){return delete Uc[t],t.length===qc&&(qc=Xc(Uc)),this},Jc.removeLiteral=function(t){return delete Hc[t],this};var Kc={},Qc={};Lt.prototype={eval:function(t){return Pt(t,this.parsed)},safeEval:function(t){try{return Pt(t,this.parsed)}catch(t){Ys("Could not evaluate <<"+this.expr+">> expression: "+t)}},identifiers:function(){return Ot(this.parsed).values()}};var tl=function(t){return new Lt(t)},el=0,nl=function(t){var e="d3v"+ ++el;return arguments.length?(Object.defineProperty(t,"uid",{get:function(){return e}}),t):e},rl=function(){var t=xt("change"),e=0;return{on:function(e,n){return arguments.length<2?t.on(e):(t.on(e,n),this)},trigger:oc(function(){t.apply("change",this,arguments),e+=1}),triggered:function(){return e}}},il=function(t){return t&&t.constructor===Object};Ht.prototype=qt.prototype,qt.prototype.toString=function(){return"[object d3Model]"},qt.prototype.$on=function(t,e){1===arguments.length&&s(t)&&(e=t,t="");var n=t.split("."),r=n[0],i=Xt(this,r);return i?(this.$events.get(r)||n.push(this.uid),n[0]="change",i.on(n.join("."),e)):Ys('Cannot bind to "'+r+'" - no such reactive property')},qt.prototype.$change=function(t){var e=arguments.length?t:"",n=this.$events.get(e),r=Bs(arguments,1);return n?n.trigger.apply(this,r):Ys("attribute '"+e+"' is not a reactive property this model"),this},qt.prototype.$update=function(t,e){if(t){e=2!==arguments.length||e;for(var n in t)(e||void 0===this[n])&&("$"===n.substring(0,1)?this.constructor.prototype[n]?Ys("Cannot set attribute method "+n+", it is protected"):this[n]=t[n]:this.$set(n,t[n]))}return this},qt.prototype.$set=function(t,e){this.$events.get(t)?this[t]=e:Ut(this,t,e)},qt.prototype.$new=function(t){var e=this,n=Ht(t);return Object.defineProperties(n,{parent:{get:function(){return e}},isolated:{get:function(){return!0}}}),n},qt.prototype.$off=function(t){if(void 0===t)this.$events.each(function(t){return Yt(t)});else{var e=t.split("."),n=e.splice(0,1)[0],r=this.$events.get(n);r&&Yt(r,e.join("."))}},qt.prototype.$isReactive=function(t){return!!this.$events.has(t)||!(!this.parent||this.isolated)&&this.parent.$isReactive(t)},Object.defineProperty(qt.prototype,"root",{get:function(){return this.parent?this.parent.root:this}});var ol=Os({},Lc,{priority:1,create:function(t){return t},preMount:function(){},mount:function(t){return t},refresh:function(){},destroy:function(){},removeAttribute:function(){this.el.removeAttribute(this.name)},execute:function(t){this.active&&(this.removeAttribute(),this.identifiers=[],(t=this.mount(t))&&this.bindModel(t))},bindModel:function(t){var e=this,n=function(){var n=e.expression?e.expression.eval(t):void 0;e.refresh(t,n)},i=void 0,o=void 0,u=void 0,s=void 0;if(this.expression){var c=r();this.expression.identifiers().forEach(function(n){for(i=n.split("."),o=t,u=null,s=0;s<i.length-1;++s)if(o=o[i[s]],!a(o)){u=i.slice(0,s+1).join("."),Ys("Property "+u+" is not an object. Directive "+e.name+" cannot bind to "+n);break}if(null===u){if(!(o instanceof Ht))return Ys(n+" is not a reactive model. Directive "+e.name+" cannot bind to it");Bt(c,o,i[i.length-1])}}),c.each(function(t){t.events.has("")?e.identifiers.push({model:t.model,attr:""}):t.events.each(function(n){e.identifiers.push({model:t.model,attr:n})})})}else e.identifiers.push({model:t,attr:""});this.identifiers.forEach(function(t){var r=t.attr+"."+e.uid;t.model.$on(r,n)}),this.bindDestroy(t),n()},bindDestroy:function(t){var e=this,n=this,r=this.destroy;n.destroy=function(){return r.call(n,t)},this.sel.on("remove."+n.uid,function(){e.identifiers.forEach(function(t){t.model.$off(t.attr+"."+n.uid)}),n.destroy()})}}),al=function(t){function e(t,e,n){this.el=t,this.name=e.name,this.arg=n;var r=Cc(nl(this)).create(e.value);r&&(this.expression=tl(r)),this.active||(this.active=!e.value||this.expression)}function n(t,n,r){return new e(t,n,r)}return e.prototype=Os({},ol,t),n.prototype=e.prototype,n},ul=function(t){if(u(t))try{return JSON.parse(t)}catch(e){return t}return t},sl=xt("message","component-created","component-mount","component-mounted"),cl=Os({},Lc,{render:function(){},childrenMounted:function(){},mounted:function(){},destroy:function(){},mount:function(t,e,n){var r=this;if(!Jt(this)){sl.call("component-mount",void 0,this,t,e);var i=this.select(t),o=i.directives(),a=o?o.attrs:te(t),s=this.model,l=void 0,f=void 0,h=void 0;e=Os({},i.datum(),e);for(l in s)void 0!==(h=void 0===e[l]?a:e)[l]&&(s[l]=ul(Ls(h,l)));this.model=s=this.parent.model.$child(s),c(this.props)&&this.props.forEach(function(t){void 0!==(f=ul(void 0===e[t]?a[t]:e[t]))&&(u(f)&&s[f]&&(f=s[f]),e[t]=f)}),s.name||(s.name=this.name);var d=this.render(e,a,t);return d.then||(d=$c(d)),d.then(function(e){return Qt(r,t,e,n)})}Ys("already mounted")}}),ll=["name","class","disabled","readonly","required","href"],fl=function(t,e){var n=Ac(t),r=n.directives();if(r)return r;if(r=new ee,!e)return r;for(var i=0;i<t.attributes.length;++i){var o=t.attributes[i],a=o.name.split("-"),u="d3"===a[0]?a[1]:null,s=void 0;if(u){!(s=a.slice(2).join("-"))&&ll.indexOf(u)>-1&&(s=u,u="attr");var c=e.get(u);c?r.add(c(t,o,s)):Ys(t.tagName+' cannot find directive "'+u+'". Did you forget to register it?')}r.attrs[o.name]=o.value}return r.size()&&n.directives(r),r};ee.prototype={size:function(){return this.all.length},pop:function(t){var e=this.all.indexOf(t);return e>-1&&(t.removeAttribute(),this.all.splice(e,1)),t},add:function(t){this.all.push(t)},forEach:function(t){this.all.forEach(t)},preMount:function(){for(var t=void 0,e=0;e<this.all.length;++e)if((t=this.all[e]).preMount())return this.pop(t)},execute:function(t){if(this.size())return Promise.all(this.all.map(function(e){return e.execute(t)}))}},yt.prototype.mount=function(t,e){var n=[];return this.each(function(){var r=Ac(this).view();r?n.push(ne(this,r,t,e)):Ys("Cannot mount, no view object available to mount to")}),Promise.all(n)},yt.prototype.view=function(t){if(arguments.length)return this.property("__d3_view__",t);for(var e=this.node(),n=e.__d3_view__,r=e.parentNode;r&&!n;)n=r.__d3_view__,r=r.parentNode;return n},yt.prototype.model=function(){var t=this.view();return t?t.model:null},yt.prototype.directives=function(t){return arguments.length?this.property("__d3_directives__",t):this.node().__d3_directives__};var hl=Os({},cl,{use:function(t){return a(t)?t.install(this):t(this),this},addComponent:function(t,e){var n=Wt(t,e,cl);return this.components.set(t,n),n},addDirective:function(t,e){var n=al(e);return this.directives.set(t,n),n},mount:function(t,e){if(Jt(this))Ys("already mounted");else if(sl.call("component-mount",void 0,this,t),t=re(t))return this.model=this.parent?this.parent.model.$child(this.model):Ht(this.model),Zt(this,t,e)}}),dl=Wt("forView",null,hl),pl={attr:Hs,html:Ws,value:zc,on:{mount:function(t){var e=this.arg||"click",n=this.expression;this.on(this.sel,e+"."+this.uid,function(e){var r=t.$child();r.$event=e,n.eval(r)}),this.bindDestroy(t)},destroy:function(){var t=this.arg||"click";this.on(this.sel,t+"."+this.uid,null)}},for:{create:function(t){var e=[];return t.trim().split(" ").forEach(function(t){t&&e.push(t)}),3!==e.length||"in"!=e[1]?Ys('d3-for directive requires "item in expression" template, got "'+t+'"'):(this.itemName=e[0],this.itemClass="for"+this.uid,e[2])},preMount:function(){return!0},mount:function(t){if(this.creator=this.el,this.el=this.creator.parentNode,Ac(this.creator).remove(),this.el)return t},refresh:function(t,e){if(c(e)){var n=this.creator,r=n.tagName+"."+this.itemClass,i=this.itemName,o=this.sel,a=o.selectAll(r).data(e),u=o.view(),s=void 0;a.exit().remove(),a.enter().append(function(){return n.cloneNode(!0)}).classed(this.itemClass,!0).each(function(t,n){(s={index:n})[i]=t,dl({model:s,parent:u}).mount(this,function(t){e[n]=t.model[i]})}).merge(a).each(function(t){this.__d3_view__.model[i]=t})}}},if:{mount:function(t){return this.display=this.sel.style("display"),this.display&&"none"!==this.display||(this.display="block"),t},refresh:function(t,e){e?this.sel.style("display",this.display):this.sel.style("display","none")}}};$s&&new MutationObserver(function(t){t.forEach(function(t){var e=t.removedNodes,n=void 0;e&&e.length&&e.forEach(function(t){"#text"!==t.nodeName&&(n=Ac(t)).view()&&(n.selectAll("*").each(ie),ie.call(t))})})}).observe(document.documentElement,{childList:!0,subtree:!0});var vl=Wt("view",null,hl,Gt(r(),pl)),gl={logger:js},ml=function(t){gl.logger.warn("[d3-form] "+t)},yl={inputData:function(t,e){var n=this.model;return e||(e={}),e.id=e.id||n.uid,n.data=e,t.attr("id",e.id),e.classes&&t.classed(e.classes,!0),ue(t,n,e.attributes),e.disabled&&(u(e.disabled)?t.attr("d3-attr-disabled",e.disabled):t.property("disabled",!0)),e},wrap:function(t){var e=this,n=t;return e.model.$formExtensions.forEach(function(r){n=r(e,n,t)||n}),n},wrapTemplate:function(t,e){var n=document.createElement("div"),r=Ac(n).html(e).select("slot");if(!r.size())return ml("template does not provide a slot element"),t;var i=Ac(r.node().parentNode);return t.nodes().forEach(function(t){i.insert(function(){return t},"slot")}),r.remove(),Tc(n.children)}},bl=Os({},yl,{model:{value:null,error:"",isDirty:null,changed:!1,srOnly:!1,placeholder:"",showError:{reactOn:["error","isDirty"],get:function(){return!!this.error&&this.isDirty}},$validate:function(){}},inputData:function(t,e){if(!(e=yl.inputData.call(this,t,e)).name)return ml("Input field without a name");t.attr("name",e.name),e.placeholder=e.placeholder||e.label||e.name;var n=this.model;return n.form.inputs[e.name]=n,n.name=e.name,n.$on("value",function(){null===n.isDirty?n.isDirty=!1:(n.isDirty=!0,n.changed=!0),n.form.$change()}),e}}),_l={text:"input",email:"input",password:"input",checkbox:"input",number:"input",date:"input",url:"input","datetime-local":"input"},xl=Os({},yl,{render:function(t){var e=t?t.tag||"fieldset":"fieldset",n=this.createElement(e);return t=this.inputData(n,t),ce.call(this,n)}}),wl={get:function(t){var e=this.all.slice(0);if(a(t))for(var n in t)e.push(he(n,t[n]));return e},set:function(t,e){var n=t.model;n._view=t,n.validators.forEach(function(t){return t.set(e,n.data)}),n.$on("value.validate",this.validate),n.$validate=this.validate},validate:function(){for(var t,e,n=this,r=n._view,i=n.validators,o=n.value,a=r.sel.attr("id")===n.data.id?r.sel:r.sel.select("#"+n.data.id),u=0;u<i.length;++u)if(t=i[u],e=t.validate(a,o)){!0===e&&(e="");break}n.error=e||""},all:[{set:function(t,e){var n=e.required;u(n)?t.attr("d3-required",n):t.property("required",n||null)},validate:function(t,e){if(t.property("required")){if(!e)return"required";if(""===e)return!0}}},{set:function(t,e){var n=e.minLength;u(n)?t.attr("d3-attr-minlength",n):void 0!==n&&t.attr("minlength",n)},validate:function(t,e){var n=+t.attr("minlength");if(n==n&&n>0&&e.length<n)return"too short - "+n+" characters or more expected"}},{set:function(t,e){var n=e.maxLength;u(n)?t.attr("d3-attr-maxlength",n):void 0!==n&&t.attr("maxlength",n)},validate:function(t,e){var n=+t.attr("maxlength");if(n==n&&n>0&&e&&e.length>n)return"too long - "+n+" characters or less expected"}},{set:function(t,e){var n=e.minimum;u(n)?t.attr("d3-attr-min",n):void 0!==n&&t.attr("min",n)},validate:function(t,e){var n=fe(t);if(n&&+e<n[0])return"must be greater or equal "+n[0]}},{set:function(t,e){var n=e.maximum;u(n)?t.attr("d3-attr-max",n):void 0!==n&&t.attr("max",n)},validate:function(t,e){var n=fe(t);if(n&&+e>n[1])return"must be less or equal "+n[1]}}]},Ml=["checkbox","radio"],El=Os({},bl,{render:function(t){var e=this.createElement("input");return t=this.inputData(e,t),e.attr("type",t.type||"text").attr("d3-value","value"),-1===Ml.indexOf(e.attr("type"))&&e.attr("placeholder",t.placeholder),wl.set(this,e),this.wrap(e)}}),kl=Os({},bl,{render:function(t){var e=this.createElement("textarea");return t=this.inputData(e,t),e.attr("placeholder",t.placeholder).attr("d3-value","value"),wl.set(this,e),this.wrap(e)}}),Al=Os({},bl,{model:Os({options:[],$optionLabel:function(){return c(this.option)?this.option[1]||this.option[0]:this.option},$optionValue:function(){return c(this.option)?this.option[0]:this.option}},bl.model),render:function(t){var e=this.createElement("select");return t=this.inputData(e,t),e.attr("d3-value","value").attr("placeholder",t.placeholder).append("option").attr("d3-for","option in options").attr("d3-html","$optionLabel()").attr("d3-attr-value","$optionValue()"),wl.set(this,e),this.wrap(e)}}),Tl=Os({},yl,{render:function(t){var e=t?t.tag||"button":"button",n=this.createElement(e);t=this.inputData(n,t);var r=this.model;return r.type=t.type||"submit",t.endpoint&&(r.endpoint=t.endpoint),r.$submit=function(){r.actions.submit.call(r,vc)},u(t.disabled)||(this.model.$set("disabled",t.disabled||null),t.disabled="disabled"),t.submit||(t.submit="$submit()"),n.attr("type",r.type).attr("name",r.name).attr("d3-attr-disabled",t.disabled).attr("d3-on-click",t.submit).html(t.label||"submit"),this.wrap(n)}}),Cl={default:function(t){this.message(t)},redirect:function(t){window.location.href=t.redirectTo||"/"}},Sl={submit:function(t){var e=this,n=e.form,r=Os({},Nl,e.endpoint);t&&(t.preventDefault(),t.stopPropagation());var i=gl.fetch,o=n.$inputData(),a={};if(i)if(r.url){if("application/json"===r.contentType)a.headers={"Content-Type":r.contentType},a.body=JSON.stringify(o);else{a.body=new FormData;for(var u in o)a.body.set(u,o[u])}n.$setSubmit()?(a.method=r.method,i(r.url,a).then(function(t){n.$setSubmitDone();var e=(t.headers.get("content-type")||"").split(";")[0];"application/json"===e?t.json().then(function(e){n.$response(e,t.status,t.headers)}):ml("Cannot load content type '"+e+"'")},function(){n.$setSubmitDone()})):n.$setSubmitDone()}else ml("No url, cannot submit");else ml("fetch provider not available, cannot submit")}},Nl={contentType:"application/json",method:"post"},Pl={props:["schema"],components:{"d3-form-fieldset":xl,"d3-form-input":El,"d3-form-textarea":kl,"d3-form-select":Al,"d3-form-submit":Tl},model:{formSubmitted:!1,formPending:!1,$isValid:function(t){var e=void 0,n=!0;for(var r in this.inputs)e=this.inputs[r],t&&(e.isDirty=!0),e.$validate(),e.error&&(n=!1);return n},$setSubmit:function(){return this.formSubmitted=!0,this.formPending=!0,this.$isValid(!0)},$setSubmitDone:function(){this.formPending=!1},$inputData:function(){var t,e=this.inputs,n={};for(var r in e)((t=e[r].value)||El.changed)&&(n[r]=t);return n},$response:function(t,e,n){if(e<300)if(this.data.resultHandler){var r=Cl[this.data.resultHandler];r?r.call(this,t,e,n):ml("Could not find "+this.data.resultHandler+" result handler")}else Cl.default.call(this,t,e,n);else this.$responseError(t,e,n)},$responseError:function(t){t.level="error",this.$message(t)}},render:function(t){function e(t){t=yl.inputData.call(i,r,t),n.validators=wl.get(t.validators);for(var e in Sl){var o=t[e];u(o)&&(o=i.model.$get(o)),n.actions[e]=o||Sl[e]}return ce.call(i,r),r}var n=this.model,r=this.createElement("form").attr("novalidate",""),i=this;n.$formExtensions=this.root.$formExtensions||[],n.inputs={},n.actions={},n.form=n;var o=t.schema;return u(o)?(0,gl.fetch)(o,{method:"GET"}).then(function(t){if(200===t.status)return t.json().then(e);ml("Could not load form from "+o+": status "+t.status)}):e(o)}},Ol={install:function(t){t.addComponent("d3form",Pl),t.$formExtensions=[];for(var e in t.providers)gl[e]=t.providers[e]},actions:Sl,responses:Cl},zl={input:["inputGroup","label","formGroup"],checkbox:["formCheck"],textarea:["label","formGroup"],select:["label","formGroup"],submit:["submit"],wrappers:{label:function(t,e){var n=t.model.data;return t.wrapTemplate(e,de(n))},formGroup:function(t,e,n){var r=t.model.data,i=void 0!==r.size?r.size:t.model.form.data.size,o=i?"form-control form-control-"+i:"form-control";return n.classed(o,!0).attr("d3-class","["+(r.required||!1)+' ? "form-control-required" : null, showError ? "form-control-danger" : null]'),t.wrapTemplate(e,'<div class="form-group" d3-class=\'showError ? "has-danger" : null\'>\n<slot></slot>\n<p d3-if="showError" class="text-danger error-block" d3-html="error"></p>\n</div>')},inputGroup:function(t,e,n){var r=t.model.data.group;if(!r)return e;var i="g"+n.attr("id");return n.attr("aria-describedby",i),t.wrapTemplate(e,pe(i,r))},formCheck:function(t,e,n){var r=t.model.data;return n.classed("form-check-input",!0),t.wrapTemplate(e,ve(r.label))},submit:function(t,e,n){var r=t.model.data.theme||"primary";return n.classed("btn",!0).classed("btn-"+r,!0),t.wrapTemplate(e,'<div class="form-group">\n<slot></slot>\n</div>')}}},Dl={install:function(t){if(!t.$formExtensions)return ml("form bootstrap requires the form plugin installed first!");t.$formExtensions.push(ge)}},$l=[],jl=$l.map,Ll=$l.some,Il=$l.hasOwnProperty;me(function(t){if(!t.length||/^[\s._]/.test(t)||/\s$/.test(t))throw new Error("illegal name");return"https://unpkg.com/"+t});xe.amd={};var Rl=new RegExp("^([a-z]+://|//)"),Fl=me(function(t){var e=Fl.libs.get(t)||t;return we(e)?e:"https://unpkg.com/"+t});Fl.libs=r();var Ul=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN},Xl=function(t){return 1===t.length&&(t=Me(t)),{left:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)<0?r=o+1:i=o}return r},right:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)>0?i=o:r=o+1}return r}}},Yl=Xl(Ul).right,ql=function(t){return null===t?NaN:+t},Hl=function(t,e){var n,r,i=t.length,o=0,a=-1,u=0,s=0;if(null==e)for(;++a<i;)isNaN(n=ql(t[a]))||(s+=(r=n-u)*(n-(u+=r/++o)));else for(;++a<i;)isNaN(n=ql(e(t[a],a,t)))||(s+=(r=n-u)*(n-(u+=r/++o)));if(o>1)return s/(o-1)},Bl=function(t,e){var n,r,i,o=t.length,a=-1;if(null==e){for(;++a<o;)if(null!=(n=t[a])&&n>=n)for(r=i=n;++a<o;)null!=(n=t[a])&&(r>n&&(r=n),i<n&&(i=n))}else for(;++a<o;)if(null!=(n=e(t[a],a,t))&&n>=n)for(r=i=n;++a<o;)null!=(n=e(t[a],a,t))&&(r>n&&(r=n),i<n&&(i=n));return[r,i]},Wl=function(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((e-t)/n)),o=new Array(i);++r<i;)o[r]=t+r*n;return o},Vl=Math.sqrt(50),Gl=Math.sqrt(10),Zl=Math.sqrt(2),Jl=function(t,e,n){var r,i,o,a,u=-1;if(e=+e,t=+t,n=+n,t===e&&n>0)return[t];if((r=e<t)&&(i=t,t=e,e=i),0===(a=Ee(t,e,n))||!isFinite(a))return[];if(a>0)for(t=Math.ceil(t/a),e=Math.floor(e/a),o=new Array(i=Math.ceil(e-t+1));++u<i;)o[u]=(t+u)*a;else for(t=Math.floor(t*a),e=Math.ceil(e*a),o=new Array(i=Math.ceil(t-e+1));++u<i;)o[u]=(t-u)/a;return r&&o.reverse(),o},Kl=function(t,e,n){if(null==n&&(n=ql),r=t.length){if((e=+e)<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,o=Math.floor(i),a=+n(t[o],o,t);return a+(+n(t[o+1],o+1,t)-a)*(i-o)}},Ql=function(t,e){var n,r,i=t.length,o=-1;if(null==e){for(;++o<i;)if(null!=(n=t[o])&&n>=n)for(r=n;++o<i;)null!=(n=t[o])&&n>r&&(r=n)}else for(;++o<i;)if(null!=(n=e(t[o],o,t))&&n>=n)for(r=n;++o<i;)null!=(n=e(t[o],o,t))&&n>r&&(r=n);return r},tf=function(t,e){var n,r=t.length,i=-1,o=0;if(null==e)for(;++i<r;)(n=+t[i])&&(o+=n);else for(;++i<r;)(n=+e(t[i],i,t))&&(o+=n);return o},ef="[d3-view-debug]",nf=function(t){rf.logger.debug&&rf.logger.debug(t)};js.debug=null;var rf={logger:js,fetch:function(){if($s)return window.fetch}(),readyCallbacks:[],setDebug:function(t){!arguments.length||t?this.logger.debug=s(t)?t:Ae:this.logger.debug=null}},of=function(t){rf.logger.warn("[d3-view] "+t)},af=["disabled","readonly","required"],uf={create:function(t){return this.arg?t:of("Cannot bind to empty attribute. Specify :<attr-name>")},refresh:function(t,e){return"class"===this.arg?this.refreshClass(e):c(e)?of("Cannot apply array to attribute "+this.arg):void(af.indexOf(this.arg)>-1?this.sel.property(this.arg,e||!1):this.sel.attr(this.arg,e||null))},refreshClass:function(t){var e=this.sel;c(t)||(t=[t]),this.oldValue&&this.oldValue.forEach(function(t){t&&e.classed(t,!1)}),this.oldValue=t.map(function(t){var n=!0;return c(t)&&(n=t[1],t=t[0]),t&&e.classed(t,n),t})}},sf=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Array.prototype.slice.call(t,e)},cf={refresh:function(t,e){if(f(e)&&(e=""+e),u(e)){this.sel.html(e);for(var n=sf(this.el.children),r=0;r<n.length;++r)this.select(n[r]).mount()}}},lf=function(t,e){var n=null;return function(){if(null!==n)return n;var r=this,i=arguments;return n=new Promise(function(o,a){ic(function(){n=null;try{o(t?t.apply(r,i):void 0)}catch(t){a(t)}},e)})}},ff=function(t){return Object.defineProperty(t,"sel",{get:function(){return Ac(this.el)}}),t},hf={on:function(t,e){var n=Ce(this,t,e);this.sel.on("input",n).on("change",n)},off:function(){this.sel.on("input",null).on("change",null)},value:function(t){if(!arguments.length)return this.sel.property("value");this.sel.property("value",t)}},df=Te(),pf=Te({value:function(t){if(!arguments.length)return this.sel.property("checked");this.sel.property("checked",t)}}),vf={input:df,textarea:df,select:Te({value:function(t){var e,n=this.sel,r=n.selectAll("option"),i=t;if(!arguments.length)return i=[],r.each(function(){(e=Ac(this)).property("selected")&&i.push(e.attr("value")||"")}),n.property("multiple")?i:i[0]||"";c(i)||(i=[t||""]),r.each(function(){e=Ac(this),t=e.attr("value")||"",e.property("selected",i.indexOf(t)>-1)})}}),checkbox:pf},gf={create:function(t){var e=this.sel.attr("type"),n=this.el.tagName.toLowerCase(),r=vf[e]||vf[n];return r?(this.tag=new r(this.el),t):of("Cannot apply d3-value directive to "+n)},mount:function(t){var e=this.expression;if(e.parsed.type!==e.codes.IDENTIFIER)return of('d3-value expression support identifiers only, got "'+e.parsed.type+'": '+this.expression);var n=this.expression.expr;return t.$set(n,this.tag.value()),this.tag.on(t,n),t},refresh:function(t,e){this.tag.value(e)},destroy:function(){this.tag.off()}};Oe.prototype=Error.prototype;var mf=function(t){return new Promise(function(e){e(t)})},yf=function(t){return t&&!s(t.size)?Ac(t):t},bf={isd3:!0,providers:rf,viewElement:Pe,select:function(t){return Ac(t)},selectAll:function(t){return Tc(t)},createElement:function(t){return Ac(document.createElement(t))},fetch:function(t,e){var n=rf.fetch;return 1==arguments.length?n(t):n(t,e)},fetchText:function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return this.fetch.apply(this,[t].concat(n)).then(function(t){return t.text()})},json:function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return this.fetch.apply(this,[t].concat(n)).then(ze)},renderFromUrl:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=this.cache;return t in r?mf(n?Pe(r[t]):r[t]):this.fetchText(t).then(function(i){return r[t]=i,n?Pe(i,e):Ne(i,e)})},on:function(t,e,n){if(t=yf(t),null===n)return t.on(e,null);t.on(e,function(){return n(vc)})}},_f={COMPOUND:"Compound",IDENTIFIER:"Identifier",MEMBER_EXP:"MemberExpression",LITERAL:"Literal",THIS_EXP:"ThisExpression",CALL_EXP:"CallExpression",UNARY_EXP:"UnaryExpression",BINARY_EXP:"BinaryExpression",LOGICAL_EXP:"LogicalExpression",CONDITIONAL_EXP:"ConditionalExpression",ARRAY_EXP:"ArrayExpression"},xf=function(t,e){var n=new Error(t+" at character "+e);throw n.index=e,n.description=t,n},wf={"-":!0,"!":!0,"~":!0,"+":!0},Mf={"||":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":10,"/":10,"%":10},Ef=function(t){var e,n=0;for(var r in t)(e=r.length)>n&&t.hasOwnProperty(r)&&(n=e);return n},kf=Ef(wf),Af=Ef(Mf),Tf={true:!0,false:!1,null:null},Cf=function(t){return Mf[t]||0},Sf=function(t,e,n){return{type:"||"===t||"&&"===t?_f.LOGICAL_EXP:_f.BINARY_EXP,operator:t,left:e,right:n}},Nf=function(t){return t>=48&&t<=57},Pf=function(t){return 36===t||95===t||t>=65&&t<=90||t>=97&&t<=122||t>=128&&!Mf[String.fromCharCode(t)]},Of=function(t){return 36===t||95===t||t>=65&&t<=90||t>=97&&t<=122||t>=48&&t<=57||t>=128&&!Mf[String.fromCharCode(t)]},zf=function(t){for(var e,n,r=0,i=t.charAt,o=t.charCodeAt,a=function(e){return i.call(t,e)},u=function(e){return o.call(t,e)},s=t.length,c=function(){for(var t=u(r);32===t||9===t;)t=u(++r)},l=function t(){var e,n,i=h();return c(),63!==u(r)?i:(r++,(e=t())||xf("Expected expression",r),c(),58===u(r)?(r++,(n=t())||xf("Expected expression",r),{type:_f.CONDITIONAL_EXP,test:i,consequent:e,alternate:n}):void xf("Expected :",r))},f=function(){c();for(var e=t.substr(r,Af),n=e.length;n>0;){if(Mf.hasOwnProperty(e))return r+=n,e;e=e.substr(0,--n)}return!1},h=function(){var t,e,n,i,o,a,u,s;if(a=d(),!(e=f()))return a;for(o={value:e,prec:Cf(e)},(u=d())||xf("Expected expression after "+e,r),i=[a,o,u];(e=f())&&0!==(n=Cf(e));){for(o={value:e,prec:n};i.length>2&&n<=i[i.length-2].prec;)u=i.pop(),e=i.pop().value,a=i.pop(),t=Sf(e,a,u),i.push(t);(t=d())||xf("Expected expression after "+e,r),i.push(o,t)}for(t=i[s=i.length-1];s>1;)t=Sf(i[s-1].value,i[s-2],t),s-=2;return t},d=function e(){var n,i,o;if(c(),n=u(r),Nf(n)||46===n)return p();if(39===n||34===n)return v();if(Pf(n)||40===n)return y();if(91===n)return _();for(o=(i=t.substr(r,kf)).length;o>0;){if(wf.hasOwnProperty(i))return r+=o,{type:_f.UNARY_EXP,operator:i,argument:e(),prefix:!0};i=i.substr(0,--o)}return!1},p=function(){for(var t,e,n="";Nf(u(r));)n+=a(r++);if(46===u(r))for(n+=a(r++);Nf(u(r));)n+=a(r++);if("e"===(t=a(r))||"E"===t){for(n+=a(r++),"+"!==(t=a(r))&&"-"!==t||(n+=a(r++));Nf(u(r));)n+=a(r++);Nf(u(r-1))||xf("Expected exponent ("+n+a(r)+")",r)}return e=u(r),Pf(e)?xf("Variable names cannot start with a number ("+n+a(r)+")",r):46===e&&xf("Unexpected period",r),{type:_f.LITERAL,value:parseFloat(n),raw:n}},v=function(){for(var t,e="",n=a(r++),i=!1;r<s;){if((t=a(r++))===n){i=!0;break}if("\\"===t)switch(t=a(r++)){case"n":e+="\n";break;case"r":e+="\r";break;case"t":e+="\t";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:e+="\\"+t}else e+=t}return i||xf('Unclosed quote after "'+e+'"',r),{type:_f.LITERAL,value:e,raw:n+e+n}},g=function(){var e,n=u(r),i=r;for(Pf(n)?r++:xf("Unexpected "+a(r),r);r<s&&(n=u(r),Of(n));)r++;return e=t.slice(i,r),Tf.hasOwnProperty(e)?{type:_f.LITERAL,value:Tf[e],raw:e}:"this"===e?{type:_f.THIS_EXP}:{type:_f.IDENTIFIER,name:e}},m=function(t){for(var e,n,i=[],o=!1;r<s;){if(c(),(e=u(r))===t){o=!0,r++;break}44===e?r++:((n=l())&&n.type!==_f.COMPOUND||xf("Expected comma",r),i.push(n))}return o||xf("Expected "+String.fromCharCode(t),r),i},y=function(){var t,e;for(e=40===(t=u(r))?b():g(),c(),t=u(r);46===t||91===t||40===t;)r++,46===t?(c(),e={type:_f.MEMBER_EXP,computed:!1,object:e,property:g()}):91===t?(e={type:_f.MEMBER_EXP,computed:!0,object:e,property:l()},c(),93!==(t=u(r))&&xf("Unclosed [",r),r++):40===t&&(e={type:_f.CALL_EXP,arguments:m(41),callee:e}),c(),t=u(r);return e},b=function(){r++;var t=l();if(c(),41===u(r))return r++,t;xf("Unclosed (",r)},_=function(){return r++,{type:_f.ARRAY_EXP,elements:m(93)}},x=[];r<s;)59===(e=u(r))||44===e?r++:(n=l())?x.push(n):r<s&&xf('Unexpected "'+a(r)+'"',r);return 1===x.length?x[0]:{type:_f.COMPOUND,body:x}};zf.addUnaryOp=function(t){return kf=Math.max(t.length,kf),wf[t]=!0,this},zf.addBinaryOp=function(t,e){return Af=Math.max(t.length,Af),Mf[t]=e,this},zf.addLiteral=function(t,e){return Tf[t]=e,this},zf.removeUnaryOp=function(t){return delete wf[t],t.length===kf&&(kf=Ef(wf)),this},zf.removeBinaryOp=function(t){return delete Mf[t],t.length===Af&&(Af=Ef(Mf)),this},zf.removeLiteral=function(t){return delete Tf[t],this};var Df={},$f={};Fe.prototype={eval:function(t){return De(t,this.parsed)},safeEval:function(t){try{return De(t,this.parsed)}catch(t){of("Could not evaluate <<"+this.expr+">> expression: "+t)}},identifiers:function(){return $e(this.parsed).values()}};var jf=function(t){return new Fe(t)},Lf=0,If=function(t){var e="d3v"+ ++Lf;return arguments.length?(Object.defineProperty(t,"uid",{get:function(){return e}}),t):e},Rf=function(){var t=xt("change"),e=0;return{on:function(e,n){return arguments.length<2?t.on(e):(t.on(e,n),this)},trigger:lf(function(){t.apply("change",this,arguments),e+=1}),triggered:function(){return e}}},Ff=function(t){return t&&t.constructor===Object};Ve.prototype=We.prototype,We.prototype.toString=function(){return"[object d3Model]"},We.prototype.$on=function(t,e){1===arguments.length&&s(t)&&(e=t,t="");var n=t.split("."),r=n[0],i=He(this,r);return i?(this.$events.get(r)||n.push(this.uid),n[0]="change",i.on(n.join("."),e)):of('Cannot bind to "'+r+'" - no such reactive property')},We.prototype.$change=function(t){var e=arguments.length?t:"",n=this.$events.get(e),r=sf(arguments,1);return n?n.trigger.apply(this,r):of("attribute '"+e+"' is not a reactive property this model"),this},We.prototype.$update=function(t,e){if(t){e=2!==arguments.length||e;for(var n in t)(e||void 0===this[n])&&("$"===n.substring(0,1)?this.constructor.prototype[n]?of("Cannot set attribute method "+n+", it is protected"):this[n]=t[n]:this.$set(n,t[n]))}return this},We.prototype.$set=function(t,e){this.$events.get(t)?this[t]=e:qe(this,t,e)},We.prototype.$new=function(t){var e=this,n=Ve(t);return Object.defineProperties(n,{parent:{get:function(){return e}},isolated:{get:function(){return!0}}}),n},We.prototype.$off=function(t){if(void 0===t)this.$events.each(function(t){return Be(t)});else{var e=t.split("."),n=e.splice(0,1)[0],r=this.$events.get(n);r&&Be(r,e.join("."))}},We.prototype.$isReactive=function(t){return!!this.$events.has(t)||!(!this.parent||this.isolated)&&this.parent.$isReactive(t)},Object.defineProperty(We.prototype,"root",{get:function(){return this.parent?this.parent.root:this}});var Uf=Os({},bf,{priority:1,create:function(t){return t},preMount:function(){},mount:function(t){return t},refresh:function(){},destroy:function(){},removeAttribute:function(){this.el.removeAttribute(this.name)},execute:function(t){this.active&&(this.removeAttribute(),this.identifiers=[],(t=this.mount(t))&&this.bindModel(t))},bindModel:function(t){var e=this,n=function(){var n=e.expression?e.expression.eval(t):void 0;e.refresh(t,n)},i=void 0,o=void 0,u=void 0,s=void 0;if(this.expression){var c=r();this.expression.identifiers().forEach(function(n){for(i=n.split("."),o=t,u=null,s=0;s<i.length-1;++s)if(o=o[i[s]],!a(o)){u=i.slice(0,s+1).join("."),of("Property "+u+" is not an object. Directive "+e.name+" cannot bind to "+n);break}if(null===u){if(!(o instanceof Ve))return of(n+" is not a reactive model. Directive "+e.name+" cannot bind to it");Ge(c,o,i[i.length-1])}}),c.each(function(t){t.events.has("")?e.identifiers.push({model:t.model,attr:""}):t.events.each(function(n){e.identifiers.push({model:t.model,attr:n})})})}else e.identifiers.push({model:t,attr:""});this.identifiers.forEach(function(t){var r=t.attr+"."+e.uid;t.model.$on(r,n)}),this.bindDestroy(t),n()},bindDestroy:function(t){var e=this,n=this,r=this.destroy;n.destroy=function(){return r.call(n,t)},this.sel.on("remove."+n.uid,function(){e.identifiers.forEach(function(t){t.model.$off(t.attr+"."+n.uid)}),n.destroy()})}}),Xf=function(t){function e(t,e,n){this.el=t,this.name=e.name,this.arg=n;var r=ff(If(this)).create(e.value);r&&(this.expression=jf(r)),this.active||(this.active=!e.value||this.expression)}function n(t,n,r){return new e(t,n,r)}return e.prototype=Os({},Uf,t),n.prototype=e.prototype,n},Yf=function(t){if(u(t))try{return JSON.parse(t)}catch(e){return t}return t},qf=xt("message","component-created","component-mount","component-mounted"),Hf=Os({},bf,{render:function(){},childrenMounted:function(){},mounted:function(){},destroy:function(){},mount:function(t,e,n){var r=this;if(!tn(this)){qf.call("component-mount",void 0,this,t,e);var i=this.select(t),o=i.directives(),a=o?o.attrs:rn(t),s=this.model,l=void 0,f=void 0,h=void 0;e=Os({},i.datum(),e);for(l in s)void 0!==(h=void 0===e[l]?a:e)[l]&&(s[l]=Yf(Ls(h,l)));this.model=s=this.parent.model.$child(s),c(this.props)&&this.props.forEach(function(t){void 0!==(f=Yf(void 0===e[t]?a[t]:e[t]))&&(u(f)&&s[f]&&(f=s[f]),e[t]=f)}),s.name||(s.name=this.name);var d=this.render(e,a,t);return d.then||(d=mf(d)),d.then(function(e){return nn(r,t,e,n)})}of("already mounted")},mountInner:function(t,e){var n=t.node();if(t.html(e),n.childNodes.length){var r=sf(n.childNodes),i=t.view(this).selectAll(function(){return r}).mount();return i?i.then(function(){return t}):t}return t}}),Bf=["name","class","disabled","readonly","required","href"],Wf=function(t,e){var n=Ac(t),r=n.directives();if(r)return r;if(r=new on,!e)return r;for(var i=0;i<t.attributes.length;++i){var o=t.attributes[i],a=o.name.split("-"),u="d3"===a[0]?a[1]:null,s=void 0;if(u){!(s=a.slice(2).join("-"))&&Bf.indexOf(u)>-1&&(s=u,u="attr");var c=e.get(u);c?r.add(c(t,o,s)):of(t.tagName+' cannot find directive "'+u+'". Did you forget to register it?')}r.attrs[o.name]=o.value}return r.size()&&n.directives(r),r};on.prototype={size:function(){return this.all.length},pop:function(t){var e=this.all.indexOf(t);return e>-1&&(t.removeAttribute(),this.all.splice(e,1)),t},add:function(t){this.all.push(t)},forEach:function(t){this.all.forEach(t)},preMount:function(){for(var t=void 0,e=0;e<this.all.length;++e)if((t=this.all[e]).preMount())return this.pop(t)},execute:function(t){if(this.size())return Promise.all(this.all.map(function(e){return e.execute(t)}))}},yt.prototype.mount=function(t,e){var n=[];return this.each(function(){var r=Ac(this).view();r?n.push(an(this,r,t,e)):of("Cannot mount, no view object available to mount to")}),Promise.all(n)},yt.prototype.view=function(t){if(arguments.length)return this.property("__d3_view__",t);for(var e=this.node(),n=e.__d3_view__,r=e.parentNode;r&&!n;)n=r.__d3_view__,r=r.parentNode;return n},yt.prototype.model=function(){var t=this.view();return t?t.model:null},yt.prototype.directives=function(t){return arguments.length?this.property("__d3_directives__",t):this.node().__d3_directives__};var Vf=Os({},Hf,{use:function(t){return a(t)?t.install(this):t(this),this},addComponent:function(t,e){var n=Ze(t,e,Hf);return this.components.set(t,n),n},addDirective:function(t,e){var n=Xf(e);return this.directives.set(t,n),n},mount:function(t,e){if(tn(this))of("already mounted");else if(qf.call("component-mount",void 0,this,t),t=un(t))return this.model=this.parent?this.parent.model.$child(this.model):Ve(this.model),Qe(this,t,e)}}),Gf=Ze("forView",null,Vf),Zf={attr:uf,html:cf,value:gf,on:{mount:function(t){var e=this.arg||"click",n=this.expression;this.on(this.sel,e+"."+this.uid,function(e){var r=t.$child();r.$event=e,n.eval(r)}),this.bindDestroy(t)},destroy:function(){var t=this.arg||"click";this.on(this.sel,t+"."+this.uid,null)}},for:{create:function(t){var e=[];return t.trim().split(" ").forEach(function(t){t&&e.push(t)}),3!==e.length||"in"!=e[1]?of('d3-for directive requires "item in expression" template, got "'+t+'"'):(this.itemName=e[0],this.itemClass="for"+this.uid,e[2])},preMount:function(){return!0},mount:function(t){if(this.creator=this.el,this.el=this.creator.parentNode,Ac(this.creator).remove(),this.el)return t},refresh:function(t,e){if(c(e)){var n=this.creator,r=n.tagName+"."+this.itemClass,i=this.itemName,o=this.sel,a=o.selectAll(r).data(e),u=o.view(),s=void 0;a.exit().remove(),a.enter().append(function(){return n.cloneNode(!0)}).classed(this.itemClass,!0).each(function(t,n){(s={index:n})[i]=t,Gf({model:s,parent:u}).mount(this,function(t){e[n]=t.model[i]})}).merge(a).each(function(t){this.__d3_view__.model[i]=t})}}},if:{mount:function(t){return this.display=this.sel.style("display"),this.display&&"none"!==this.display||(this.display="block"),t},refresh:function(t,e){e?this.sel.style("display",this.display):this.sel.style("display","none")}}};$s&&new MutationObserver(function(t){t.forEach(function(t){var e=t.removedNodes,n=void 0;e&&e.length&&e.forEach(function(t){"#text"!==t.nodeName&&(n=Ac(t)).view()&&(n.selectAll("*").each(sn),sn.call(t))})})}).observe(document.documentElement,{childList:!0,subtree:!0}),Ze("view",null,Vf,Ke(r(),Zf));var Jf={logger:js},Kf=function(t){Jf.logger.warn("[d3-form] "+t)},Qf={inputData:function(t,e){var n=this.model;return e||(e={}),e.id=e.id||n.uid,n.data=e,t.attr("id",e.id),e.classes&&t.classed(e.classes,!0),cn(t,n,e.attributes),e.disabled&&(u(e.disabled)?t.attr("d3-attr-disabled",e.disabled):t.property("disabled",!0)),e},wrap:function(t){var e=this,n=t;return e.model.$formExtensions.forEach(function(r){n=r(e,n,t)||n}),n},wrapTemplate:function(t,e){var n=document.createElement("div"),r=Ac(n).html(e).select("slot");if(!r.size())return Kf("template does not provide a slot element"),t;var i=Ac(r.node().parentNode);return t.nodes().forEach(function(t){i.insert(function(){return t},"slot")}),r.remove(),Tc(n.children)}},th=Os({},Qf,{model:{value:null,error:"",isDirty:null,changed:!1,srOnly:!1,placeholder:"",showError:{reactOn:["error","isDirty"],get:function(){return!!this.error&&this.isDirty}},$validate:function(){}},inputData:function(t,e){if(!(e=Qf.inputData.call(this,t,e)).name)return Kf("Input field without a name");t.attr("name",e.name),e.placeholder=e.placeholder||e.label||e.name;var n=this.model;return n.form.inputs[e.name]=n,n.name=e.name,n.$on("value",function(){null===n.isDirty?n.isDirty=!1:(n.isDirty=!0,n.changed=!0),n.form.$change()}),e}}),eh={text:"input",email:"input",password:"input",checkbox:"input",number:"input",date:"input",url:"input","datetime-local":"input"};Os({},Qf,{render:function(t){var e=t?t.tag||"fieldset":"fieldset",n=this.createElement(e);return t=this.inputData(n,t),fn.call(this,n)}});var nh={get:function(t){var e=this.all.slice(0);if(a(t))for(var n in t)e.push(pn(n,t[n]));return e},set:function(t,e){var n=t.model;n._view=t,n.validators.forEach(function(t){return t.set(e,n.data)}),n.$on("value.validate",this.validate),n.$validate=this.validate},validate:function(){for(var t,e,n=this,r=n._view,i=n.validators,o=n.value,a=r.sel.attr("id")===n.data.id?r.sel:r.sel.select("#"+n.data.id),u=0;u<i.length;++u)if(t=i[u],e=t.validate(a,o)){!0===e&&(e="");break}n.error=e||""},all:[{set:function(t,e){var n=e.required;u(n)?t.attr("d3-required",n):t.property("required",n||null)},validate:function(t,e){if(t.property("required")){if(!e)return"required";if(""===e)return!0}}},{set:function(t,e){var n=e.minLength;u(n)?t.attr("d3-attr-minlength",n):void 0!==n&&t.attr("minlength",n)},validate:function(t,e){var n=+t.attr("minlength");if(n==n&&n>0&&e.length<n)return"too short - "+n+" characters or more expected"}},{set:function(t,e){var n=e.maxLength;u(n)?t.attr("d3-attr-maxlength",n):void 0!==n&&t.attr("maxlength",n)},validate:function(t,e){var n=+t.attr("maxlength");if(n==n&&n>0&&e&&e.length>n)return"too long - "+n+" characters or less expected"}},{set:function(t,e){var n=e.minimum;u(n)?t.attr("d3-attr-min",n):void 0!==n&&t.attr("min",n)},validate:function(t,e){var n=dn(t);if(n&&+e<n[0])return"must be greater or equal "+n[0]}},{set:function(t,e){var n=e.maximum;u(n)?t.attr("d3-attr-max",n):void 0!==n&&t.attr("max",n)},validate:function(t,e){var n=dn(t);if(n&&+e>n[1])return"must be less or equal "+n[1]}}]},rh=["checkbox","radio"];Os({},th,{render:function(t){var e=this.createElement("input");return t=this.inputData(e,t),e.attr("type",t.type||"text").attr("d3-value","value"),-1===rh.indexOf(e.attr("type"))&&e.attr("placeholder",t.placeholder),nh.set(this,e),this.wrap(e)}}),Os({},th,{render:function(t){var e=this.createElement("textarea");return t=this.inputData(e,t),e.attr("placeholder",t.placeholder).attr("d3-value","value"),nh.set(this,e),this.wrap(e)}}),Os({},th,{model:Os({options:[],$optionLabel:function(){return c(this.option)?this.option[1]||this.option[0]:this.option},$optionValue:function(){return c(this.option)?this.option[0]:this.option}},th.model),render:function(t){var e=this.createElement("select");return t=this.inputData(e,t),e.attr("d3-value","value").attr("placeholder",t.placeholder).append("option").attr("d3-for","option in options").attr("d3-html","$optionLabel()").attr("d3-attr-value","$optionValue()"),nh.set(this,e),this.wrap(e)}}),Os({},Qf,{render:function(t){var e=t?t.tag||"button":"button",n=this.createElement(e);t=this.inputData(n,t);var r=this.model;return r.type=t.type||"submit",t.endpoint&&(r.endpoint=t.endpoint),r.$submit=function(){r.actions.submit.call(r,vc)},u(t.disabled)||(this.model.$set("disabled",t.disabled||null),t.disabled="disabled"),t.submit||(t.submit="$submit()"),n.attr("type",r.type).attr("name",r.name).attr("d3-attr-disabled",t.disabled).attr("d3-on-click",t.submit).html(t.label||"submit"),this.wrap(n)}});var ih=new RegExp("^([a-z]+://|//)"),oh=me(function(t){var e=oh.libs.get(t)||t;return vn(e)?e:"https://unpkg.com/"+t});oh.libs=r();var ah={initialise:function(t){this._data=t.data},getConfig:function(t){return c(t)?{data:t}:a(t)&&c(t.data)?t:void 0},getData:function(){return mf(this.asFrame(this._data))}},uh={},sh={},ch=34,lh=10,fh=13,hh=function(t){function e(t,e){function n(){if(c)return sh;if(l)return l=!1,uh;var e,n,r=u;if(t.charCodeAt(r)===ch){for(;u++<a&&t.charCodeAt(u)!==ch||t.charCodeAt(++u)===ch;);return(e=u)>=a?c=!0:(n=t.charCodeAt(u++))===lh?l=!0:n===fh&&(l=!0,t.charCodeAt(u)===lh&&++u),t.slice(r+1,e-1).replace(/""/g,'"')}for(;u<a;){if((n=t.charCodeAt(e=u++))===lh)l=!0;else if(n===fh)l=!0,t.charCodeAt(u)===lh&&++u;else if(n!==o)continue;return t.slice(r,e)}return c=!0,t.slice(r,a)}var r,i=[],a=t.length,u=0,s=0,c=a<=0,l=!1;for(t.charCodeAt(a-1)===lh&&--a,t.charCodeAt(a-1)===fh&&--a;(r=n())!==sh;){for(var f=[];r!==uh&&r!==sh;)f.push(r),r=n();e&&null==(f=e(f,s++))||i.push(f)}return i}function n(e){return e.map(r).join(t)}function r(t){return null==t?"":i.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}var i=new RegExp('["'+t+"\n\r]"),o=t.charCodeAt(0);return{parse:function(t,n){var r,i,o=e(t,function(t,e){if(r)return r(t,e-1);i=t,r=n?mn(t,n):gn(t)});return o.columns=i,o},parseRows:e,format:function(e,n){return null==n&&(n=yn(e)),[n.map(r).join(t)].concat(e.map(function(e){return n.map(function(t){return r(e[t])}).join(t)})).join("\n")},formatRows:function(t){return t.map(n).join("\n")}}},dh=hh(",").parse,ph=hh("\t").parse,vh=function(t){rf.logger.warn("[d3-data-source] "+t)},gh=["http","https","ws","wss"],mh=function(t){return u(t)&&gh.indexOf(t.split("://")[0])>-1},yh=o(["text/plain","text/csv","application/vnd.ms-excel"]),bh={getConfig:function(t){return mh(t)?{url:t}:a(t)&&t.url?t:void 0},initialise:function(t){this.url=t.url},getData:function(){var t=rf.fetch,e=this;return t?t(this.url).then(bn).then(function(t){return e.asFrame(t)}):(vh("fetch provider not available, cannot submit"),[])}},_h={initialise:function(t){this.source=t.source},getConfig:function(t){if(a(t)&&t.source)return c(t.source)||(t.source=[t.source]),t},getData:function(){var t=this.store,e=this.source,n=this;return Promise.all(e.map(function(e){return t.getData(e)})).then(function(t){if(1===t.length)return t[0];if(n.config.merge)return n.mergeFrames(t);var r=new _n;return t.forEach(function(t,n){r.frames.set(e[n],t)}),r})},mergeFrames:function(t){return t[0]}};_n.prototype={dataFrame:function(){for(var t=this.frames.values(),e=0;e<t.length;++e)if("dataframe"===t[e].type)return t[e]}};var xh={initialise:function(t){this.expression=jf(t.expression)},getConfig:function(t){if(a(t)&&t.expression)return t},getData:function(){var t=this,e=this.store.model,n=this.expression.eval(e);return h(n)?n.then(function(e){return t.asFrame(e)}):t.asFrame(n)}},wh="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Mh=function(t,e){return e={exports:{}},t(e,e.exports),e.exports}(function(t,e){!function(t){function e(t){return t}function n(t,e){for(var n=0,r=e.length,i=new Array(r);n<r;++n)i[n]=t[e[n]];return i}function r(t){function e(e,n,r,i){for(;r<i;){var o=r+i>>>1;n<t(e[o])?i=o:r=o+1}return r}return e.right=e,e.left=function(e,n,r,i){for(;r<i;){var o=r+i>>>1;t(e[o])<n?r=o+1:i=o}return r},e}function i(t){function e(t,e,r){for(var i=r-e,o=1+(i>>>1);--o>0;)n(t,o,i,e);return t}function n(e,n,r,i){for(var o,a=e[--i+n],u=t(a);(o=n<<1)<=r&&(o<r&&t(e[i+o])>t(e[i+o+1])&&o++,!(u<=t(e[i+o])));)e[i+n]=e[i+o],n=o;e[i+n]=a}return e.sort=function(t,e,r){for(var i,o=r-e;--o>0;)i=t[e],t[e]=t[e+o],t[e+o]=i,n(t,1,o,e);return t},e}function o(t){var e=i(t);return function(n,r,i,o){var a,u,s,c=new Array(o=Math.min(i-r,o));for(u=0;u<o;++u)c[u]=n[r++];if(e(c,0,o),r<i){a=t(c[0]);do{t(s=n[r])>a&&(c[0]=s,a=t(e(c,0,o)[0]))}while(++r<i)}return c}}function a(t){return function(e,n,r){for(var i=n+1;i<r;++i){for(var o=i,a=e[i],u=t(a);o>n&&t(e[o-1])>u;--o)e[o]=e[o-1];e[o]=a}return e}}function u(t){function e(t,e,i){return(i-e<M?r:n)(t,e,i)}function n(n,r,i){var o,a=(i-r)/6|0,u=r+a,s=i-1-a,c=r+i-1>>1,l=c-a,f=c+a,h=n[u],d=t(h),p=n[l],v=t(p),g=n[c],m=t(g),y=n[f],b=t(y),_=n[s],x=t(_);d>v&&(o=h,h=p,p=o,o=d,d=v,v=o),b>x&&(o=y,y=_,_=o,o=b,b=x,x=o),d>m&&(o=h,h=g,g=o,o=d,d=m,m=o),v>m&&(o=p,p=g,g=o,o=v,v=m,m=o),d>b&&(o=h,h=y,y=o,o=d,d=b,b=o),m>b&&(o=g,g=y,y=o,o=m,m=b,b=o),v>x&&(o=p,p=_,_=o,o=v,v=x,x=o),v>m&&(o=p,p=g,g=o,o=v,v=m,m=o),b>x&&(o=y,y=_,_=o,o=b,b=x,x=o);var w=p,M=v,E=y,k=b;n[u]=h,n[l]=n[r],n[c]=g,n[f]=n[i-1],n[s]=_;var A=r+1,T=i-2,C=M<=k&&M>=k;if(C)for(P=A;P<=T;++P){O=n[P];if((z=t(O))<M)P!==A&&(n[P]=n[A],n[A]=O),++A;else if(z>M)for(;;){if(!((N=t(n[T]))>M)){if(N<M){n[P]=n[A],n[A++]=n[T],n[T--]=O;break}n[P]=n[T],n[T--]=O;break}T--}}else for(P=A;P<=T;P++){O=n[P];if((z=t(O))<M)P!==A&&(n[P]=n[A],n[A]=O),++A;else if(z>k)for(;;){if(!((N=t(n[T]))>k)){N<M?(n[P]=n[A],n[A++]=n[T],n[T--]=O):(n[P]=n[T],n[T--]=O);break}if(--T<P)break}}if(n[r]=n[A-1],n[A-1]=w,n[i-1]=n[T+1],n[T+1]=E,e(n,r,A-1),e(n,T+2,i),C)return n;if(A<u&&T>s){for(var S,N;(S=t(n[A]))<=M&&S>=M;)++A;for(;(N=t(n[T]))<=k&&N>=k;)--T;for(var P=A;P<=T;P++){var O=n[P],z=t(O);if(z<=M&&z>=M)P!==A&&(n[P]=n[A],n[A]=O),A++;else if(z<=k&&z>=k)for(;;){if(!((N=t(n[T]))<=k&&N>=k)){N<M?(n[P]=n[A],n[A++]=n[T],n[T--]=O):(n[P]=n[T],n[T--]=O);break}if(--T<P)break}}}return e(n,A,T+1)}var r=a(t);return e}function s(t){for(var e=new Array(t),n=-1;++n<t;)e[n]=0;return e}function c(t,e){return function(n){var r=n.length;return[t.left(n,e,0,r),t.right(n,e,0,r)]}}function l(t,e){var n=e[0],r=e[1];return function(e){var i=e.length;return[t.left(e,n,0,i),t.left(e,r,0,i)]}}function f(t){return[0,t.length]}function h(){return null}function d(){return 0}function p(t){return t+1}function v(t){return t-1}function g(t){return function(e,n){return e+ +t(n)}}function m(t){return function(e,n){return e-t(n)}}function y(){function t(t){var e=s,n=t.length;return n&&(a=a.concat(t),k=T(k,s+=n),S.forEach(function(r){r(t,e,n)})),r}var r={add:t,remove:function(){for(var t=b(s,s),e=[],n=0,r=0;n<s;++n)k[n]?t[n]=r++:e.push(n);A.forEach(function(t){t(0,[],e)}),N.forEach(function(e){e(t)});for(var i,n=0,r=0;n<s;++n)(i=k[n])&&(n!==r&&(k[r]=i,a[r]=a[n]),++r);for(a.length=r;s>r;)k[--s]=0},dimension:function(t){function r(e,r,i){X=e.map(t),Y=V(_(i),0,i),X=n(X,Y);var o,a=G(X),u=a[0],c=a[1];if(q)for(o=0;o<i;++o)q(X[o],o)||(k[Y[o]+r]|=B);else{for(o=0;o<u;++o)k[Y[o]+r]|=B;for(o=c;o<i;++o)k[Y[o]+r]|=B}if(!r)return F=X,U=Y,K=u,void(Q=c);var l=F,f=U,h=0,d=0;for(F=new Array(s),U=b(s,s),o=0;h<r&&d<i;++o)l[h]<X[d]?(F[o]=l[h],U[o]=f[h++]):(F[o]=X[d],U[o]=Y[d++]+r);for(;h<r;++h,++o)F[o]=l[h],U[o]=f[h];for(;d<i;++d,++o)F[o]=X[d],U[o]=Y[d]+r;a=G(F),K=a[0],Q=a[1]}function E(t,e,n){Z.forEach(function(t){t(X,Y,e,n)}),X=Y=null}function P(t){for(var e,n=0,r=0;n<s;++n)k[e=U[n]]&&(n!==r&&(F[r]=F[n]),U[r]=t[e],++r);for(F.length=r;r<s;)U[r++]=0;var i=G(F);K=i[0],Q=i[1]}function O(t){var e=t[0],n=t[1];if(q)return q=null,L(function(t,r){return e<=r&&r<n}),K=e,Q=n,H;var r,i,o,a=[],u=[];if(e<K)for(r=e,i=Math.min(K,n);r<i;++r)k[o=U[r]]^=B,a.push(o);else if(e>K)for(r=K,i=Math.min(e,Q);r<i;++r)k[o=U[r]]^=B,u.push(o);if(n>Q)for(r=Math.max(e,Q),i=n;r<i;++r)k[o=U[r]]^=B,a.push(o);else if(n<Q)for(r=Math.max(K,n),i=Q;r<i;++r)k[o=U[r]]^=B,u.push(o);return K=e,Q=n,A.forEach(function(t){t(B,a,u)}),H}function z(t){return O((G=c(w,t))(F))}function D(t){return O((G=l(w,t))(F))}function $(){return O((G=f)(F))}function j(t){return G=f,L(q=t),K=0,Q=s,H}function L(t){var e,n,r,i=[],o=[];for(e=0;e<s;++e)!(k[n=U[e]]&B)^!!(r=t(F[e],e))&&(r?(k[n]&=W,i.push(n)):(k[n]|=B,o.push(n)));A.forEach(function(t){t(B,i,o)})}function I(t){function n(e,n,r,i){function o(){++X===R&&(w=C(w,I<<=1),O=C(O,I),R=x(I))}var d,p,v,g,m,y,_=P,w=b(X,R),M=$,E=L,S=X,N=0,z=0;for(H&&(M=E=h),P=new Array(X),X=0,O=S>1?T(O,s):b(s,R),S&&(v=(p=_[0]).key);z<i&&!((g=t(e[z]))>=g);)++z;for(;z<i;){for(p&&v<=g?(m=p,y=v,w[N]=X,(p=_[++N])&&(v=p.key)):(m={key:g,value:E()},y=g),P[X]=m;!(g>y||(O[d=n[z]+r]=X,k[d]&W||(m.value=M(m.value,a[d])),++z>=i));)g=t(e[z]);o()}for(;N<S;)P[w[N]=X]=_[N++],o();if(X>N)for(N=0;N<r;++N)O[N]=w[O[N]];d=A.indexOf(Y),X>1?(Y=u,q=l):(!X&&V&&(X=1,P=[{key:null,value:E()}]),1===X?(Y=c,q=f):(Y=h,q=h),O=null),A[d]=Y}function r(){if(X>1){for(var t=X,e=P,n=b(t,t),r=0,i=0;r<s;++r)k[r]&&(n[O[i]=O[r]]=1,++i);for(P=[],X=0,r=0;r<t;++r)n[r]&&(n[r]=X++,P.push(e[r]));if(X>1)for(r=0;r<i;++r)O[r]=n[O[r]];else O=null;A[A.indexOf(Y)]=X>1?(q=l,Y=u):1===X?(q=f,Y=c):q=Y=h}else if(1===X){if(V)return;for(r=0;r<s;++r)if(k[r])return;P=[],X=0,A[A.indexOf(Y)]=Y=q=h}}function u(t,e,n){if(t!==B&&!H){var r,i,o,u;for(r=0,o=e.length;r<o;++r)k[i=e[r]]&W||((u=P[O[i]]).value=$(u.value,a[i]));for(r=0,o=n.length;r<o;++r)(k[i=n[r]]&W)===t&&((u=P[O[i]]).value=j(u.value,a[i]))}}function c(t,e,n){if(t!==B&&!H){var r,i,o,u=P[0];for(r=0,o=e.length;r<o;++r)k[i=e[r]]&W||(u.value=$(u.value,a[i]));for(r=0,o=n.length;r<o;++r)(k[i=n[r]]&W)===t&&(u.value=j(u.value,a[i]))}}function l(){var t,e;for(t=0;t<X;++t)P[t].value=L();for(t=0;t<s;++t)k[t]&W||((e=P[O[t]]).value=$(e.value,a[t]))}function f(){var t,e=P[0];for(e.value=L(),t=0;t<s;++t)k[t]&W||(e.value=$(e.value,a[t]))}function y(){return H&&(q(),H=!1),P}function _(t,e,n){return $=t,j=e,L=n,H=!0,S}function w(){return _(p,v,d)}function M(t){function e(e){return t(e.value)}return z=o(e),D=i(e),S}function E(){var t=A.indexOf(Y);return t>=0&&A.splice(t,1),(t=Z.indexOf(n))>=0&&Z.splice(t,1),(t=N.indexOf(r))>=0&&N.splice(t,1),S}var S={top:function(t){var e=z(y(),0,P.length,t);return D.sort(e,0,e.length)},all:y,reduce:_,reduceCount:w,reduceSum:function(t){return _(g(t),m(t),d)},order:M,orderNatural:function(){return M(e)},size:function(){return X},dispose:E,remove:E};J.push(S);var P,O,z,D,$,j,L,I=8,R=x(I),X=0,Y=h,q=h,H=!0,V=t===h;return arguments.length<1&&(t=e),A.push(Y),Z.push(n),N.push(r),n(F,U,0,s),w().orderNatural()}function R(){J.forEach(function(t){t.dispose()});var t=S.indexOf(r);return t>=0&&S.splice(t,1),(t=S.indexOf(E))>=0&&S.splice(t,1),(t=N.indexOf(P))>=0&&N.splice(t,1),y&=W,$()}var F,U,X,Y,q,H={filter:function(t){return null==t?$():Array.isArray(t)?D(t):"function"==typeof t?j(t):z(t)},filterExact:z,filterRange:D,filterFunction:j,filterAll:$,top:function(t){for(var e,n=[],r=Q;--r>=K&&t>0;)k[e=U[r]]||(n.push(a[e]),--t);return n},bottom:function(t){for(var e,n=[],r=K;r<Q&&t>0;)k[e=U[r]]||(n.push(a[e]),--t),r++;return n},group:I,groupAll:function(){var t=I(h),e=t.all;return delete t.all,delete t.top,delete t.order,delete t.orderNatural,delete t.size,t.value=function(){return e()[0].value},t},dispose:R,remove:R},B=~y&-~y,W=~B,V=u(function(t){return X[t]}),G=f,Z=[],J=[],K=0,Q=0;return S.unshift(r),S.push(E),N.push(P),y|=B,(M>=32?!B:y&-(1<<M))&&(k=C(k,M<<=1)),r(a,0,s),E(a,0,s),H},groupAll:function(){function t(t,e){var n;if(!y)for(n=e;n<s;++n)k[n]||(u=c(u,a[n]))}function e(t,e,n){var r,i,o;if(!y){for(r=0,o=e.length;r<o;++r)k[i=e[r]]||(u=c(u,a[i]));for(r=0,o=n.length;r<o;++r)k[i=n[r]]===t&&(u=l(u,a[i]))}}function n(){var t;for(u=f(),t=0;t<s;++t)k[t]||(u=c(u,a[t]))}function r(t,e,n){return c=t,l=e,f=n,y=!0,h}function i(){return r(p,v,d)}function o(){var n=A.indexOf(e);return n>=0&&A.splice(n),(n=S.indexOf(t))>=0&&S.splice(n),h}var u,c,l,f,h={reduce:r,reduceCount:i,reduceSum:function(t){return r(g(t),m(t),d)},value:function(){return y&&(n(),y=!1),u},dispose:o,remove:o},y=!0;return A.push(e),S.push(t),t(a,0,s),i()},size:function(){return s}},a=[],s=0,y=0,M=8,k=E(0),A=[],S=[],N=[];return arguments.length?t(arguments[0]):r}function b(t,e){return(e<257?E:e<65537?k:A)(t)}function _(t){for(var e=b(t,t),n=-1;++n<t;)e[n]=n;return e}function x(t){return 8===t?256:16===t?65536:4294967296}y.version="1.3.12",y.permute=n;var w=y.bisect=r(e);w.by=r,(y.heap=i(e)).by=i,(y.heapselect=o(e)).by=o,(y.insertionsort=a(e)).by=a,(y.quicksort=u(e)).by=u;var M=32,E=s,k=s,A=s,T=function(t,e){for(var n=t.length;n<e;)t[n++]=0;return t},C=function(t,e){if(e>32)throw new Error("invalid array width!");return t};"undefined"!=typeof Uint8Array&&(E=function(t){return new Uint8Array(t)},k=function(t){return new Uint16Array(t)},A=function(t){return new Uint32Array(t)},T=function(t,e){if(t.length>=e)return t;var n=new t.constructor(e);return n.set(t),n},C=function(t,e){var n;switch(e){case 16:n=k(t.length);break;case 32:n=A(t.length);break;default:throw new Error("invalid array width!")}return n.set(t),n}),t.crossfilter=y}(e||wh)}).crossfilter,Eh=function(t){return function(e){return e[t]}};xn.prototype={dataFrame:function(){return this},size:function(){return this.data.length},new:function(t){return c(t)?new xn(t,null,this.store):new xn(this._inner,t)},cf:function(){return this._inner.cf||(this._inner.cf=Mh(this.data)),this._inner.cf},dimension:function(t,e,n){1===arguments.length&&(n=!0);var r=this.dimensions[t];if(r){if(n)return r;r.dispose()}return e||(e=Eh(t)),this.dimensions[t]=this.cf().dimension(e),this.dimensions[t]},sortby:function(t,e){return this.new(this.dimension(t).top(e||1/0))},pivot:function(t,e,n,r){function i(i){var o=void 0,a=void 0;return function(u,s){return o=""+s[e],a=i*s[n],u[t]=s[t],o in u?u[o]+=a:u[o]=a,r in u?u[r]+=a:u[r]=a,u}}var o=this.dimension(t).group();return r||(r="total"),this.new(o.reduce(i(1),i(-1),Object).all().map(function(t){return t.value}))},add:function(){},map:function(t){return this.new(this.data.map(t))}};var kh=function(t){function e(t){return i.validate(t)?function(e){return n(e,t)}:i.logError()}var n=t.transform,r=t.schema||{},i=rf.jsonValidator?rf.jsonValidator(t.schema):Ah;return r.type||(r.type="object"),e.schema=r,e},Ah={validate:function(){return!0}},Th=kh({schema:{description:"The filter transform removes objects from a data frame based on a provided filter expression",properties:{expr:{type:"string"}},required:["expr"]},transform:function(t,e){var n=jf(e.expr);return t.data.reduce(function(e,r,i){return n.safeEval({d:r,index:i,frame:t})&&e.push(r),e},[])}}),Ch=function(t,e){rf.logger.warn("[d3-visualize] "+t),e&&rf.logger.error(e.stack)},Sh=function(t,e){var n=new Array(t);return n.fill(e),n},Nh=r({count:wn,max:Ql,min:function(t,e){var n,r,i=t.length,o=-1;if(null==e){for(;++o<i;)if(null!=(n=t[o])&&n>=n)for(r=n;++o<i;)null!=(n=t[o])&&r>n&&(r=n)}else for(;++o<i;)if(null!=(n=e(t[o],o,t))&&n>=n)for(r=n;++o<i;)null!=(n=e(t[o],o,t))&&r>n&&(r=n);return r},sum:tf,mean:function(t,e){var n,r=t.length,i=r,o=-1,a=0;if(null==e)for(;++o<r;)isNaN(n=ql(t[o]))?--i:a+=n;else for(;++o<r;)isNaN(n=ql(e(t[o],o,t)))?--i:a+=n;if(i)return a/i},median:function(t,e){var n,r=t.length,i=-1,o=[];if(null==e)for(;++i<r;)isNaN(n=ql(t[i]))||o.push(n);else for(;++i<r;)isNaN(n=ql(e(t[i],i,t)))||o.push(n);return Kl(o.sort(Ul),.5)},variance:Hl,deviation:function(t,e){var n=Hl(t,e);return n?Math.sqrt(n):n}}),Ph=r({count:function(t){return t+1},sum:function(t,e){return t+e},max:Math.max,min:Math.min}),Oh=new Date,zh=new Date,Dh=Mn(function(){},function(t,e){t.setTime(+t+e)},function(t,e){return e-t});Dh.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?Mn(function(e){e.setTime(Math.floor(e/t)*t)},function(e,n){e.setTime(+e+n*t)},function(e,n){return(n-e)/t}):Dh:null};var $h=6e4,jh=6048e5,Lh=Mn(function(t){t.setTime(1e3*Math.floor(t/1e3))},function(t,e){t.setTime(+t+1e3*e)},function(t,e){return(e-t)/1e3},function(t){return t.getUTCSeconds()}),Ih=Mn(function(t){t.setTime(Math.floor(t/$h)*$h)},function(t,e){t.setTime(+t+e*$h)},function(t,e){return(e-t)/$h},function(t){return t.getMinutes()}),Rh=Mn(function(t){var e=t.getTimezoneOffset()*$h%36e5;e<0&&(e+=36e5),t.setTime(36e5*Math.floor((+t-e)/36e5)+e)},function(t,e){t.setTime(+t+36e5*e)},function(t,e){return(e-t)/36e5},function(t){return t.getHours()}),Fh=Mn(function(t){t.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*$h)/864e5},function(t){return t.getDate()-1}),Uh=En(0),Xh=En(1),Yh=(En(2),En(3),En(4)),qh=(En(5),En(6),Mn(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,e){t.setMonth(t.getMonth()+e)},function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())},function(t){return t.getMonth()})),Hh=Mn(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t,e){return e.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()});Hh.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Mn(function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,n){e.setFullYear(e.getFullYear()+n*t)}):null};var Bh=Mn(function(t){t.setUTCSeconds(0,0)},function(t,e){t.setTime(+t+e*$h)},function(t,e){return(e-t)/$h},function(t){return t.getUTCMinutes()}),Wh=Mn(function(t){t.setUTCMinutes(0,0,0)},function(t,e){t.setTime(+t+36e5*e)},function(t,e){return(e-t)/36e5},function(t){return t.getUTCHours()}),Vh=Mn(function(t){t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+e)},function(t,e){return(e-t)/864e5},function(t){return t.getUTCDate()-1}),Gh=kn(0),Zh=kn(1),Jh=(kn(2),kn(3),kn(4)),Kh=(kn(5),kn(6),Mn(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCMonth(t.getUTCMonth()+e)},function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())},function(t){return t.getUTCMonth()})),Qh=Mn(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)},function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()});Qh.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Mn(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)}):null};var td,ed,nd,rd,id={"-":"",_:" ",0:"0"},od=/^\s*\d+/,ad=/^%/,ud=/[\\^$*+?|[\]().{}]/g;!function(t){td=Sn(t),ed=td.format,nd=td.utcFormat,rd=td.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});Date.prototype.toISOString||nd("%Y-%m-%dT%H:%M:%S.%LZ"),+new Date("2000-01-01T00:00:00.000Z")||rd("%Y-%m-%dT%H:%M:%S.%LZ");var sd={dataSource:null,size:{width:null,height:"70%"}};sd.dateFormat="%d-%b-%y";var cd={date:function(t){return rd(t.dateFormat||sd.dateFormat)},number:function(){return parseFloat}},ld=function(t,e,n){return void 0!==n&&(t=Math.min(t,n)),void 0===e?t:Math.max(t,e)},fd=r({filter:Th,aggregate:function(t){function e(t){var e=void 0,a=void 0,u=void 0,s=n.map(function(t,e){return a=r[e],u=Ph.get("count"),a&&((u=Ph.get(a))||(u=Ph.get("count"),Ch("Operation "+a+" is not supported, use count"))),{field:t,as:i[e]||t,op:u}});return t.dimension(o).group().reduce(function(t,n){return s.reduce(function(t,r){return e=0,r.as in t&&(e=t[r.as]),t[r.as]=r.op(e,n[r.field]),t},t)},null,Object).all().map(function(t){return t.value[o]=t.key,t.value})}var n=t.fields,r=t.ops,i=t.as,o=t.groupby;return n||r?c(n)?(r||(r="count"),u(r)&&(r=Sh(n.length,r)),c(r)?(r.length<n.length&&Ch("Aggregate transforms expects an ops array with same length as fields"),i||(i=[]),c(i)?function(t){var a,u,s=[];return o?e(t):(n.forEach(function(e,n){a=r[n],u=wn,a&&((u=Nh.get(a))||(u=wn,Ch("Operation "+r[n]+" is not supported, use count"))),s.push({label:i[n]||e,data:u(t.data,function(t){return t[e]})})}),s)}:Ch("Aggregate transform expects an array of as fields")):Ch("Aggregate transform expects an array of ops")):Ch("Aggregate transforms expect an array of fields"):function(t){var e=void 0;return t.data.reduce(function(t,n){for(e in n)e in t?t[e]+=1:t[e]=1;return t},{})}},mapfields:kh({shema:{description:"map a field values into another type",properties:{fields:{type:"object"},dateFormat:{type:"string"}},required:["fields"]},transform:function(t,e){var n=[],i=void 0,o=void 0;return r(e.fields).each(function(t,e){u(t)&&(t={type:t}),(o=cd[t.type])?n.push([e,o(t)]):Ch("Cannot convert field "+e+" to type "+t.type)}),n.length&&(t=t.map(function(t){for(i=0;i<n.length;++i)t[n[i][0]]=n[i][1](t[n[i][0]]);return t})),t}}),timeseries:function(t){var e=t.sortby,n=t.groupby;return e||Ch('timeseries transform requires a "sortby" entry'),function(t){if(e){if(n){var r,i=t.dimension(n),o=i.group().top(1/0),a=t.new([]);return o.forEach(function(n){r=t.new(i.filterExact(n.key).top(1/0)).dimension(e).group().top(1/0),a.series.set(n.key,t.new(r).dimension("key").top(1/0))}),a}return t.new(t.dimension(e).top(1/0))}return t}},crossfilter:function(t){var e=t.fields,n=t.query;return c(e)?c(n)?n.length!=e.length?Ch("crossfilter transform expects an query array with same length as fields"):function(t){var r=void 0,i=void 0;return e.forEach(function(e,o){u(i=n[o])&&(i=t.store.eval(i)),r=t.dimension(e).filterAll(),i&&r.filter(i)}),r?t.new(r.top(1/0)):t}:Ch("crossfilter transform expects an array of query"):Ch("crossfilter transform expects an array of fields")},movingaverage:kh({shema:{description:"Create moving average series from existing one. The new series override the existing one unless the as array is provided",properties:{method:{type:"string"},alpha:{type:"number"},period:{type:"number"},fields:{type:"array",items:{type:"string"}},as:{type:"array",items:{type:"string"}}},required:["fields"]},transform:function(t,e){var n=e.as||[],r=e.method||"ema",i=void 0,o=void 0,a=void 0;e.fields.forEach(function(u,s){if(i=n[s]||u,"sma"===r){var c=Math.max(e.period||10,1),l=[],f=[];t.data.forEach(function(t,e){o=t[u],l.length===c&&(o-=f.splice(0,1)[0]),f.push(o),e&&(o+=l[l.length-1]),l.push(o),t[i]=o/l.length})}else{var h=ld(e.alpha||.5,1-.999999,.999999);t.data.forEach(function(t,e){o=t[u],a=e?h*a+(1-h)*o:o,t[i]=a})}})}}),groupsmall:kh({schema:{description:"Group entries which are below a given aggregate cutoff",properties:{field:{type:"string"},cutoff:{type:"number"}},required:["field","cutoff"]},transform:function(t,e){var n=Eh(e.field),r=tf(t.data,n),i=[],o=0;return t.dimension(e.field).bottom(1/0).reduce(function(t,a){return(o+=n(a))/r<e.cutoff?i.push(a):i?(i.push(a),(a={label:"other",children:i})[e.field]=o,i=null,t.push(a)):t.push(a),t},[])}}),diff:kh({schema:{description:"Perfrom a difference for a group of fields along a dimension. It is possible to perform a difference for different groups",properties:{dimension:{type:"string"},period:{type:"integer",minimum:1},fields:{type:"array",items:{type:"string"}},as:{type:"array",items:{type:"string"}},groupby:{type:"string"}},required:["dimension","fields"]},transform:function(t,e){function n(t){var n=t.dimension(e.dimension),a=e.fields.reduce(function(t,e){return t[e]=0,t},{}),u=[],s=void 0,c=void 0;n.top(1/0).forEach(function(t,n){s=Os({},t),u.push(t),c=n>i?u.splice(0,1)[0]:a,e.fields.forEach(function(e,n){t[r[n]||e]=t[e]-c[e]}),o.push(s)})}var r=e.as||[],i=e.period||1,o=[];if(e.groupby){var a=t.dimension(e.groupby);a.group().all().forEach(function(e){return n(t.new(a.filterAll().filter(e.key).top(1/0)))})}else n(t.new());return o}})}),hd=xt("init","data"),dd={getConfig:function(){},initialise:function(){},getData:function(){},addTransforms:function(t){var e=this,n=void 0;t&&(c(t)||(t=[t]),t.forEach(function(t){(n=fd.get(t.type))?e.transforms.push(n(t)):Ch('Transform type "'+t.type+'" not known')}))},asFrame:function(t){return c(t)&&(t=new xn(t=t.map(function(t){return t.constructor!==Object&&(t={data:t}),t}),null,this.store)),jr(t,this.transforms)}},pd=Os(r(),{events:hd,add:function(t,e){function n(e,n){Lr(this,t,e,n)}return n.prototype=Os({},dd,e),this.set(t,n),n},create:function(t,e){for(var n,r=this.values(),i=0;i<r.length;++i)if(n=r[i].prototype.getConfig(t))return new r[i](n,e)}});pd.add("array",ah),pd.add("remote",bh),pd.add("composite",_h),pd.add("expression",xh),Ir.prototype={size:function(){return this.sources.size()},addSources:function(t){if(u(t)&&(t={source:t}),c(t)){var e=this;return t.map(function(t){return pd.create(t,e)})}if(t)return pd.create(t,this)},addTransforms:function(t){Os(this.transforms,t)},source:function(t,e){if(1===arguments.length)return this.sources.get(t);if(null===e){var n=this.sources.get(t);return this.sources.remove(t),n}return this.sources.set(t,e),this},clearCache:function(){this.sources.each(function(t){delete t.cachedFrame})},getData:function(t){var e=this.sources.get(t);if(!e)throw new Error("Data source "+t+" not available");if(e.cachedFrame)return mf(e.cachedFrame);var n=e.getData();return h(n)||(n=mf(n)),n.then(function(t){return e.config.cache&&(e.cachedFrame=t),t})},eval:function(t,e){var n=this.model.$child(e);return n.dataStore=this,jf(t).safeEval(n)},dataName:function(t){return this.dataCount++,t?""+t:this.source("default")?"source"+this.dataCount:"default"}};var vd=xt("start","end","interrupt"),gd=[],md=0,yd=1,bd=2,_d=3,xd=4,wd=5,Md=6,Ed=function(t,e,n,r,i,o){var a=t.__transition;if(a){if(n in a)return}else t.__transition={};Xr(t,n,{name:e,index:r,group:i,on:vd,tween:gd,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:md})},kd=function(t,e){var n,r,i,o=t.__transition,a=!0;if(o){e=null==e?null:e+"";for(i in o)(n=o[i]).name===e?(r=n.state>bd&&n.state<wd,n.state=Md,n.timer.stop(),r&&n.on.call("interrupt",t,t.__data__,n.index,n.group),delete o[i]):a=!1;a&&delete t.__transition}},Ad=function(t,e,n){t.prototype=e.prototype=n,n.constructor=t},Td="\\s*([+-]?\\d+)\\s*",Cd="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Sd="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Nd=/^#([0-9a-f]{3})$/,Pd=/^#([0-9a-f]{6})$/,Od=new RegExp("^rgb\\("+[Td,Td,Td]+"\\)$"),zd=new RegExp("^rgb\\("+[Sd,Sd,Sd]+"\\)$"),Dd=new RegExp("^rgba\\("+[Td,Td,Td,Cd]+"\\)$"),$d=new RegExp("^rgba\\("+[Sd,Sd,Sd,Cd]+"\\)$"),jd=new RegExp("^hsl\\("+[Cd,Sd,Sd]+"\\)$"),Ld=new RegExp("^hsla\\("+[Cd,Sd,Sd,Cd]+"\\)$"),Id={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ad(qr,Hr,{displayable:function(){return this.rgb().displayable()},toString:function(){return this.rgb()+""}}),Ad(Zr,Gr,Yr(qr,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Zr(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Zr(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},toString:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}})),Ad(Qr,function(t,e,n,r){return 1===arguments.length?Kr(t):new Qr(t,e,n,null==r?1:r)},Yr(qr,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Qr(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Qr(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Zr(ti(t>=240?t-240:t+120,i,r),ti(t,i,r),ti(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var Rd=Math.PI/180,Fd=180/Math.PI,Ud=.95047,Xd=1,Yd=1.08883,qd=4/29,Hd=6/29,Bd=3*Hd*Hd,Wd=Hd*Hd*Hd;Ad(ni,function(t,e,n,r){return 1===arguments.length?ei(t):new ni(t,e,n,null==r?1:r)},Yr(qr,{brighter:function(t){return new ni(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new ni(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return t=Xd*ii(t),e=Ud*ii(e),n=Yd*ii(n),new Zr(oi(3.2404542*e-1.5371385*t-.4985314*n),oi(-.969266*e+1.8760108*t+.041556*n),oi(.0556434*e-.2040259*t+1.0572252*n),this.opacity)}})),Ad(si,function(t,e,n,r){return 1===arguments.length?ui(t):new si(t,e,n,null==r?1:r)},Yr(qr,{brighter:function(t){return new si(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new si(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return ei(this).rgb()}}));var Vd=-.14861,Gd=1.78277,Zd=-.29227,Jd=-.90649,Kd=1.97294,Qd=Kd*Jd,tp=Kd*Gd,ep=Gd*Zd-Jd*Vd;Ad(fi,li,Yr(qr,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new fi(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new fi(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*Rd,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),i=Math.sin(t);return new Zr(255*(e+n*(Vd*r+Gd*i)),255*(e+n*(Zd*r+Jd*i)),255*(e+n*(Kd*r)),this.opacity)}}));var np,rp,ip,op,ap=function(t){return function(){return t}},up=function t(e){function n(t,e){var n=r((t=Gr(t)).r,(e=Gr(e)).r),i=r(t.g,e.g),o=r(t.b,e.b),a=vi(t.opacity,e.opacity);return function(e){return t.r=n(e),t.g=i(e),t.b=o(e),t.opacity=a(e),t+""}}var r=pi(e);return n.gamma=t,n}(1),sp=function(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,o=new Array(r),a=new Array(r);for(n=0;n<i;++n)o[n]=vp(t[n],e[n]);for(;n<r;++n)a[n]=e[n];return function(t){for(n=0;n<i;++n)a[n]=o[n](t);return a}},cp=function(t,e){var n=new Date;return t=+t,e-=t,function(r){return n.setTime(t+e*r),n}},lp=function(t,e){return t=+t,e-=t,function(n){return t+e*n}},fp=function(t,e){var n,r={},i={};null!==t&&"object"===(void 0===t?"undefined":Vs(t))||(t={}),null!==e&&"object"===(void 0===e?"undefined":Vs(e))||(e={});for(n in e)n in t?r[n]=vp(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}},hp=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,dp=new RegExp(hp.source,"g"),pp=function(t,e){var n,r,i,o=hp.lastIndex=dp.lastIndex=0,a=-1,u=[],s=[];for(t+="",e+="";(n=hp.exec(t))&&(r=dp.exec(e));)(i=r.index)>o&&(i=e.slice(o,i),u[a]?u[a]+=i:u[++a]=i),(n=n[0])===(r=r[0])?u[a]?u[a]+=r:u[++a]=r:(u[++a]=null,s.push({i:a,x:lp(n,r)})),o=dp.lastIndex;return o<e.length&&(i=e.slice(o),u[a]?u[a]+=i:u[++a]=i),u.length<2?s[0]?mi(s[0].x):gi(e):(e=s.length,function(t){for(var n,r=0;r<e;++r)u[(n=s[r]).i]=n.x(t);return u.join("")})},vp=function(t,e){var n,r=void 0===e?"undefined":Vs(e);return null==e||"boolean"===r?ap(e):("number"===r?lp:"string"===r?(n=Hr(e))?(e=n,up):pp:e instanceof Hr?up:e instanceof Date?cp:Array.isArray(e)?sp:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?fp:lp)(t,e)},gp=function(t,e){return t=+t,e-=t,function(n){return Math.round(t+e*n)}},mp=180/Math.PI,yp={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},bp=function(t,e,n,r,i,o){var a,u,s;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(s=t*n+e*r)&&(n-=t*s,r-=e*s),(u=Math.sqrt(n*n+r*r))&&(n/=u,r/=u,s/=u),t*r<e*n&&(t=-t,e=-e,s=-s,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*mp,skewX:Math.atan(s)*mp,scaleX:a,scaleY:u}},_p=yi(function(t){return"none"===t?yp:(np||(np=document.createElement("DIV"),rp=document.documentElement,ip=document.defaultView),np.style.transform=t,t=ip.getComputedStyle(rp.appendChild(np),null).getPropertyValue("transform"),rp.removeChild(np),t=t.slice(7,-1).split(","),bp(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5]))},"px, ","px)","deg)"),xp=yi(function(t){return null==t?yp:(op||(op=document.createElementNS("http://www.w3.org/2000/svg","g")),op.setAttribute("transform",t),(t=op.transform.baseVal.consolidate())?(t=t.matrix,bp(t.a,t.b,t.c,t.d,t.e,t.f)):yp)},", ",")",")");bi(function(t,e){var n=e-t;return n?hi(t,n>180||n<-180?n-360*Math.round(n/360):n):ap(isNaN(t)?e:t)});var wp=bi(vi),Mp=function(t,e){var n;return("number"==typeof e?lp:e instanceof Hr?up:(n=Hr(e))?(e=n,up):pp)(t,e)},Ep=yt.prototype.constructor,kp=0,Ap=yt.prototype;Bi.prototype=Wi.prototype={constructor:Bi,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=bc(t));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var u,s,c=r[a],l=c.length,f=o[a]=new Array(l),h=0;h<l;++h)(u=c[h])&&(s=t.call(u,u.__data__,h,c))&&("__data__"in u&&(s.__data__=u.__data__),f[h]=s,Ed(f[h],e,n,h,f,Ur(u,n)));return new Bi(o,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=_c(t));for(var r=this._groups,i=r.length,o=[],a=[],u=0;u<i;++u)for(var s,c=r[u],l=c.length,f=0;f<l;++f)if(s=c[f]){for(var h,d=t.call(s,s.__data__,f,c),p=Ur(s,n),v=0,g=d.length;v<g;++v)(h=d[v])&&Ed(h,e,n,v,d,p);o.push(d),a.push(s)}return new Bi(o,a,e,n)},filter:function(t){"function"!=typeof t&&(t=dc(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a=e[i],u=a.length,s=r[i]=[],c=0;c<u;++c)(o=a[c])&&t.call(o,o.__data__,c,a)&&s.push(o);return new Bi(r,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),a=new Array(r),u=0;u<o;++u)for(var s,c=e[u],l=n[u],f=c.length,h=a[u]=new Array(f),d=0;d<f;++d)(s=c[d]||l[d])&&(h[d]=s);for(;u<r;++u)a[u]=e[u];return new Bi(a,this._parents,this._name,this._id)},selection:function(){return new Ep(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=Vi(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a,u=r[o],s=u.length,c=0;c<s;++c)if(a=u[c]){var l=Ur(a,e);Ed(a,t,n,c,u,{time:l.time+l.delay+l.duration,delay:0,duration:l.duration,ease:l.ease})}return new Bi(r,this._parents,t,n)},call:Ap.call,nodes:Ap.nodes,node:Ap.node,size:Ap.size,empty:Ap.empty,each:Ap.each,on:function(t,e){var n=this._id;return arguments.length<2?Ur(this.node(),n).on.on(t):this.each(Li(n,t,e))},attr:function(t,e){var n=sc(t),r="transform"===n?xp:Mp;return this.attrTween(t,"function"==typeof e?(n.local?Ci:Ti)(n,r,wi(this,"attr."+t,e)):null==e?(n.local?Ei:Mi)(n):(n.local?Ai:ki)(n,r,e+""))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var r=sc(t);return this.tween(n,(r.local?Si:Ni)(r,e))},style:function(t,e,n){var r="transform"==(t+="")?_p:Mp;return null==e?this.styleTween(t,Ri(t,r)).on("end.style."+t,Fi(t)):this.styleTween(t,"function"==typeof e?Xi(t,r,wi(this,"style."+t,e)):Ui(t,r,e+""),n)},styleTween:function(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!=typeof e)throw new Error;return this.tween(r,Yi(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?Hi(wi(this,"text",t)):qi(null==t?"":t+""))},remove:function(){return this.on("end.remove",Ii(this._id))},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r,i=Ur(this.node(),n).tween,o=0,a=i.length;o<a;++o)if((r=i[o]).name===t)return r.value;return null}return this.each((null==e?_i:xi)(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?Pi:Oi)(e,t)):Ur(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?zi:Di)(e,t)):Ur(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each($i(e,t)):Ur(this.node(),e).ease}};var Tp={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};yt.prototype.interrupt=function(t){return this.each(function(){kd(this,t)})},yt.prototype.transition=function(t){var e,n;t instanceof Bi?(e=t._id,t=t._name):(e=Vi(),(n=Tp).time=p(),t=null==t?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a,u=r[o],s=u.length,c=0;c<s;++c)(a=u[c])&&Ed(a,t,e,c,u,n||Gi(a,e));return new Bi(r,this._parents,t,e)};var Cp,Sp=function(t,e){return e?Math.round(t*(e=Math.pow(10,e)))/e:Math.round(t)},Np=400,Pp="75%",Op=["visual","container"],zp={live:[],types:{},papers:{},options:sd,events:xt("before-init","after-init","resize","before-draw","after-draw")},Dp=Os({},{initialise:function(){},draw:function(){},redraw:function(t){if(this.drawing){var e=this,n="after-draw."+this.toString();zp.events.on(n,function(){zp.events.on(n,null),e.redraw(t)})}else this.drawing=this.draw(t);return this.drawing},select:function(t){return Ac(t)},event:function(){return vc},destroy:function(){},toString:function(){return this.visualType+"-"+this.model.uid},getModel:function(t){t||(t=this.visualType);var e=this.model[t];if(!e&&t in sd){var n=Ls(this.options,t),r=this;this.visualParent?e=this.visualParent.getModel(t).$child(n):(e=this.model.$new(sd[t])).$update(n),this.model[t]=e,e.$on(function(){return r.redraw(!1)})}return e},idname:function(t){return t||(t=this.visualType),t+"-"+this.model.uid},modelProperty:function(t,e){var n=this.getModel()[t];return void 0===n?e[t]:n},dim:function(t,e,n,r){return ld(Zi(t,e),n,r)},pop:function(t){if(t){var e=t.live.indexOf(this);e>-1&&t.live.splice(e,1)}},getVisualSchema:function(t){var e=this.options.visuals?this.options.visuals[t]:null,n=this.visualParent;if(n&&u(e)?(t=e,e=n.getVisualSchema(t)):n&&!e&&(e=n.getVisualSchema(t)),a(e))return uo(e)}},bf),$p=function(t,e){function n(e,n,r,i){Object.defineProperties(this,{visualType:{get:function(){return t}},isViz:{get:function(){return-1===Op.indexOf(t)}},visualRoot:{get:function(){return this.visualParent?this.visualParent.visualRoot:this}}}),this.visualParent=r,this.model=r?r.model.$new():i||Ve(),this.options=n||{},this.drawing=!1,zp.events.call("before-init",void 0,this),this.initialise(e),zp.events.call("after-init",void 0,this)}var r=Ls(e,"options");return r&&(sd[t]=r),n.prototype=Os({},Dp,e),zp.types[t]=n,n},jp=Array.prototype,Lp=jp.map,Ip=jp.slice,Rp={name:"implicit"},Fp=function(t){return function(){return t}},Up=function(t){return+t},Xp=[0,1],Yp=function(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]},qp=function(t){return(t=Yp(Math.abs(t)))?t[1]:NaN},Hp=function(t,e){return function(n,r){for(var i=n.length,o=[],a=0,u=t[0],s=0;i>0&&u>0&&(s+u+1>r&&(u=Math.max(1,r-s)),o.push(n.substring(i-=u,i+u)),!((s+=u+1)>r));)u=t[a=(a+1)%t.length];return o.reverse().join(e)}},Bp=function(t){return function(e){return e.replace(/[0-9]/g,function(e){return t[+e]})}},Wp=function(t,e){var n=Yp(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")},Vp={"":function(t,e){t:for(var n,r=(t=t.toPrecision(e)).length,i=1,o=-1;i<r;++i)switch(t[i]){case".":o=n=i;break;case"0":0===o&&(o=i),n=i;break;case"e":break t;default:o>0&&(o=0)}return o>0?t.slice(0,o)+t.slice(n+1):t},"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return Wp(100*t,e)},r:Wp,s:function(t,e){var n=Yp(t,e);if(!n)return t+"";var r=n[0],i=n[1],o=i-(Cp=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+Yp(t,Math.max(0,e+o-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}},Gp=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i;bo.prototype=_o.prototype,_o.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+this.type};var Zp,Jp,Kp,Qp=function(t){return t},tv=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"],ev=function(t){function e(t){function e(t){var e,r,a,l=g,_=m;if("c"===v)_=y(t)+_,t="";else{var x=(t=+t)<0;if(t=y(Math.abs(t),p),x&&0==+t&&(x=!1),l=(x?"("===c?c:"-":"-"===c||"("===c?"":c)+l,_=_+("s"===v?tv[8+Cp/3]:"")+(x&&"("===c?")":""),b)for(e=-1,r=t.length;++e<r;)if(48>(a=t.charCodeAt(e))||a>57){_=(46===a?i+t.slice(e+1):t.slice(e))+_,t=t.slice(0,e);break}}d&&!f&&(t=n(t,1/0));var w=l.length+t.length+_.length,M=w<h?new Array(h-w+1).join(u):"";switch(d&&f&&(t=n(M+t,M.length?h-_.length:1/0),M=""),s){case"<":t=l+t+_+M;break;case"=":t=l+M+t+_;break;case"^":t=M.slice(0,w=M.length>>1)+l+t+_+M.slice(w);break;default:t=M+l+t+_}return o(t)}var u=(t=bo(t)).fill,s=t.align,c=t.sign,l=t.symbol,f=t.zero,h=t.width,d=t.comma,p=t.precision,v=t.type,g="$"===l?r[0]:"#"===l&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",m="$"===l?r[1]:/[%p]/.test(v)?a:"",y=Vp[v],b=!v||/[defgprs%]/.test(v);return p=null==p?v?6:12:/[gprs]/.test(v)?Math.max(1,Math.min(21,p)):Math.max(0,Math.min(20,p)),e.toString=function(){return t+""},e}var n=t.grouping&&t.thousands?Hp(t.grouping,t.thousands):Qp,r=t.currency,i=t.decimal,o=t.numerals?Bp(t.numerals):Qp,a=t.percent||"%";return{format:e,formatPrefix:function(t,n){var r=e((t=bo(t),t.type="f",t)),i=3*Math.max(-8,Math.min(8,Math.floor(qp(n)/3))),o=Math.pow(10,-i),a=tv[8+i/3];return function(t){return r(o*t)+a}}}};!function(t){Zp=ev(t),Jp=Zp.format,Kp=Zp.formatPrefix}({decimal:".",thousands:",",grouping:[3],currency:["$",""]});var nv=function(t){return Math.max(0,-qp(Math.abs(t)))},rv=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(qp(e)/3)))-qp(Math.abs(t)))},iv=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,qp(e)-qp(t))+1},ov=function(t,e,n){var r,i=t[0],o=t[t.length-1],a=ke(i,o,null==e?10:e);switch((n=bo(null==n?",f":n)).type){case"s":var u=Math.max(Math.abs(i),Math.abs(o));return null!=n.precision||isNaN(r=rv(a,u))||(n.precision=r),Kp(n,u);case"":case"e":case"g":case"p":case"r":null!=n.precision||isNaN(r=iv(a,Math.max(Math.abs(i),Math.abs(o))))||(n.precision=r-("e"===n.type));break;case"f":case"%":null!=n.precision||isNaN(r=nv(a))||(n.precision=r-2*("%"===n.type))}return Jp(n)},av=function(t,e){var n,r=0,i=(t=t.slice()).length-1,o=t[r],a=t[i];return a<o&&(n=r,r=i,i=n,n=o,o=a,a=n),t[r]=e.floor(o),t[i]=e.ceil(a),t},uv=1e3,sv=60*uv,cv=60*sv,lv=24*cv,fv=7*lv,hv=30*lv,dv=365*lv,pv=function(t){return t.match(/.{6}/g).map(function(t){return"#"+t})},vv=pv("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),gv=pv("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"),mv=pv("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"),yv=pv("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5"),bv=wp(li(300,.5,0),li(-240,.5,1)),_v=wp(li(-100,.75,.35),li(80,1.5,.8)),xv=wp(li(260,.75,.35),li(80,1.5,.8)),wv=li(),Mv=function(t){(t<0||t>1)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return wv.h=360*t-100,wv.s=1.5-1.5*e,wv.l=.8-.9*e,wv+""},Ev=Ro(pv("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),kv=Ro(pv("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),Av=Ro(pv("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),Tv=Ro(pv("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921")),Cv=Object.freeze({scaleBand:co,scalePoint:function(){return lo(co().paddingInner(1))},scaleIdentity:Mo,scaleLinear:wo,scaleLog:No,scaleOrdinal:so,scaleImplicit:Rp,scalePow:Oo,scaleSqrt:function(){return Oo().exponent(.5)},scaleQuantile:zo,scaleQuantize:Do,scaleThreshold:$o,scaleTime:function(){return Io(Hh,qh,Uh,Fh,Rh,Ih,Lh,Dh,ed).domain([new Date(2e3,0,1),new Date(2e3,0,2)])},scaleUtc:function(){return Io(Qh,Kh,Gh,Vh,Wh,Bh,Lh,Dh,nd).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)])},schemeCategory10:vv,schemeCategory20b:gv,schemeCategory20c:mv,schemeCategory20:yv,interpolateCubehelixDefault:bv,interpolateRainbow:Mv,interpolateWarm:_v,interpolateCool:xv,interpolateViridis:Ev,interpolateMagma:kv,interpolateInferno:Av,interpolatePlasma:Tv,scaleSequential:Fo}),Sv=$p("visual",{options:{render:"svg",width:null,height:"70%",heightElement:null},initialise:function(t){if(!t)throw new Error("HTMLElement required by visual group");if(this.visualParent&&"container"!==this.visualParent.visualType)throw new Error("Visual parent can be a container only");this.select(t).select(".paper").node()||this.select(t).append("div").classed("paper",!0),Object.defineProperties(this,{element:{get:function(){return t}},paperElement:{get:function(){return this.sel.select(".paper")}},sel:{get:function(){return Ac(t)}},size:{get:function(){return[this.width,this.height]}}}),this.sel.classed("d3-visual",!0),this.layers=[],this.drawCount=0,zp.live.push(this),t.__visual__=this,this.visualParent&&this.visualParent.live.push(this)},activate:function(){this.layers.forEach(function(t){return t.activate()})},deactivate:function(){this.layers.forEach(function(t){return t.deactivate()})},getVisual:function(){return this},draw:function(t){if(this.drawing)return Ch(this.toString()+" already drawing"),this.drawing;this.drawCount?(this.drawCount++,this.clear()):(this.drawCount=1,this.fit());var e=this;return zp.events.call("before-draw",void 0,this),Promise.all(this.layers.map(function(e){return e.redraw(t)})).then(function(){delete e.drawing,zp.events.call("after-draw",void 0,e)},function(t){delete e.drawing,Ch("Could not draw "+e.toString()+": "+t)})},clear:function(){},addVisual:function(t){var e=Ls(t,"type"),n=zp.types[e];if(n)return new n(this.element,t,this);Ch('Cannot add visual "'+e+'", not available')},fit:function(){return this.resize(null,!0),this},resize:function(t,e){t||(t=Ji(this.element.parentNode||this.element,this.getModel()));var n=this.size;return(e||n[0]!==t.width||n[1]!==t.height)&&(e||nf('Resizing "'+this.toString()+'"'),this.width=t.width,this.height=t.height,this.paperElement.style("height",this.height+"px"),zp.events.call("resize",void 0,this),e||this.draw(!1)),this},paper:function(){var t=this.__paper,e=this.getModel().render;if(t&&t.paperType===e)return t;var n=zp.papers[e];if(!n)throw new Error("Unknown paper "+e);return t=new n(this),this.__paper=t,t},getPaperGroup:function(t){return this.paper().group(t)},destroy:function(){this.pop(this.visualParent),this.pop(zp)}});$s&&new MutationObserver(function(t){t.forEach(function(t){var e=t.removedNodes;e&&e.length&&e.forEach(function(t){t.querySelectorAll&&(t.__visual__?Uo.call(t):Ac(t).selectAll(".d3-visual").each(Uo))})})}).observe(document.documentElement,{childList:!0,subtree:!0});var Nv=function(t,e,n,r){return n.substring(0,e.length)!==e&&(n=""+e+n[0].toUpperCase()+n.substring(1)),r?t[n]:t[n]()},Pv=function(t,e){return(e.$events?e.$events.keys():Object.keys(e)).forEach(function(n){s(t[n])&&t[n](e[n])}),t},Ov=function(t){rf.visualPlugins&&(Xo(rf.visualPlugins),rf.visualPlugins=null);for(var e=[{},zv,Dv],n=1;n<arguments.length;++n)e.push(arguments[n]);return $p(t,Os.apply(void 0,e))},zv={initialise:function(t){var e=this.visualParent;if(void 0!==this.options.active?this.active=Ls(this.options,"active"):this.active=!0,e){if(!e.layers)throw new Error("visual parent of "+this.visualType+" does not have layers")}else this.visualParent=e=new Sv(t,this.options,null,this.model),this.model=e.model.$new(),this.options={};e.layers.push(this)},paper:function(){return this.visualParent.paper()},activate:function(t){return this.active||(this.active=!0,this.group().transition(this.model.uid).on("end",function(){t&&t()}).style("opacity",1)),this},deactivate:function(t){return this.active&&(this.active=!1,this.group().transition(this.model.uid).on("end",function(){t&&t()}).style("opacity",0)),this},getVisual:function(){return this.visualParent.getVisual()},group:function(t){var e=this.visualType+"-"+this.model.uid,n=this.visualParent.getPaperGroup(e);return t&&t!==this.visualType?this.paper().childGroup(n,t):n},translate:function(t,e){return s(t)?function(n){return"translate("+(t(n)||0)+", "+(e(n)||0)+")"}:"translate("+t+", "+e+")"},getScale:function(t){return u(t)&&(t={type:t}),Pv(Nv(Cv,"scale",t.type),t)},displayError:function(){}},Dv={draw:function(t){var e=this;if(this.drawing)return Ch(this.toString()+" already drawing"),this.drawing;var n=this,r=this.doDraw;if(this.paper().size(this.boundingBox(!0)),this.active){if(zp.events.call("before-draw",void 0,this),!1!==t||!this._drawArgs)return Promise.all([this.requires?oh.apply(void 0,this.requires):[],this.getData()]).then(function(t){delete n.drawing;var i=t[1];i&&((t=c(t[0])?t[0]:[t[0]]).unshift(i),e._drawArgs=t,r.apply(n,t),zp.events.call("after-draw",void 0,n))},function(t){delete n.drawing,Ch("Could not draw "+n.toString()+": "+t,t),e.displayError(t)});delete n.drawing,r.apply(n,this._drawArgs),zp.events.call("after-draw",void 0,n)}}},$v={initialise:function(){},transition:function(){},size:function(t){return this.sel.attr("width",t.width).attr("height",t.height),this},group:function(t,e){return this.childGroup(this.sel,t,e)},childGroup:function(t,e,n){e||(e="main");var r=t.selectAll("."+e).data([0]).enter().append("g").classed(e,!0);return n&&r.attr("transform",n).merge().attr("transform",n),t.select("."+e)},dim:function(t){return t}};Yo("svg",{initialise:function(t,e){e||t.model.uid;var n=t.paperElement.select("svg#"+e);return n.size()||(n=t.paperElement.append("svg").attr("id",e).classed(t.visualType,!0).style("position","absolute")),n.node()}}),Yo("div",{initialise:function(t){var e=t.model.uid,n=t.visualParent,r=n.paperElement.select("div#"+e);return r.size()||(r=n.paperElement.append("div").attr("id",e).classed(n.visualType,!0).style("position","absolute")),r.node()},size:function(t){return this.sel.style("width",t.width+"px").style("height",t.height+"px"),this},childGroup:function(t,e){return e||(e="main"),t.selectAll("."+e).data([0]).enter().append("div").classed(e,!0),t.select("."+e)}});sd.menu={display:!1,height:"8%",maxHeight:50,minHeight:20},zp.events.on("after-init.menu",function(t){"visual"===t.visualType&&t.getModel("menu").display&&(t.menu=t.sel.insert("nav",":first-child").classed("d3-nav navbar p-1",!0),t.menu.append("h4").classed("title",!0))}),zp.events.on("before-draw.menu",function(t){t&&t.menu&&qo(t)});var jv=r(),Lv=r();if(zp.options.dataContext={$format:function(t,e){var n=jv.get(t);return n||(n=Jp(t),jv.set(t,n)),n(e)},$formatTime:function(t,e){var n=Lv.get(t);return n||(n=ed(t),Lv.set(t,n)),n(e)}},zv.getData=function(){var t=this.model.data;return t?this.dataStore.getData(t):(Ch("Visual "+this.visualType+" without data name, cannot get data"),mf())},zv.getContext=function(t){return this.dataStore.model.$child(t)},zp.events.on("before-init.data",function(t){t.isViz&&(t.data=Ls(t.options,"data"))}),zp.events.on("after-init.data",function(t){Object.defineProperties(t,{dataStore:{get:function(){return t.model.root.dataStore}}}),t.isViz?Bo(t):Ho(t)}),zp.options.font={size:"3%",minSize:10,maxSize:20,stroke:"#333",family:null},zv.font=function(t,e){e=e||this.getModel("font");var n=this.getModel(),r=this.dim(e.size,t.height,e.minSize,e.maxSize);return n.fontSizeMultiplier&&(r*=n.fontSizeMultiplier),r},sd.resizeDelay||(sd.resizeDelay=200),$s){var Iv=lf(function(){zp.live.forEach(function(t){return t.resize()})},sd.resizeDelay);Ac(window).on("resize.visuals",Iv)}sd.title={text:null,size:"3%",minSize:15,maxSize:25,offset:["10%",0]},zp.events.on("before-init.title",function(t){var e=t.options.title;u(e)&&(t.options.title={text:e})}),zp.events.on("after-draw.title",function(t){var e=t.getModel("title"),n=t;if("visual"===n.visualType)delete n.__title;else{if(!t.isViz)return;n=t.visualParent}if(e.text)if(n.menu&&!n.__title)n.__title=e,Wo(n,e);else if(t.isViz){var r=t.boundingBox(!0),i=t.getModel("font"),o=e.stroke||i.stroke,a=t.font(r,e),u=t.group().selectAll("text.chartitle").data([e.text]),s=t.dim(e.offset[0],r.vizHeight),c=t.dim(e.offset[1],r.vizWidth),l=t.translate(r.margin.left+r.innerWidth/2+c,s);u.enter().append("text").classed("chartitle",!0).attr("transform",l).style("text-anchor","middle").style("font-size",a).style("fill",o).text(function(t){return t}).merge(u).transition().attr("transform",l).style("font-size",a).style("fill",o).text(function(t){return t})}});var Rv=["top","bottom","left","right"],Fv=["left","right"];sd.margin={top:20,bottom:20,left:20,right:20},sd.padding={top:0,bottom:0,left:0,right:0},zv.boundingBox=function(t){if(t&&Jo(this),!this.__boundingBox){var e=this.visualParent.width,n=this.visualParent.height,r=Zo(this.getModel("padding"),e,n),i=e-r.left-r.right,o=n-r.top-r.bottom,a=Zo(this.getModel("margin"),i,o),u=Rv.reduce(function(t,e){return t[e]=a[e]+r[e],t},{});this.__boundingBox={margin:a,padding:r,total:u,width:e,height:n,vizWidth:i,vizHeight:o,innerWidth:e-u.left-u.right,innerHeight:n-u.top-u.bottom,$nomargins:Ko}}return this.__boundingBox},zp.events.on("after-init.margin",function(t){t.margin=Go("margin",t),t.padding=Go("padding",t)}),zp.events.on("before-draw.margin",function(t){t.isViz&&Jo(t)});var Uv=Array.prototype.slice,Xv=function(t){return t},Yv=1,qv=2,Hv=3,Bv=4,Wv=1e-6,Vv=r({top:function(t){return oa(Yv,t)},bottom:function(t){return oa(Hv,t)},left:function(t){return oa(Bv,t)},right:function(t){return oa(qv,t)}}),Gv={ticks:5,tickSize:6,tickSizeOuter:null,rotate:null,ancor:"end",format:null,timeFormat:"%Y-%m-%d",stroke:"#333",hide:null,title:null,titleRotate:null,titleOffset:.7};zp.options.xAxis=Os({location:"bottom"},Gv),zp.options.yAxis=Os({location:"left"},Gv),zv.xAxis1=function(t,e,n,r){var i=this.getModel("xAxis"),o=aa(t,e,i,r),a=this.group("x-axis");this.applyTransform(a,this.translateAxis(t,n)),ua(a.transition(this.transition("x-axis")).call(o),i,e),i.title&&this.axisTitle(a,t,e,n,i)},zv.yAxis1=function(t,e,n,r){var i=this.getModel("yAxis"),o=aa(t,e,i,r),a=this.group("y-axis");this.applyTransform(a,this.translateAxis(t,n)),ua(a.transition(this.transition("x-axis")).call(o),i,e),i.title&&this.axisTitle(a,t,e,n,i)},zv.axis=function(t,e){return Vv.get(t)(e)},zv.axisTitle=function(t,e,n,r,i){var o=t.selectAll("text.title").data([i.title]),a=i.titleRotate||0,u=0,s=0;a||"right"!==e&&"left"!==e||(a=-90),"left"==e&&(u=-i.titleOffset*r.margin.left,s=r.innerHeight/2);var c="translate("+u+","+s+") rotate("+a+")",l=this.font(r);o.enter().append("text").classed("title",!0).attr("transform",c).style("text-anchor","middle").style("font-size",l).style("fill",i.stroke).text(function(t){return t}).merge(o).transition().attr("transform",c).style("font-size",l).style("fill",i.stroke).text(function(t){return t})},zv.translateAxis=function(t,e){return"top"===t||"left"===t?this.translate(e.margin.left,e.margin.top):"bottom"===t?this.translate(e.margin.left,e.margin.top+e.innerHeight):this.translate(e.margin.left+e.innerWidth,e.margin.top)};var Zv=Math.PI,Jv=2*Zv,Kv=Jv-1e-6;sa.prototype=ca.prototype={constructor:sa,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,o){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+o)},arcTo:function(t,e,n,r,i){t=+t,e=+e,n=+n,r=+r,i=+i;var o=this._x1,a=this._y1,u=n-t,s=r-e,c=o-t,l=a-e,f=c*c+l*l;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(f>1e-6)if(Math.abs(l*u-s*c)>1e-6&&i){var h=n-o,d=r-a,p=u*u+s*s,v=h*h+d*d,g=Math.sqrt(p),m=Math.sqrt(f),y=i*Math.tan((Zv-Math.acos((p+f-v)/(2*g*m)))/2),b=y/m,_=y/g;Math.abs(b-1)>1e-6&&(this._+="L"+(t+b*c)+","+(e+b*l)),this._+="A"+i+","+i+",0,0,"+ +(l*h>c*d)+","+(this._x1=t+_*u)+","+(this._y1=e+_*s)}else this._+="L"+(this._x1=t)+","+(this._y1=e);else;},arc:function(t,e,n,r,i,o){t=+t,e=+e;var a=(n=+n)*Math.cos(r),u=n*Math.sin(r),s=t+a,c=e+u,l=1^o,f=o?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+s+","+c:(Math.abs(this._x1-s)>1e-6||Math.abs(this._y1-c)>1e-6)&&(this._+="L"+s+","+c),n&&(f<0&&(f=f%Jv+Jv),f>Kv?this._+="A"+n+","+n+",0,1,"+l+","+(t-a)+","+(e-u)+"A"+n+","+n+",0,1,"+l+","+(this._x1=s)+","+(this._y1=c):f>1e-6&&(this._+="A"+n+","+n+",0,"+ +(f>=Zv)+","+l+","+(this._x1=t+n*Math.cos(i))+","+(this._y1=e+n*Math.sin(i))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};var Qv=function(t){return function(){return t}},tg=Math.abs,eg=Math.atan2,ng=Math.cos,rg=Math.max,ig=Math.min,og=Math.sin,ag=Math.sqrt,ug=1e-12,sg=Math.PI,cg=sg/2,lg=2*sg,fg=function(){function t(){var t,c,l=+e.apply(this,arguments),f=+n.apply(this,arguments),h=o.apply(this,arguments)-cg,d=a.apply(this,arguments)-cg,p=tg(d-h),v=d>h;if(s||(s=t=ca()),f<l&&(c=f,f=l,l=c),f>ug)if(p>lg-ug)s.moveTo(f*ng(h),f*og(h)),s.arc(0,0,f,h,d,!v),l>ug&&(s.moveTo(l*ng(d),l*og(d)),s.arc(0,0,l,d,h,v));else{var g,m,y=h,b=d,_=h,x=d,w=p,M=p,E=u.apply(this,arguments)/2,k=E>ug&&(i?+i.apply(this,arguments):ag(l*l+f*f)),A=ig(tg(f-l)/2,+r.apply(this,arguments)),T=A,C=A;if(k>ug){var S=fa(k/l*og(E)),N=fa(k/f*og(E));(w-=2*S)>ug?(S*=v?1:-1,_+=S,x-=S):(w=0,_=x=(h+d)/2),(M-=2*N)>ug?(N*=v?1:-1,y+=N,b-=N):(M=0,y=b=(h+d)/2)}var P=f*ng(y),O=f*og(y),z=l*ng(x),D=l*og(x);if(A>ug){var $=f*ng(b),j=f*og(b),L=l*ng(_),I=l*og(_);if(p<sg){var R=w>ug?ma(P,O,L,I,$,j,z,D):[z,D],F=P-R[0],U=O-R[1],X=$-R[0],Y=j-R[1],q=1/og(la((F*X+U*Y)/(ag(F*F+U*U)*ag(X*X+Y*Y)))/2),H=ag(R[0]*R[0]+R[1]*R[1]);T=ig(A,(l-H)/(q-1)),C=ig(A,(f-H)/(q+1))}}M>ug?C>ug?(g=ya(L,I,P,O,f,C,v),m=ya($,j,z,D,f,C,v),s.moveTo(g.cx+g.x01,g.cy+g.y01),C<A?s.arc(g.cx,g.cy,C,eg(g.y01,g.x01),eg(m.y01,m.x01),!v):(s.arc(g.cx,g.cy,C,eg(g.y01,g.x01),eg(g.y11,g.x11),!v),s.arc(0,0,f,eg(g.cy+g.y11,g.cx+g.x11),eg(m.cy+m.y11,m.cx+m.x11),!v),s.arc(m.cx,m.cy,C,eg(m.y11,m.x11),eg(m.y01,m.x01),!v))):(s.moveTo(P,O),s.arc(0,0,f,y,b,!v)):s.moveTo(P,O),l>ug&&w>ug?T>ug?(g=ya(z,D,$,j,l,-T,v),m=ya(P,O,L,I,l,-T,v),s.lineTo(g.cx+g.x01,g.cy+g.y01),T<A?s.arc(g.cx,g.cy,T,eg(g.y01,g.x01),eg(m.y01,m.x01),!v):(s.arc(g.cx,g.cy,T,eg(g.y01,g.x01),eg(g.y11,g.x11),!v),s.arc(0,0,l,eg(g.cy+g.y11,g.cx+g.x11),eg(m.cy+m.y11,m.cx+m.x11),v),s.arc(m.cx,m.cy,T,eg(m.y11,m.x11),eg(m.y01,m.x01),!v))):s.arc(0,0,l,x,_,v):s.lineTo(z,D)}else s.moveTo(0,0);if(s.closePath(),t)return s=null,t+""||null}var e=ha,n=da,r=Qv(0),i=null,o=pa,a=va,u=ga,s=null;return t.centroid=function(){var t=(+e.apply(this,arguments)+ +n.apply(this,arguments))/2,r=(+o.apply(this,arguments)+ +a.apply(this,arguments))/2-sg/2;return[ng(r)*t,og(r)*t]},t.innerRadius=function(n){return arguments.length?(e="function"==typeof n?n:Qv(+n),t):e},t.outerRadius=function(e){return arguments.length?(n="function"==typeof e?e:Qv(+e),t):n},t.cornerRadius=function(e){return arguments.length?(r="function"==typeof e?e:Qv(+e),t):r},t.padRadius=function(e){return arguments.length?(i=null==e?null:"function"==typeof e?e:Qv(+e),t):i},t.startAngle=function(e){return arguments.length?(o="function"==typeof e?e:Qv(+e),t):o},t.endAngle=function(e){return arguments.length?(a="function"==typeof e?e:Qv(+e),t):a},t.padAngle=function(e){return arguments.length?(u="function"==typeof e?e:Qv(+e),t):u},t.context=function(e){return arguments.length?(s=null==e?null:e,t):s},t};ba.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};var hg=function(t){return new ba(t)},dg=function(){function t(t){var u,s,c,l=t.length,f=!1;for(null==i&&(a=o(c=ca())),u=0;u<=l;++u)!(u<l&&r(s=t[u],u,t))===f&&((f=!f)?a.lineStart():a.lineEnd()),f&&a.point(+e(s,u,t),+n(s,u,t));if(c)return a=null,c+""||null}var e=_a,n=xa,r=Qv(!0),i=null,o=hg,a=null;return t.x=function(n){return arguments.length?(e="function"==typeof n?n:Qv(+n),t):e},t.y=function(e){return arguments.length?(n="function"==typeof e?e:Qv(+e),t):n},t.defined=function(e){return arguments.length?(r="function"==typeof e?e:Qv(!!e),t):r},t.curve=function(e){return arguments.length?(o=e,null!=i&&(a=o(i)),t):o},t.context=function(e){return arguments.length?(null==e?i=a=null:a=o(i=e),t):i},t},pg=function(){function t(t){var e,l,f,h,d,p=t.length,v=!1,g=new Array(p),m=new Array(p);for(null==u&&(c=s(d=ca())),e=0;e<=p;++e){if(!(e<p&&a(h=t[e],e,t))===v)if(v=!v)l=e,c.areaStart(),c.lineStart();else{for(c.lineEnd(),c.lineStart(),f=e-1;f>=l;--f)c.point(g[f],m[f]);c.lineEnd(),c.areaEnd()}v&&(g[e]=+n(h,e,t),m[e]=+i(h,e,t),c.point(r?+r(h,e,t):g[e],o?+o(h,e,t):m[e]))}if(d)return c=null,d+""||null}function e(){return dg().defined(a).curve(s).context(u)}var n=_a,r=null,i=Qv(0),o=xa,a=Qv(!0),u=null,s=hg,c=null;return t.x=function(e){return arguments.length?(n="function"==typeof e?e:Qv(+e),r=null,t):n},t.x0=function(e){return arguments.length?(n="function"==typeof e?e:Qv(+e),t):n},t.x1=function(e){return arguments.length?(r=null==e?null:"function"==typeof e?e:Qv(+e),t):r},t.y=function(e){return arguments.length?(i="function"==typeof e?e:Qv(+e),o=null,t):i},t.y0=function(e){return arguments.length?(i="function"==typeof e?e:Qv(+e),t):i},t.y1=function(e){return arguments.length?(o=null==e?null:"function"==typeof e?e:Qv(+e),t):o},t.lineX0=t.lineY0=function(){return e().x(n).y(i)},t.lineY1=function(){return e().x(n).y(o)},t.lineX1=function(){return e().x(r).y(i)},t.defined=function(e){return arguments.length?(a="function"==typeof e?e:Qv(!!e),t):a},t.curve=function(e){return arguments.length?(s=e,null!=u&&(c=s(u)),t):s},t.context=function(e){return arguments.length?(null==e?u=c=null:c=s(u=e),t):u},t},vg=function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN},gg=function(t){return t},mg=function(){function t(t){var u,s,c,l,f,h=t.length,d=0,p=new Array(h),v=new Array(h),g=+i.apply(this,arguments),m=Math.min(lg,Math.max(-lg,o.apply(this,arguments)-g)),y=Math.min(Math.abs(m)/h,a.apply(this,arguments)),b=y*(m<0?-1:1);for(u=0;u<h;++u)(f=v[p[u]=u]=+e(t[u],u,t))>0&&(d+=f);for(null!=n?p.sort(function(t,e){return n(v[t],v[e])}):null!=r&&p.sort(function(e,n){return r(t[e],t[n])}),u=0,c=d?(m-h*b)/d:0;u<h;++u,g=l)s=p[u],l=g+((f=v[s])>0?f*c:0)+b,v[s]={data:t[s],index:u,value:f,startAngle:g,endAngle:l,padAngle:y};return v}var e=gg,n=vg,r=null,i=Qv(0),o=Qv(lg),a=Qv(0);return t.value=function(n){return arguments.length?(e="function"==typeof n?n:Qv(+n),t):e},t.sortValues=function(e){return arguments.length?(n=e,r=null,t):n},t.sort=function(e){return arguments.length?(r=e,n=null,t):r},t.startAngle=function(e){return arguments.length?(i="function"==typeof e?e:Qv(+e),t):i},t.endAngle=function(e){return arguments.length?(o="function"==typeof e?e:Qv(+e),t):o},t.padAngle=function(e){return arguments.length?(a="function"==typeof e?e:Qv(+e),t):a},t},yg=Array.prototype.slice,bg={draw:function(t,e){var n=Math.sqrt(e/sg);t.moveTo(n,0),t.arc(0,0,n,0,lg)}},_g=Math.sin(sg/10)/Math.sin(7*sg/10),xg=Math.sin(lg/10)*_g,wg=-Math.cos(lg/10)*_g,Mg={draw:function(t,e){var n=Math.sqrt(.8908130915292852*e),r=xg*n,i=wg*n;t.moveTo(0,-n),t.lineTo(r,i);for(var o=1;o<5;++o){var a=lg*o/5,u=Math.cos(a),s=Math.sin(a);t.lineTo(s*n,-u*n),t.lineTo(u*r-s*i,s*r+u*i)}t.closePath()}},Eg={draw:function(t,e){var n=Math.sqrt(e),r=-n/2;t.rect(r,r,n,n)}},kg=function(){function t(){var t;if(r||(r=t=ca()),e.apply(this,arguments).draw(r,+n.apply(this,arguments)),t)return r=null,t+""||null}var e=Qv(bg),n=Qv(64),r=null;return t.type=function(n){return arguments.length?(e="function"==typeof n?n:Qv(n),t):e},t.size=function(e){return arguments.length?(n="function"==typeof e?e:Qv(+e),t):n},t.context=function(e){return arguments.length?(r=null==e?null:e,t):r},t},Ag=function(){};Ma.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:wa(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:wa(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};Ea.prototype={areaStart:Ag,areaEnd:Ag,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:wa(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};ka.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:wa(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};Aa.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var r,i=t[0],o=e[0],a=t[n]-i,u=e[n]-o,s=-1;++s<=n;)r=s/n,this._basis.point(this._beta*t[s]+(1-this._beta)*(i+r*a),this._beta*e[s]+(1-this._beta)*(o+r*u));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};var Tg=function t(e){function n(t){return 1===e?new Ma(t):new Aa(t,e)}return n.beta=function(e){return t(+e)},n}(.85);Ca.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Ta(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:Ta(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Cg=function t(e){function n(t){return new Ca(t,e)}return n.tension=function(e){return t(+e)},n}(0);Sa.prototype={areaStart:Ag,areaEnd:Ag,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Ta(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Sg=function t(e){function n(t){return new Sa(t,e)}return n.tension=function(e){return t(+e)},n}(0);Na.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Ta(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Ng=function t(e){function n(t){return new Na(t,e)}return n.tension=function(e){return t(+e)},n}(0);Oa.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:Pa(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Pg=function t(e){function n(t){return e?new Oa(t,e):new Ca(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);za.prototype={areaStart:Ag,areaEnd:Ag,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Pa(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Og=function t(e){function n(t){return e?new za(t,e):new Sa(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);Da.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Pa(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var zg=function t(e){function n(t){return e?new Da(t,e):new Na(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);$a.prototype={areaStart:Ag,areaEnd:Ag,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};Fa.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Ra(this,this._t0,Ia(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,t!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,Ra(this,Ia(this,n=La(this,t,e)),n);break;default:Ra(this,this._t0,n=La(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(Ua.prototype=Object.create(Fa.prototype)).point=function(t,e){Fa.prototype.point.call(this,e,t)},Xa.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,o){this._context.bezierCurveTo(e,t,r,n,o,i)}},Ya.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),2===n)this._context.lineTo(t[1],e[1]);else for(var r=qa(t),i=qa(e),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],t[a],e[a]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};var Dg=function(t){return new Ya(t)},$g=function(t,e){if((i=t.length)>1)for(var n,r,i,o=1,a=t[e[0]],u=a.length;o<i;++o)for(r=a,a=t[e[o]],n=0;n<u;++n)a[n][1]+=a[n][0]=isNaN(r[n][1])?r[n][0]:r[n][1]},jg=function(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n},Lg=function(){function t(t){var o,a,u=e.apply(this,arguments),s=t.length,c=u.length,l=new Array(c);for(o=0;o<c;++o){for(var f,h=u[o],d=l[o]=new Array(s),p=0;p<s;++p)d[p]=f=[0,+i(t[p],h,p,t)],f.data=t[p];d.key=h}for(o=0,a=n(l);o<c;++o)l[a[o]].index=o;return r(l,a),l}var e=Qv([]),n=jg,r=$g,i=Ha;return t.keys=function(n){return arguments.length?(e="function"==typeof n?n:Qv(yg.call(n)),t):e},t.value=function(e){return arguments.length?(i="function"==typeof e?e:Qv(+e),t):i},t.order=function(e){return arguments.length?(n=null==e?jg:"function"==typeof e?e:Qv(yg.call(e)),t):n},t.offset=function(e){return arguments.length?(r=null==e?$g:e,t):r},t},Ig=function(t){var e=t.map(Ba);return jg(t).sort(function(t,n){return e[t]-e[n]})},Rg=r({circle:bg,square:Eg,star:Mg}),Fg=r({ascending:Ig,descending:function(t){return Ig(t).reverse()},insideout:function(t){var e,n,r=t.length,i=t.map(Ba),o=jg(t).sort(function(t,e){return i[e]-i[t]}),a=0,u=0,s=[],c=[];for(e=0;e<r;++e)n=o[e],a<u?(a+=i[n],s.push(n)):(u+=i[n],c.push(n));return c.reverse().concat(s)},none:jg,reverse:function(t){return jg(t).reverse()}}),Ug=r({expand:function(t,e){if((r=t.length)>0){for(var n,r,i,o=0,a=t[0].length;o<a;++o){for(i=n=0;n<r;++n)i+=t[n][o][1]||0;if(i)for(n=0;n<r;++n)t[n][o][1]/=i}$g(t,e)}},diverging:function(t,e){if((u=t.length)>1)for(var n,r,i,o,a,u,s=0,c=t[e[0]].length;s<c;++s)for(o=a=0,n=0;n<u;++n)(i=(r=t[e[n]][s])[1]-r[0])>=0?(r[0]=o,r[1]=o+=i):i<0?(r[1]=a,r[0]=a+=i):r[0]=o},none:$g,silhouette:function(t,e){if((n=t.length)>0){for(var n,r=0,i=t[e[0]],o=i.length;r<o;++r){for(var a=0,u=0;a<n;++a)u+=t[a][r][1]||0;i[r][1]+=i[r][0]=-u/2}$g(t,e)}},wiggle:function(t,e){if((i=t.length)>0&&(r=(n=t[e[0]]).length)>0){for(var n,r,i,o=0,a=1;a<r;++a){for(var u=0,s=0,c=0;u<i;++u){for(var l=t[e[u]],f=l[a][1]||0,h=(f-(l[a-1][1]||0))/2,d=0;d<u;++d){var p=t[e[d]];h+=(p[a][1]||0)-(p[a-1][1]||0)}s+=f,c+=h*f}n[a-1][1]+=n[a-1][0]=o,s&&(o-=c/s)}n[a-1][1]+=n[a-1][0]=o,$g(t,e)}}});zv.getSymbol=function(t){var e=Rg.get(t);return kg().type(e)},zv.getStack=function(){var t=this.getModel();if(t.stack){var e=Lg();return t.stackOrder&&e.order(Fg.get(t.stackOrder)),t.stackOffset&&e.offset(Ug.get(t.stackOffset)),e}return null};var Xg=r();sd.color={scale:"cool",scaleMinPoints:6,scaleOffset:0,stroke:"#333",strokeOpacity:1,fillOpacity:1},Xg.set("viridis",function(){return Fo(Ev)}),Xg.set("inferno",function(){return Fo(Av)}),Xg.set("magma",function(){return Fo(kv)}),Xg.set("plasma",function(){return Fo(Tv)}),Xg.set("warm",function(){return Fo(_v)}),Xg.set("cool",function(){return Fo(xv)}),Xg.set("rainbow",function(){return Fo(Mv)}),Xg.set("cubehelix",function(){return Fo(bv)}),zv.colors=function(t,e){var n=this.getModel("color"),r=!1,i=void 0,o=void 0;if(c(n.scale))o=this.getScale("ordinal").range(n.scale);else{if(!(i=Xg.get(n.scale)))throw new Error("Unknown scale "+n.scale);a(i)||(i={scale:i}),void 0===i.minPoints&&(i.minPoints=n.scaleMinPoints),o=i.scale(),r=i.reversed}if(s(o.interpolator)){var u=n.scaleOffset,l=t+u,f=Math.max(l,i.minPoints),h=r?[f-1,0]:[0,f-1];o.domain(h);var d=void 0;return Wl(u,Math.min(l,f)).map(function(t){return d=Hr(o(t)),d.opacity=e,d})}var p=o.range().slice();r&&p.reverse();for(var v=void 0,g=void 0,m=void 0,y=0;y<n.scaleOffset;++y)p.push(p.shift());return Wl(t).map(function(){return v=p.shift(),g=Hr(v),m=Hr(v),g.opacity=e,p.push(""+m.brighter(.2)),g})},zv.fill=function(t){function e(t,e){return i[e]}var n=this.getModel("color"),r=this.modelProperty("fillOpacity",n),i=this.colors(t.length,r);return e.colors=i,e},zv.stroke=function(t){function e(t,e){return i[e]}var n=this.getModel("color"),r=this.modelProperty("strokeOpacity",n),i=this.colors(t.length,r);return e.colors=i,e},zv.linearGradient=function(t,e,n,r){var i=this.paper().sel,o=i.select("defs");o.node()||(o=i.append("defs"));var a=o.selectAll("#"+r).data([0]),u=Hr(t);u.opacity=.1,a.enter().append("linearGradient").attr("id",r).attr("x1","0%").attr("y1","0%").attr("x2","vertical"===n?"0%":"100%").attr("y2","vertical"===n?"100%":"0%");var s=o.select("#"+r).selectAll("stop").data([{offset:"0%",color:t},{offset:"100%",color:u}]);return s.enter().append("stop").merge(s).attr("offset",function(t){return t.offset}).attr("stop-color",function(t){return t.color}),"url(#"+r+")"};var Yg="http://www.w3.org/1999/xhtml",qg={svg:"http://www.w3.org/2000/svg",xhtml:Yg,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Hg=function(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),qg.hasOwnProperty(e)?{space:qg[e],local:t}:t},Bg=function(t){var e=Hg(t);return(e.local?Va:Wa)(e)},Wg=function(t){return function(){return this.matches(t)}};if("undefined"!=typeof document){var Vg=document.documentElement;if(!Vg.matches){var Gg=Vg.webkitMatchesSelector||Vg.msMatchesSelector||Vg.mozMatchesSelector||Vg.oMatchesSelector;Wg=function(t){return function(){return Gg.call(this,t)}}}}var Zg=Wg,Jg={};"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(Jg={mouseenter:"mouseover",mouseleave:"mouseout"}));var Kg=function(t){return null==t?tu:function(){return this.querySelector(t)}},Qg=function(t){return null==t?eu:function(){return this.querySelectorAll(t)}},tm=function(t){return new Array(t.length)};nu.prototype={constructor:nu,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var em=function(t){return function(){return t}},nm="$",rm=function(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView};_u.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var im=[null];Ru.prototype=function(){return new Ru([[document.documentElement]],im)}.prototype={constructor:Ru,select:function(t){"function"!=typeof t&&(t=Kg(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a,u=e[i],s=u.length,c=r[i]=new Array(s),l=0;l<s;++l)(o=u[l])&&(a=t.call(o,o.__data__,l,u))&&("__data__"in o&&(a.__data__=o.__data__),c[l]=a);return new Ru(r,this._parents)},selectAll:function(t){"function"!=typeof t&&(t=Qg(t));for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var a,u=e[o],s=u.length,c=0;c<s;++c)(a=u[c])&&(r.push(t.call(a,a.__data__,c,u)),i.push(a));return new Ru(r,i)},filter:function(t){"function"!=typeof t&&(t=Zg(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a=e[i],u=a.length,s=r[i]=[],c=0;c<u;++c)(o=a[c])&&t.call(o,o.__data__,c,a)&&s.push(o);return new Ru(r,this._parents)},data:function(t,e){if(!t)return d=new Array(this.size()),c=-1,this.each(function(t){d[++c]=t}),d;var n=e?iu:ru,r=this._parents,i=this._groups;"function"!=typeof t&&(t=em(t));for(var o=i.length,a=new Array(o),u=new Array(o),s=new Array(o),c=0;c<o;++c){var l=r[c],f=i[c],h=f.length,d=t.call(l,l&&l.__data__,c,r),p=d.length,v=u[c]=new Array(p),g=a[c]=new Array(p);n(l,f,v,g,s[c]=new Array(h),d,e);for(var m,y,b=0,_=0;b<p;++b)if(m=v[b]){for(b>=_&&(_=b+1);!(y=g[_])&&++_<p;);m._next=y||null}}return a=new Ru(a,r),a._enter=u,a._exit=s,a},enter:function(){return new Ru(this._enter||this._groups.map(tm),this._parents)},exit:function(){return new Ru(this._exit||this._groups.map(tm),this._parents)},merge:function(t){for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),a=new Array(r),u=0;u<o;++u)for(var s,c=e[u],l=n[u],f=c.length,h=a[u]=new Array(f),d=0;d<f;++d)(s=c[d]||l[d])&&(h[d]=s);for(;u<r;++u)a[u]=e[u];return new Ru(a,this._parents)},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],o=i.length-1,a=i[o];--o>=0;)(r=i[o])&&(a&&a!==r.nextSibling&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(t){t||(t=ou);for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i){for(var o,a=e[i],u=a.length,s=r[i]=new Array(u),c=0;c<u;++c)(o=a[c])&&(s[c]=o);s.sort(function(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n})}return new Ru(r,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),e=-1;return this.each(function(){t[++e]=this}),t},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null},size:function(){var t=0;return this.each(function(){++t}),t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,o=e[n],a=0,u=o.length;a<u;++a)(i=o[a])&&t.call(i,i.__data__,a,o);return this},attr:function(t,e){var n=Hg(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?uu:au:"function"==typeof e?n.local?fu:lu:n.local?cu:su)(n,e))},style:function(t,e,n){var r;return arguments.length>1?this.each((null==e?hu:"function"==typeof e?pu:du)(t,e,null==n?"":n)):rm(r=this.node()).getComputedStyle(r,null).getPropertyValue(t)},property:function(t,e){return arguments.length>1?this.each((null==e?vu:"function"==typeof e?mu:gu)(t,e)):this.node()[t]},classed:function(t,e){var n=yu(t+"");if(arguments.length<2){for(var r=bu(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof e?ku:e?Mu:Eu)(n,e))},text:function(t){return arguments.length?this.each(null==t?Au:("function"==typeof t?Cu:Tu)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?Su:("function"==typeof t?Pu:Nu)(t)):this.node().innerHTML},raise:function(){return this.each(Ou)},lower:function(){return this.each(zu)},append:function(t){var e="function"==typeof t?t:Bg(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},insert:function(t,e){var n="function"==typeof t?t:Bg(t),r=null==e?Du:"function"==typeof e?e:Kg(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function(){return this.each($u)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var r,i,o=Ja(t+""),a=o.length;{if(!(arguments.length<2)){for(u=e?Qa:Ka,null==n&&(n=!1),r=0;r<a;++r)this.each(u(o[r],e,n));return this}var u=this.node().__on;if(u)for(var s,c=0,l=u.length;c<l;++c)for(r=0,s=u[c];r<a;++r)if((i=o[r]).type===s.type&&i.name===s.name)return s.value}},dispatch:function(t,e){return this.each(("function"==typeof e?Iu:Lu)(t,e))}};var om=function(t){return"string"==typeof t?new Ru([[document.querySelector(t)]],[document.documentElement]):new Ru([[t]],im)},am={value:function(){}};Uu.prototype=Fu.prototype={constructor:Uu,on:function(t,e){var n,r=this._,i=Xu(t+"",r),o=-1,a=i.length;{if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++o<a;)if(n=(t=i[o]).type)r[n]=qu(r[n],t.name,e);else if(null==e)for(n in r)r[n]=qu(r[n],t.name,null);return this}for(;++o<a;)if((n=(t=i[o]).type)&&(n=Yu(r[n],t.name)))return n}},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Uu(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,n=(r=this._[t]).length;o<n;++o)r[o].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};var um,sm=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN},cm=function(t){return 1===t.length&&(t=Hu(t)),{left:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)<0?r=o+1:i=o}return r},right:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)>0?i=o:r=o+1}return r}}}(sm).right,lm=Math.sqrt(50),fm=Math.sqrt(10),hm=Math.sqrt(2),dm=function(t,e,n){var r,i,o,a,u=-1;if(e=+e,t=+t,n=+n,t===e&&n>0)return[t];if((r=e<t)&&(i=t,t=e,e=i),0===(a=Bu(t,e,n))||!isFinite(a))return[];if(a>0)for(t=Math.ceil(t/a),e=Math.floor(e/a),o=new Array(i=Math.ceil(e-t+1));++u<i;)o[u]=(t+u)*a;else for(t=Math.floor(t*a),e=Math.ceil(e*a),o=new Array(i=Math.ceil(t-e+1));++u<i;)o[u]=(t-u)/a;return r&&o.reverse(),o},pm=Array.prototype,vm=pm.map,gm=pm.slice,mm=function(t){return function(){return t}},ym=function(t){return+t},bm=[0,1],_m=function(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]},xm=function(t){return(t=_m(Math.abs(t)))?t[1]:NaN},wm=function(t,e){return function(n,r){for(var i=n.length,o=[],a=0,u=t[0],s=0;i>0&&u>0&&(s+u+1>r&&(u=Math.max(1,r-s)),o.push(n.substring(i-=u,i+u)),!((s+=u+1)>r));)u=t[a=(a+1)%t.length];return o.reverse().join(e)}},Mm=function(t){return function(e){return e.replace(/[0-9]/g,function(e){return t[+e]})}},Em=function(t,e){var n=_m(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")},km={"":function(t,e){t:for(var n,r=(t=t.toPrecision(e)).length,i=1,o=-1;i<r;++i)switch(t[i]){case".":o=n=i;break;case"0":0===o&&(o=i),n=i;break;case"e":break t;default:o>0&&(o=0)}return o>0?t.slice(0,o)+t.slice(n+1):t},"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return Em(100*t,e)},r:Em,s:function(t,e){var n=_m(t,e);if(!n)return t+"";var r=n[0],i=n[1],o=i-(um=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+_m(t,Math.max(0,e+o-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}},Am=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i;es.prototype=ns.prototype,ns.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+this.type};var Tm,Cm,Sm,Nm=function(t){return t},Pm=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"],Om=function(t){function e(t){function e(t){var e,r,a,l=g,_=m;if("c"===v)_=y(t)+_,t="";else{var x=(t=+t)<0;if(t=y(Math.abs(t),p),x&&0==+t&&(x=!1),l=(x?"("===c?c:"-":"-"===c||"("===c?"":c)+l,_=_+("s"===v?Pm[8+um/3]:"")+(x&&"("===c?")":""),b)for(e=-1,r=t.length;++e<r;)if(48>(a=t.charCodeAt(e))||a>57){_=(46===a?i+t.slice(e+1):t.slice(e))+_,t=t.slice(0,e);break}}d&&!f&&(t=n(t,1/0));var w=l.length+t.length+_.length,M=w<h?new Array(h-w+1).join(u):"";switch(d&&f&&(t=n(M+t,M.length?h-_.length:1/0),M=""),s){case"<":t=l+t+_+M;break;case"=":t=l+M+t+_;break;case"^":t=M.slice(0,w=M.length>>1)+l+t+_+M.slice(w);break;default:t=M+l+t+_}return o(t)}var u=(t=es(t)).fill,s=t.align,c=t.sign,l=t.symbol,f=t.zero,h=t.width,d=t.comma,p=t.precision,v=t.type,g="$"===l?r[0]:"#"===l&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",m="$"===l?r[1]:/[%p]/.test(v)?a:"",y=km[v],b=!v||/[defgprs%]/.test(v);return p=null==p?v?6:12:/[gprs]/.test(v)?Math.max(1,Math.min(21,p)):Math.max(0,Math.min(20,p)),e.toString=function(){return t+""},e}var n=t.grouping&&t.thousands?wm(t.grouping,t.thousands):Nm,r=t.currency,i=t.decimal,o=t.numerals?Mm(t.numerals):Nm,a=t.percent||"%";return{format:e,formatPrefix:function(t,n){var r=e((t=es(t),t.type="f",t)),i=3*Math.max(-8,Math.min(8,Math.floor(xm(n)/3))),o=Math.pow(10,-i),a=Pm[8+i/3];return function(t){return r(o*t)+a}}}};!function(t){Tm=Om(t),Cm=Tm.format,Sm=Tm.formatPrefix}({decimal:".",thousands:",",grouping:[3],currency:["$",""]});var zm=function(t){return Math.max(0,-xm(Math.abs(t)))},Dm=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(xm(e)/3)))-xm(Math.abs(t)))},$m=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,xm(e)-xm(t))+1},jm=function(t,e,n){var r,i=t[0],o=t[t.length-1],a=Wu(i,o,null==e?10:e);switch((n=es(null==n?",f":n)).type){case"s":var u=Math.max(Math.abs(i),Math.abs(o));return null!=n.precision||isNaN(r=Dm(a,u))||(n.precision=r),Sm(n,u);case"":case"e":case"g":case"p":case"r":null!=n.precision||isNaN(r=$m(a,Math.max(Math.abs(i),Math.abs(o))))||(n.precision=r-("e"===n.type));break;case"f":case"%":null!=n.precision||isNaN(r=zm(a))||(n.precision=r-2*("%"===n.type))}return Cm(n)},Lm=function(t){return t.match(/.{6}/g).map(function(t){return"#"+t})};Lm("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Lm("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"),Lm("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"),Lm("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5"),wp(li(300,.5,0),li(-240,.5,1));wp(li(-100,.75,.35),li(80,1.5,.8)),wp(li(260,.75,.35),li(80,1.5,.8)),li();os(Lm("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));os(Lm("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),os(Lm("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),os(Lm("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));var Im,Rm=function(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]},Fm=function(t){return(t=Rm(Math.abs(t)))?t[1]:NaN},Um=function(t,e){return function(n,r){for(var i=n.length,o=[],a=0,u=t[0],s=0;i>0&&u>0&&(s+u+1>r&&(u=Math.max(1,r-s)),o.push(n.substring(i-=u,i+u)),!((s+=u+1)>r));)u=t[a=(a+1)%t.length];return o.reverse().join(e)}},Xm=function(t,e){var n=Rm(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")},Ym={"":function(t,e){t:for(var n,r=(t=t.toPrecision(e)).length,i=1,o=-1;i<r;++i)switch(t[i]){case".":o=n=i;break;case"0":0===o&&(o=i),n=i;break;case"e":break t;default:o>0&&(o=0)}return o>0?t.slice(0,o)+t.slice(n+1):t},"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return Xm(100*t,e)},r:Xm,s:function(t,e){var n=Rm(t,e);if(!n)return t+"";var r=n[0],i=n[1],o=i-(Im=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+Rm(t,Math.max(0,e+o-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}},qm=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i,Hm=function(t){return new as(t)};as.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+this.type};var Bm,Wm,Vm=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"],Gm=function(t){function e(t){function e(t){var e,r,s,y=p,b=v;if("c"===d)b=g(t)+b,t="";else{var _=((t=+t)<0||1/t<0)&&(t*=-1,!0);if(t=g(t,h),_)for(e=-1,r=t.length,_=!1;++e<r;)if(48<(s=t.charCodeAt(e))&&s<58||"x"===d&&96<s&&s<103||"X"===d&&64<s&&s<71){_=!0;break}if(y=(_?"("===u?u:"-":"-"===u||"("===u?"":u)+y,b=b+("s"===d?Vm[8+Im/3]:"")+(_&&"("===u?")":""),m)for(e=-1,r=t.length;++e<r;)if(48>(s=t.charCodeAt(e))||s>57){b=(46===s?i+t.slice(e+1):t.slice(e))+b,t=t.slice(0,e);break}}f&&!c&&(t=n(t,1/0));var x=y.length+t.length+b.length,w=x<l?new Array(l-x+1).join(o):"";switch(f&&c&&(t=n(w+t,w.length?l-b.length:1/0),w=""),a){case"<":return y+t+b+w;case"=":return y+w+t+b;case"^":return w.slice(0,x=w.length>>1)+y+t+b+w.slice(x)}return w+y+t+b}var o=(t=Hm(t)).fill,a=t.align,u=t.sign,s=t.symbol,c=t.zero,l=t.width,f=t.comma,h=t.precision,d=t.type,p="$"===s?r[0]:"#"===s&&/[boxX]/.test(d)?"0"+d.toLowerCase():"",v="$"===s?r[1]:/[%p]/.test(d)?"%":"",g=Ym[d],m=!d||/[defgprs%]/.test(d);return h=null==h?d?6:12:/[gprs]/.test(d)?Math.max(1,Math.min(21,h)):Math.max(0,Math.min(20,h)),e.toString=function(){return t+""},e}var n=t.grouping&&t.thousands?Um(t.grouping,t.thousands):us,r=t.currency,i=t.decimal;return{format:e,formatPrefix:function(t,n){var r=e((t=Hm(t),t.type="f",t)),i=3*Math.max(-8,Math.min(8,Math.floor(Fm(n)/3))),o=Math.pow(10,-i),a=Vm[8+i/3];return function(t){return r(o*t)+a}}}};!function(t){Bm=Gm(t),Wm=Bm.format}({decimal:".",thousands:",",grouping:[3],currency:["$",""]});var Zm=function(t,e){var n,r,i=-1,o=t.length;if(null==e){for(;++i<o;)if(null!=(r=t[i])&&r>=r){n=r;break}for(;++i<o;)null!=(r=t[i])&&r>n&&(n=r)}else{for(;++i<o;)if(null!=(r=e(t[i],i,t))&&r>=r){n=r;break}for(;++i<o;)null!=(r=e(t[i],i,t))&&r>n&&(n=r)}return n},Jm=function(t,e){var n,r=0,i=t.length,o=-1;if(null==e)for(;++o<i;)(n=+t[o])&&(r+=n);else for(;++o<i;)(n=+e(t[o],o,t))&&(r+=n);return r},Km="function"==typeof Symbol&&"symbol"===Vs(Symbol.iterator)?function(t){return void 0===t?"undefined":Vs(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":void 0===t?"undefined":Vs(t)},Qm=function(t){return t},ty=function(t){for(var e=[],n=0,r=t.length;n<r;n++)e[n]=t[r-n-1];return e},ey=function(t,e){t.each(function(){for(var t,n=om(this),r=n.text().split(/\s+/).reverse(),i=[],o=(n.attr("y"),parseFloat(n.attr("dy"))||0),a=n.text(null).append("tspan").attr("x",0).attr("dy",o+"em");t=r.pop();)i.push(t),a.text(i.join(" ")),a.node().getComputedTextLength()>e&&i.length>1&&(i.pop(),a.text(i.join(" ")),i=[t],a=n.append("tspan").attr("x",0).attr("dy",1.2+o+"em").text(t))})},ny=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments[1],n=arguments[2],r=arguments[3];if("object"===(void 0===e?"undefined":Km(e))){if(0===e.length)return t;for(var i=e.length;i<t.length;i++)e.push(t[i]);return e}if("function"==typeof e){for(var o=[],a=t.length,u=0;u<a;u++)o.push(e({i:u,genLength:a,generatedLabels:t,domain:n,range:r}));return o}return t},ry=function(t,e,n){var r=[];if(e.length>1)r=e;else for(var i=t.domain(),o=(i[i.length-1]-i[0])/(e-1),a=0;a<e;a++)r.push(i[0]+a*o);return{data:r,labels:r.map(n),feature:function(e){return t(e)}}},iy=function(t,e,n){var r=t.range().map(function(r){var i=t.invertExtent(r);return e(i[0])+" "+n+" "+e(i[1])});return{data:t.range(),labels:r,feature:Qm}},oy=function(t){return{data:t.domain(),labels:t.domain(),feature:function(e){return t(e)}}},ay=function(t,e,n){t.call("cellover",n,e)},uy=function(t,e,n){t.call("cellout",n,e)},sy=function(t,e,n){t.call("cellclick",n,e)},cy={d3_drawShapes:function(t,e,n,r,i,o){"rect"===t?e.attr("height",n).attr("width",r):"circle"===t?e.attr("r",i):"line"===t?e.attr("x1",0).attr("x2",r).attr("y1",0).attr("y2",0):"path"===t&&e.attr("d",o)},d3_addText:function(t,e,n,r,i){e.append("text").attr("class",r+"label");var o=t.selectAll("g."+r+"cell text."+r+"label").data(n).text(Qm);return i&&t.selectAll("g."+r+"cell text."+r+"label").call(ey,i),o},d3_calcType:function(t,e,n,r,i,o){var a=t.invertExtent?iy(t,i,o):t.ticks?ry(t,n,i):oy(t),u=t.range&&t.range()||t.domain();return a.labels=ny(a.labels,r,t.domain(),u),e&&(a.labels=ty(a.labels),a.data=ty(a.data)),a},d3_filterCells:function(t,e){var n=t.data.map(function(e,n){return{data:e,label:t.labels[n]}}).filter(e),r=n.map(function(t){return t.data}),i=n.map(function(t){return t.label});return t.data=t.data.filter(function(t){return-1!==r.indexOf(t)}),t.labels=t.labels.filter(function(t){return-1!==i.indexOf(t)}),t},d3_placement:function(t,e,n,r,i,o){e.attr("transform",n),r.attr("transform",i),"horizontal"===t&&r.style("text-anchor",o)},d3_addEvents:function(t,e){t.on("mouseover.legend",function(t){ay(e,t,this)}).on("mouseout.legend",function(t){uy(e,t,this)}).on("click.legend",function(t){sy(e,t,this)})},d3_title:function(t,e,n,r){if(""!==e){t.selectAll("text."+n+"legendTitle").data([e]).enter().append("text").attr("class",n+"legendTitle"),t.selectAll("text."+n+"legendTitle").text(e),r&&t.selectAll("text."+n+"legendTitle").call(ey,r);var i=t.select("."+n+"legendCells"),o=t.select("."+n+"legendTitle").nodes().map(function(t){return t.getBBox().height})[0],a=-i.nodes().map(function(t){return t.getBBox().x})[0];i.attr("transform","translate("+a+","+o+")")}}};sd.legend={location:"top-right",orient:"vertical",fontSize:"3%",title:"",titleWidth:"20%",labelFormat:null,titleMinWidth:30,titleMaxWidth:60,minFontSize:10,maxFontSize:20,offset:[10,10],shapeWidth:15,shapeHeight:15,hide:300};var ly={color:function(){function t(t){var M=cy.d3_calcType(e,b,u,c,d,g);t.selectAll("g").data([e]).enter().append("g").attr("class",l+"legendCells"),s&&cy.d3_filterCells(M,s);var E=t.select("."+l+"legendCells").selectAll("."+l+"cell").data(M.data),k=E.enter().append("g").attr("class",l+"cell");k.append(n).attr("class",l+"swatch");var A=t.selectAll("g."+l+"cell "+n);cy.d3_addEvents(k,w),E.exit().transition().style("opacity",0).remove(),cy.d3_drawShapes(n,A,i,r,o,_),cy.d3_addText(t,k,M.labels,l,m);var T=(E=k.merge(E)).selectAll("text"),C=T.nodes().map(function(t){return t.getBBox()}),S=A.nodes().map(function(t){return t.getBBox()});f?A.attr("class",function(t){return l+"swatch "+M.feature(t)}):"line"==n?A.style("stroke",M.feature):A.style("fill",M.feature);var N=void 0,P=void 0,O="start"==v?0:"middle"==v?.5:1;"vertical"===y?function(){var t=C.map(function(t,e){return Math.max(t.height,S[e].height)});N=function(e,n){return"translate(0, "+(Jm(t.slice(0,n))+n*a)+")"},P=function(t,e){return"translate( "+(S[e].width+S[e].x+p)+", "+(S[e].y+S[e].height/2+5)+")"}}():"horizontal"===y&&(N=function(t,e){return"translate("+e*(S[e].width+a)+",0)"},P=function(t,e){return"translate("+(S[e].width*O+S[e].x)+",\n          "+(S[e].height+S[e].y+p+8)+")"}),cy.d3_placement(y,E,N,T,P,v),cy.d3_title(t,h,l,x),E.transition().style("opacity",1)}var e=is(),n="rect",r=15,i=15,o=10,a=2,u=[5],s=void 0,c=[],l="",f=!1,h="",d=Wm(".01f"),p=10,v="middle",g="to",m=void 0,y="vertical",b=!1,_=void 0,x=void 0,w=Fu("cellover","cellout","cellclick");return t.scale=function(n){return arguments.length?(e=n,t):e},t.cells=function(e){return arguments.length?((e.length>1||e>=2)&&(u=e),t):u},t.cellFilter=function(e){return arguments.length?(s=e,t):s},t.shape=function(e,r){return arguments.length?(("rect"==e||"circle"==e||"line"==e||"path"==e&&"string"==typeof r)&&(n=e,_=r),t):n},t.shapeWidth=function(e){return arguments.length?(r=+e,t):r},t.shapeHeight=function(e){return arguments.length?(i=+e,t):i},t.shapeRadius=function(e){return arguments.length?(o=+e,t):o},t.shapePadding=function(e){return arguments.length?(a=+e,t):a},t.labels=function(e){return arguments.length?(c=e,t):c},t.labelAlign=function(e){return arguments.length?("start"!=e&&"end"!=e&&"middle"!=e||(v=e),t):v},t.labelFormat=function(e){return arguments.length?(d="string"==typeof e?Wm(e):e,t):d},t.labelOffset=function(e){return arguments.length?(p=+e,t):p},t.labelDelimiter=function(e){return arguments.length?(g=e,t):g},t.labelWrap=function(e){return arguments.length?(m=e,t):m},t.useClass=function(e){return arguments.length?(!0!==e&&!1!==e||(f=e),t):f},t.orient=function(e){return arguments.length?("horizontal"!=(e=e.toLowerCase())&&"vertical"!=e||(y=e),t):y},t.ascending=function(e){return arguments.length?(b=!!e,t):b},t.classPrefix=function(e){return arguments.length?(l=e,t):l},t.title=function(e){return arguments.length?(h=e,t):h},t.titleWidth=function(e){return arguments.length?(x=e,t):x},t.textWrap=function(e){return arguments.length?(textWrap=e,t):textWrap},t.on=function(){var e=w.on.apply(w,arguments);return e===w?t:e},t},size:function(){function t(t){var _=cy.d3_calcType(e,g,o,u,l,d),x=t.selectAll("g").data([e]);a&&cy.d3_filterCells(_,a),x.enter().append("g").attr("class",s+"legendCells");var w=t.select("."+s+"legendCells").selectAll("."+s+"cell").data(_.data),M=w.enter().append("g").attr("class",s+"cell");M.append(n).attr("class",s+"swatch");var E=t.selectAll("g."+s+"cell "+n);cy.d3_addEvents(M,b),w.exit().transition().style("opacity",0).remove(),"line"===n?(cy.d3_drawShapes(n,E,0,r),E.attr("stroke-width",_.feature)):cy.d3_drawShapes(n,E,_.feature,_.feature,_.feature,m);var k=cy.d3_addText(t,M,_.labels,s,p);w=M.merge(w);var A=k.nodes().map(function(t){return t.getBBox()}),T=E.nodes().map(function(t,r){var i=t.getBBox(),o=e(_.data[r]);return"line"===n&&"horizontal"===v?i.height=i.height+o:"line"===n&&"vertical"===v&&(i.width=i.width),i}),C=Zm(T,function(t){return t.height+t.y}),S=Zm(T,function(t){return t.width+t.x}),N=void 0,P=void 0,O="start"==h?0:"middle"==h?.5:1;"vertical"===v?function(){var t=A.map(function(t,e){return Math.max(t.height,T[e].height)}),e="circle"==n||"line"==n?T[0].height/2:0;N=function(n,r){var o=Jm(t.slice(0,r));return"translate(0, "+(e+o+r*i)+")"},P=function(t,e){return"translate( "+(S+f)+",\n          "+(T[e].y+T[e].height/2+5)+")"}}():"horizontal"===v&&(N=function(t,e){return"translate("+(Jm(T.slice(0,e),function(t){return t.width})+e*i)+", "+("circle"==n||"line"==n?C/2:0)+")"},P=function(t,e){return"translate( "+(T[e].width*O+T[e].x)+",\n              "+(C+f)+")"}),cy.d3_placement(v,w,N,k,P,h),cy.d3_title(t,c,s,y),w.transition().style("opacity",1)}var e=is(),n="rect",r=15,i=2,o=[5],a=void 0,u=[],s="",c="",l=Wm(".01f"),f=10,h="middle",d="to",p=void 0,v="vertical",g=!1,m=void 0,y=void 0,b=Fu("cellover","cellout","cellclick");return t.scale=function(n){return arguments.length?(e=n,t):e},t.cells=function(e){return arguments.length?((e.length>1||e>=2)&&(o=e),t):o},t.cellFilter=function(e){return arguments.length?(a=e,t):a},t.shape=function(e,r){return arguments.length?("rect"!=e&&"circle"!=e&&"line"!=e||(n=e,m=r),t):n},t.shapeWidth=function(e){return arguments.length?(r=+e,t):r},t.shapePadding=function(e){return arguments.length?(i=+e,t):i},t.labels=function(e){return arguments.length?(u=e,t):u},t.labelAlign=function(e){return arguments.length?("start"!=e&&"end"!=e&&"middle"!=e||(h=e),t):h},t.labelFormat=function(e){return arguments.length?(l="string"==typeof e?Wm(e):e,t):l},t.labelOffset=function(e){return arguments.length?(f=+e,t):f},t.labelDelimiter=function(e){return arguments.length?(d=e,t):d},t.labelWrap=function(e){return arguments.length?(p=e,t):p},t.orient=function(e){return arguments.length?("horizontal"!=(e=e.toLowerCase())&&"vertical"!=e||(v=e),t):v},t.ascending=function(e){return arguments.length?(g=!!e,t):g},t.classPrefix=function(e){return arguments.length?(s=e,t):s},t.title=function(e){return arguments.length?(c=e,t):c},t.titleWidth=function(e){return arguments.length?(y=e,t):y},t.on=function(){var e=b.on.apply(b,arguments);return e===b?t:e},t},symbol:function(){function t(t){var x=cy.d3_calcType(e,y,u,c,h,v),w=t.selectAll("g").data([e]);s&&cy.d3_filterCells(x,s),w.enter().append("g").attr("class",l+"legendCells");var M=t.select("."+l+"legendCells").selectAll("."+l+"cell").data(x.data),E=M.enter().append("g").attr("class",l+"cell");E.append(n).attr("class",l+"swatch");var k=t.selectAll("g."+l+"cell "+n);cy.d3_addEvents(E,_),M.exit().transition().style("opacity",0).remove(),cy.d3_drawShapes(n,k,i,r,o,x.feature),cy.d3_addText(t,E,x.labels,l,g);var A=(M=E.merge(M)).selectAll("text"),T=A.nodes().map(function(t){return t.getBBox()}),C=k.nodes().map(function(t){return t.getBBox()}),S=Zm(C,function(t){return t.height}),N=Zm(C,function(t){return t.width}),P=void 0,O=void 0,z="start"==d?0:"middle"==d?.5:1;"vertical"===m?function(){var t=T.map(function(t,e){return Math.max(S,t.height)});P=function(e,n){return"translate(0, "+(Jm(t.slice(0,n))+n*a)+" )"},O=function(t,e){return"translate( "+(N+p)+",\n              "+(C[e].y+C[e].height/2+5)+")"}}():"horizontal"===m&&(P=function(t,e){return"translate( "+e*(N+a)+",0)"},O=function(t,e){return"translate( "+(C[e].width*z+C[e].x)+",\n              "+(S+p)+")"}),cy.d3_placement(m,M,P,A,O,d),cy.d3_title(t,f,l,b),M.transition().style("opacity",1)}var e=is(),n="path",r=15,i=15,o=10,a=5,u=[5],s=void 0,c=[],l="",f="",h=Wm(".01f"),d="middle",p=10,v="to",g=void 0,m="vertical",y=!1,b=void 0,_=Fu("cellover","cellout","cellclick");return t.scale=function(n){return arguments.length?(e=n,t):e},t.cells=function(e){return arguments.length?((e.length>1||e>=2)&&(u=e),t):u},t.cellFilter=function(e){return arguments.length?(s=e,t):s},t.shapePadding=function(e){return arguments.length?(a=+e,t):a},t.labels=function(e){return arguments.length?(c=e,t):c},t.labelAlign=function(e){return arguments.length?("start"!=e&&"end"!=e&&"middle"!=e||(d=e),t):d},t.labelFormat=function(e){return arguments.length?(h="string"==typeof e?Wm(e):e,t):h},t.labelOffset=function(e){return arguments.length?(p=+e,t):p},t.labelDelimiter=function(e){return arguments.length?(v=e,t):v},t.labelWrap=function(e){return arguments.length?(g=e,t):g},t.orient=function(e){return arguments.length?("horizontal"!=(e=e.toLowerCase())&&"vertical"!=e||(m=e),t):m},t.ascending=function(e){return arguments.length?(y=!!e,t):y},t.classPrefix=function(e){return arguments.length?(l=e,t):l},t.title=function(e){return arguments.length?(f=e,t):f},t.titleWidth=function(e){return arguments.length?(b=e,t):b},t.on=function(){var e=_.on.apply(_,arguments);return e===_?t:e},t}};zv.legend=function(t,e){var n=this.getModel(),r=this.getModel("legend"),i=this.getModel("font"),o=Ls(t,"type")||n.legendType,a=Math.max(e.vizHeight,e.vizWidth),u=this.dim(r.fontSize,a,r.minFontSize,r.maxFontSize),s=ly[o];if(r.location){if(!s)return Ch("Could not load legend "+o);if(s=s().orient(r.orient),r.title&&(s.title(r.title),r.titleWidth)){var c=this.dim(r.titleWidth,a,r.titleMinWidth,r.titleMaxWidth);s.titleWidth(c)}r.labelFormat&&s.labelFormat(r.labelFormat),s.shapeWidth(r.shapeWidth).shapeHeight(r.shapeHeight);for(var l in t)s[l](t[l]);var f=this.group("legend").style("font-size",u+"px").html("").call(s),h=f.node().getBBox(),d=fy.get(r.location).call(this,h,e,r),p=this.translate(d.x,d.y);f.selectAll("text").style("fill",r.stroke||i.stroke),this.applyTransform(f,p),r.hide&&(a<r.hide?f.style("opacity",0):f.style("opacity",1))}};var fy=r({top:function(t,e,n){var r=this.dim(n.offset[1],e.vizHeight);return{x:e.margin.left+(e.innerWidth-t.width)/2,y:r}},bottom:function(t,e,n){var r=this.dim(n.offset[1],e.vizHeight);return{x:e.margin.left+(e.innerWidth-t.width)/2,y:e.vizHeight-t.height-r}},right:function(t,e,n){var r=this.dim(n.offset[0],e.vizWidth);return{x:e.vizWidth-t.width-r,y:e.margin.top+(e.innerHeight-t.height)/2}},left:function(t,e,n){var r=this.dim(n.offset[0],e.vizWidth);return{x:e.margin.left-r,y:e.margin.top+(e.innerHeight-t.height)/2}},"top-left":function(t,e,n){var r=this.dim(n.offset[0],e.vizWidth),i=this.dim(n.offset[1],e.vizHeight);return{x:e.margin.left+(e.innerWidth-t.width)/2+r,y:i}},"top-right":function(t,e,n){var r=this.dim(n.offset[0],e.vizWidth),i=this.dim(n.offset[1],e.vizHeight);return{x:e.vizWidth-t.width-r,y:i}},"bottom-left":function(t,e,n){var r=this.dim(n.offset[0],e.vizWidth),i=this.dim(n.offset[1],e.vizHeight);return{x:t.width+r,y:e.vizHeight-t.height-i}},"bottom-right":function(t,e,n){var r=this.dim(n.offset[0],e.vizWidth),i=this.dim(n.offset[1],e.vizHeight);return{x:e.vizWidth-t.width-r,y:e.vizHeight-t.height-i}}}),hy=function(t){return function(){return t}},dy=function(t){return s(t)?t:hy(t)},py=function(t){return t},vy=r({darker:function(){function t(t,e){var n=t.getModel("mouse"),r=Hr(e.style("fill")),i=r.darker(n.darkerFactor);e.node().__mouse_over__.fill=r,e.style("fill",i)}return t.out=function(t,e){var n=e.node().__mouse_over__.fill;n&&e.style("fill",n)},t}(),fill:function(){function t(t,e){var n=t.getModel("mouse"),r=Hr(e.style("fill"));e.node().__mouse_over__.fill=r,e.transition().style("fill",n.fillColor)}return t.out=function(t,e){var n=e.node().__mouse_over__.fill;n&&e.transition().style("fill",n)},t}()});zp.options.mouse={over:["darker"],darkerFactor:.5,fillColor:"#addd8e"},zv.mouseOver=function(){var t=this,e=this.getModel("mouse");return function(n,r){this.__mouse_over__||(this.__mouse_over__={});var i=t.select(this),o=void 0;e.over.forEach(function(e){(o=vy.get(e))?o(t,i,n,r):Ch("Unknown mouse strategy "+e)})}},zv.mouseOut=function(){var t=this,e=this.getModel("mouse");return function(n,r){this.__mouse_over__||(this.__mouse_over__={});var i=t.select(this),o=void 0;e.over.forEach(function(e){(o=vy.get(e))?o.out(t,i,n,r):Ch("Unknown mouse strategy "+e)})}},zp.options.tooltip={location:"top",offset:[10,10],html:""},zv.tooltip=$s?function(){function t(){return null===u&&(u=Ac(document.body).append("div").classed("d3-tooltip",!0).style("position","absolute").style("top",0).style("opacity",0).style("pointer-events","none").style("box-sizing","border-box").node(),s=Ac(document.body).append("svg").style("opacity",0).style("pointer-events","none").node().createSVGPoint()),Ac(u)}function e(){}function n(t){for(;null==t.getScreenCTM&&null==t.parentNode;)t=t.parentNode;var e={},n=t.getScreenCTM(),r=t.getBBox(),i=r.width,o=r.height,a=r.x,u=r.y;return s.x=a,s.y=u,e.nw=s.matrixTransform(n),s.x+=i,e.ne=s.matrixTransform(n),s.y+=o,e.se=s.matrixTransform(n),s.x-=i,e.sw=s.matrixTransform(n),s.y-=o/2,e.w=s.matrixTransform(n),s.x+=i,e.e=s.matrixTransform(n),s.x-=i/2,s.y-=o/2,e.n=s.matrixTransform(n),s.y+=o,e.s=s.matrixTransform(n),e}var i=dy("top"),o=dy([0,0]),a=dy(" "),u=null,s=null,c=r({top:function(t,e){var r=n(t);return{left:r.n.x-u.offsetWidth/2,top:r.n.y-u.offsetHeight-e[1]}},bottom:function(t,e,n){return{top:e.total.left+(e.innerWidth-t.width)/2,left:e.height-t.height-n.offsetY}},right:function(t,e){var r=n(t);return{left:r.e.x+e[0],top:r.e.y-u.offsetHeight/2}},left:function(t,e,n){return{x:e.total.left+(e.innerWidth-t.width)/2,y:n.offsetY}},"top-left":function(t,e,n){return{x:e.total.left+(e.innerWidth-t.width)/2,y:n.offsetY}},"top-right":function(t,e,n){return{x:e.width-t.width-n.offsetX,y:n.offsetY}},"bottom-left":function(t,e,n){return{x:e.total.left+(e.innerWidth-t.width)/2,y:e.height-t.height-n.offsetY}},"bottom-right":function(t,e,n){return{x:e.total.left+(e.innerWidth-t.width)/2,y:e.height-t.height-n.offsetY}}}),l=c.keys();return e.show=function(n){var r,u=Array.prototype.slice.call(arguments),s=t(),f=a.apply(this,u)||"",h=o.apply(this,u),d=i.apply(this,u),p=document.documentElement.scrollTop||document.body.scrollTop,v=document.documentElement.scrollLeft||document.body.scrollLeft;s.html(f).style("opacity",1).style("pointer-events","all");for(var g=l.length;g--;)s.classed(l[g],!1);return r=c.get(d).call(this,n,h),s.classed(d,!0).style("top",r.top+p+"px").style("left",r.left+v+"px"),e},e.hide=function(){return t().style("opacity",0).style("pointer-events","none"),e},e.location=function(t){return arguments.length?(i=null===t?t:dy(t),e):i},e.html=function(t){return arguments.length?(a=null===t?t:dy(t),e):a},e.offset=function(t){return arguments.length?(o=null==t?t:dy(t),e):o},e}():py,vy.set("tooltip",function(){function t(t,e,n,r){var i=t.tooltipHtml(e,n,r);if(i){var o=t.getModel("tooltip");t.tooltip.location(o.location).offset(o.offset).html(i).show(e.node())}}return t.out=function(t){t.tooltip.hide()},t}()),zv.tooltipHtml=function(t,e,n){var r=this.getModel("tooltip");if(r.html)return this.dataStore.eval(r.html,{d:e,index:n,model:this.getModel()})},zp.options.expand={location:"top-right",expandText:"expand",collapseText:"collapse",height:15,width:15,radius:3,offset:[0,0],stroke:"#adadad",fill:"#fff",fillOver:"#e6e6e6",textColor:"#111"},zp.events.on("after-draw.expand",function(t){function e(){t.select(this).select("rect.button").attr("fill",r.fill)}var n=t.visualParent;if(t.isViz&&!(n.layers.length<=1)){var r=t.getModel("expand");if(t.__expanded||r.location&&ss(t.getModel("padding"))){var i=t.getModel("font"),o=t.boundingBox(),a=t.group("expand"),u=a.node(),s=Math.floor(.8*Math.min(r.width,r.height)),c=t.__expanded?r.collapseText:r.expandText,l=!1;a.select("rect").size()||(l=!0,a.attr("cursor","pointer").on("mouseover",function(){t.select(this).select("rect.button").attr("fill",r.fillOver)}).on("mouseout",e),a.append("rect").classed("button",!0).attr("x",0).attr("y",0).attr("rx",r.radius).attr("ry",r.radius).attr("width",r.width).attr("height",r.height).attr("stroke",r.stroke).attr("fill",r.fill).attr("cursor","pointer"),a.append("text").attr("x",r.width/2).attr("y",r.height/2).attr("fill",r.textColor).attr("font-family",r.fontFamily||i.family).attr("text-anchor","middle").attr("alignment-baseline","middle").attr("font-size",s),a.append("rect").classed("placeholder",!0).attr("x",0).attr("y",0).attr("rx",r.radius).attr("ry",r.radius).attr("width",r.width).attr("height",r.height).attr("stroke","none").attr("fill","transparent").on("click",function(){var r=t.getModel("padding");if(e.call(this),t.__expanded){var i=t.__expanded.padding;delete t.__expanded,n.activate(),Rv.forEach(function(t){i[t]&&(r[t]=i[t])})}else t.__expanded={padding:Rv.reduce(function(t,e){return r[e]&&(t[e]=r[e],r[e]=0),t},{})},n.deactivate(),t.activate();n.redraw(!1)})),a.select("text").text(function(){return c});var f=fy.get(r.location).call(t,u.getBBox(),o,r);l||(a=a.transition(t.transition("expand"))),a.attr("transform",t.translate(f.x,f.y))}}}),zp.options.transition={duration:250,delay:0,ease:null},zv.transition=function(t){var e=this.idname(t),n=this.getModel("transition");return Wi(e).duration(n.duration)},zv.applyTransform=function(t,e){t.attr("transform")||t.attr("transform",e),t.transition().attr("transform",e)};var gy=function(){vc.preventDefault(),vc.stopImmediatePropagation()},my=function(t){var e=t.document.documentElement,n=Ac(t).on("dragstart.drag",gy,!0);"onselectstart"in e?n.on("selectstart.drag",gy,!0):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")};(function(t,e,n,r,i,o,a,u,s,c){this.target=t,this.type=e,this.subject=n,this.identifier=r,this.active=i,this.x=o,this.y=a,this.dx=u,this.dy=s,this._=c}).prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};var yy=function(t){return function(){return t}},by=function(t,e,n){this.target=t,this.type=e,this.selection=n},_y=function(){vc.preventDefault(),vc.stopImmediatePropagation()},xy={name:"drag"},wy={name:"space"},My={name:"handle"},Ey={name:"center"},ky={name:"x",handles:["e","w"].map(fs),input:function(t,e){return t&&[[t[0],e[0][1]],[t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},Ay={name:"y",handles:["n","s"].map(fs),input:function(t,e){return t&&[[e[0][0],t[0]],[e[1][0],t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},Ty={name:"xy",handles:["n","e","s","w","nw","ne","se","sw"].map(fs),input:function(t){return t},output:function(t){return t}},Cy={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Sy={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},Ny={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},Py={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},Oy={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1},zy=function(){return ys(Ty)};zv.brushX=function(){return gs()},zv.brushY=function(){return ms()},zv.brush=function(){return zy()};var Dy=$p("container",{initialise:function(){this.live=[],this.visualParent&&this.visualParent.live.push(this)},draw:function(t){if(this.drawing)return Ch(this.toString()+" already drawing"),this.drawing;var e=this;return zp.events.call("before-draw",void 0,e),Promise.all(this.live.map(function(e){return e.redraw(t)})).then(function(){delete e.drawing,zp.events.call("after-draw",void 0,e)})},destroy:function(){this.pop(this.visualParent)}}),$y={props:["schema","datasource","plugins"],render:function(t,e,n){var r=this,i=this.select(n).html();return this.getSchema(t.schema,function(t){return a(t)||(t={}),r.build(t,i,e)})},getSchema:function(t,e){var n=this.model.visual;if(n&&n!==this.model&&u(t)){var r=n.getVisualSchema(t);r&&(t=r)}return u(t)?this.json(t).then(e).catch(function(e){Ch("Could not reach "+t+": "+e)}):e(t)},build:function(){}},jy=Os({},$y,{build:function(t,e,n){var r=this.model,i=this.createElement("div"),o=r.root;return n.class&&i.attr("class",n.class),t.visuals||(t.visuals={}),r.visual=new Dy(i.node(),t,r.visual,r.visual?null:r.$new()),o.visualDashboard||(o.visualDashboard=r.visual),i.html(e)}}),Ly=Os({},$y,{build:function(t,e,n){var r,i=this.createElement("div"),o=t.type||"visual",a=this.model,u=Ls(t,"visualDrawOnMount"),s={};return n.class&&i.attr("class",n.class),"visual"===o?(r=Ls(t,"layers"),s=t):s.visual=Ls(t,"visual")||{},void 0!==u&&(a.visualDrawOnMount=u),a.visual=new Sv(i.node(),s,a.visual,a.visual?null:a.$new()),"visual"!==o?a.visual.addVisual(t):r&&r.forEach(function(t){return a.visual.addVisual(t)}),i},mounted:function(){!1!==this.model.visualDrawOnMount&&this.model.visual.redraw()}}),Iy={install:function(t){t.addComponent("dashboard",jy),t.addComponent("visual",Ly)}},Ry=function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN},Fy=function(){function t(t){var o=void 0,a=void 0,u=void 0,s=void 0,c=void 0,l=void 0,f=void 0,h=void 0,d=void 0,p=void 0,v=void 0,g=t.length,m=.5*i/r,y=new Array(g),b=new Array(g);for(o=0;o<g;++o)y[b[o]=o]=+e(t[o],o,t);for(b.sort(function(t,e){return Ry(y[t],y[e])}),d=y[b[0]],l=null,o=g-1;o>=0;--o)s=[],null===l?s.push([0,0]):(f=(h=l+p)*m,s.push([f,h]),s.push([-f,h])),a=b[o],u=g-o-1,c=y[a]/d,v=Math.sqrt(c),f=(h=(l=r*v)-(p=o?n(v,u):0))*m,s.push([-f,h]),s.push([f,h]),y[a]={index:u,value:y[a],fraction:c,points:s,data:t[a]};return y}var e=py,n=hy(0),r=1,i=1;return t.value=function(n){return arguments.length?(e="function"==typeof n?n:hy(+n),t):e},t.base=function(e){return arguments.length?(i=e,t):i},t.height=function(e){return arguments.length?(r=e,t):r},t.pad=function(e){return arguments.length?(n="function"==typeof e?e:hy(+e),t):n},t},Uy=function(t,e){var n=t[0],r=(t[1]-n)/e,i=Math.floor(Math.log10(r)),o=Math.pow(10,i);r/o>5&&(o*=10);var a=(o*=.1)*Math.ceil(r/o),u=o*Math.floor(n/o);return[u,u+e*a]},Xy=function(t,e,n){return.299*(t=Hr(t)).r+.587*t.g+.114*t.b>186?n||"#000":e||"#fff"},Yy=function(t,e,n){e=dy(e),t.each(function(t,r){var i=Ac(this),o=parseFloat(i.attr("dy"))||0,a=e(t,r),u=i.text().split("\n"),s=void 0,c=void 0,l=void 0,f=i.text(null).append("tspan").attr("x",0).attr("dy",o+"em");u.forEach(function(t,e){for(l=[],c=t.split(/\s+/).reverse(),e&&(f=i.append("tspan").attr("x",0).attr("dy",1.2+o+"em"));s=c.pop();)l.push(s),f.text(l.join(" ")),f.node().getComputedTextLength()>a&&l.length>1&&(l.pop(),f.text(l.join(" ")),l=[s],f=i.append("tspan").attr("x",0).attr("dy",1.2+o+"em").text(s))}),n&&i.selectAll("tspan").each(n)})},qy=function(){function t(t){var u=!1,s=void 0,c=void 0,l=void 0;return e&&(c=t.dimension(e).group().top(1/0).map(function(t){return t.key})).length<=1&&(c=null),c?(t=t.pivot(n,e,r),i&&(t=t.sortby("total")),s=t.data,o&&(a&&(s=_s(s)),s=o.keys(c)(s),u=!0)):(s=t.data,c=[r]),u||(s=c.map(function(t,e){return l=s.map(function(e){return l=[0,e[t]],l.data=e,l}),l.index=e,l.key=t,l})),new bs(s,n,r,u)}var e=null,n="x",r="y",i=!1,o=null,a=!1;return t.groupby=function(n){return arguments.length?(e=n,t):e},t.x=function(e){return arguments.length?(n=e,t):n},t.y=function(e){return arguments.length?(r=e,t):r},t.normalize=function(e){return arguments.length?(a=e,t):a},t.stack=function(e){return arguments.length?(o=e,t):o},t};bs.prototype={rangeX:function(){return this.range(this.x)},rangeY:function(){return this.range()},range:function(t){function e(t){return t[0]}function n(t){return t[1]}function r(e){return e.data[t]}var i=void 0,o=void 0;return o=t?this.data.reduce(function(t,e){return i=Bl(e,r),t.push(i[0]),t.push(i[1]),t},[]):this.data.reduce(function(t,r){return i=Bl(r,e),t.push(i[0]),t.push(i[1]),i=Bl(r,n),t.push(i[0]),t.push(i[1]),t},[]),Bl(o)}};var Hy={curveBasisClosed:function(t){return new Ea(t)},curveBasisOpen:function(t){return new ka(t)},curveBasis:function(t){return new Ma(t)},curveBundle:Tg,curveCardinalClosed:Sg,curveCardinalOpen:Ng,curveCardinal:Cg,curveCatmullRomClosed:Og,curveCatmullRomOpen:zg,curveCatmullRom:Pg,curveLinearClosed:function(t){return new $a(t)},curveLinear:hg,curveMonotoneX:function(t){return new Fa(t)},curveMonotoneY:function(t){return new Ua(t)},curveNatural:Dg},By={curve:function(t){var e=Nv(Hy,"curve",t,!0);return e||(Ch('Could not locate curve type "'+t+'"'),e=Dg),e},range:function(t,e,n,r){var i={x:Bl(t,e),y:Bl(t,n)};r&&(Array.prototype.push.apply(r.x,i.x),Array.prototype.push.apply(r.y,i.y))},newRange:function(){return{x:[],y:[]}},x:function(t,e){var n=this.getModel(),r=this.getScale(n.scaleX).domain(Bl(e)).range([0,t.innerWidth]);return function(t){return r(t[n.x])}},y:function(t,e,n){var r=this.getModel(),i=this.getScale(r.scaleY).domain(Bl(e)).range([t.innerHeight,0]);return 2===arguments.length&&(n=function(t){return t[r.y]}),function(t){return i(n(t))}}};Ov("linechart",By,{options:{lineWidth:1,curve:"natural",x:"x",y:"y",groupby:null,scaleX:"linear",scaleY:"linear",axisX:!0,axisY:!0},doDraw:function(t){function e(t,e){return v[e]}var n=this.getModel(),r=n.x,i=n.y,o=this.boundingBox(),a=qy().groupby(n.groupby).x(r).y(i)(t),u=a.rangeX(),c=a.rangeY(),l=this.getScale(n.scaleX).domain(u).rangeRound([0,o.innerWidth]),f=this.getScale(n.scaleY).domain(c).rangeRound([o.innerHeight,0]).nice(),h=this.group(),d=this.group("chart"),p=d.selectAll(".line").data(a.data),v=this.stroke(a.data).colors,g=0,m=dg().x(function(t){return l(t.data[r])+g}).y(function(t){return f(t[1])}).curve(this.curve(n.curve));this.applyTransform(h,this.translate(o.padding.left,o.padding.top)),this.applyTransform(d,this.translate(o.margin.left,o.margin.top)),s(l.bandwidth)&&(l.domain(a.data[0].map(function(t){return t.data[r]})),g=l.bandwidth()/2),p.enter().append("path").attr("class","line").attr("fill","none").attr("stroke",e).attr("stroke-width",n.lineWidth).attr("d",m).merge(p).transition().attr("stroke",e).attr("stroke-width",n.lineWidth).attr("d",m),p.exit().transition().style("opacity",0).remove(),n.axisX&&this.xAxis1(!0===n.axisX?"bottom":n.axisX,f,o),n.axisY&&this.yAxis1(!0===n.axisY?"left":n.axisY,f,o)}});var Wy={center:"middle",top:"hanging",bottom:"baseline",outside:"baseline"},Vy={center:function(t,e){return e/2},top:function(t,e,n){return n},bottom:function(t,e,n){return e-n},outside:function(t,e,n){return-n}};Ov("barchart",By,{options:{orientation:"vertical",sortby:null,stack:!0,stackOrder:"descending",waffle:!1,normalize:!1,scaleX:{type:"band",padding:.2},scaleY:"linear",x:"x",y:"y",label:null,labelLocation:"center",labelOffset:10,labelWidth:.7,radius:0,groupby:null,axisY:!0,axisX:!0,valueformat:".1f",legendType:"color",legendLabel:"label"},doDraw:function(t){var e=this.getModel(),n=t.data,r=this.boundingBox(),i=this.group(),o=this.group("chart"),a=e.x,u=e.y,s=e.groupby,c="vertical"===e.orientation?new xs(this):new ws(this),l=void 0,f=!1;if(this.applyTransform(i,this.translate(r.padding.left,r.padding.top)),this.applyTransform(o,this.translate(r.margin.left,r.margin.top)),s&&(l=t.dimension(s).group().top(1/0).map(function(t){return t.key})).length<=1&&(l=null),l){var h=t.pivot(a,s,u);"y"===e.sortby&&(h=h.sortby("total")),n=h.data,c.sz.domain(l).range(this.fill(l).colors),e.stack&&(e.normalize&&(n=this.normalize(h)),f=!0)}else c.sz.domain([u]).range(this.fill([u]).colors),f=!0;var d=n.map(function(t){return t[a]});c.sx.domain(d),f||!l?c.stacked(o,n,l):c.grouped(o,n,l),c.axis(d),c.legend(l)}});var Gy={init:function(t){this.viz=t,this.model=t.getModel(),this.box=t.boundingBox(),this.sx=t.getScale(this.model.scaleX),this.sy=t.getScale(this.model.scaleY),this.sz=t.getScale("ordinal")},legend:function(t){this.model.legendType&&t&&this.viz.legend({scale:this.sz},this.box)},stacked:function(t,e,n){function r(t){return h(t[1-M])-h(t[M])}function i(t){return f(t.data[p])}function o(t){return h(t[M])}function a(t){return t.forEach(function(e){e.key=t.key,e.value=e.data[t.key]}),t}function u(t,e){var n=x(t,e)+b(t,e)/2,r=w(t,e)+N(t,_(t,e),O);return g.translate(n,r)}function s(t){return Xy(d(t.key),"#fff",k.stroke)}function c(t,e){return g.dataStore.eval(A,{d:t,index:e})}var l=this.viz.getModel("color"),f=this.sx,h=this.sy,d=this.sz,p=this.model.x,v=this.model.y,g=this.viz,m=this.model.radius,y=t.selectAll(".group"),b=void 0,_=void 0,x=void 0,w=void 0,M=void 0,E=void 0;if(n?this.sy.domain([0,Ql(e,function(t){return t.total})]).nice():(this.sy.domain([0,Ql(e,function(t){return t[v]})]).nice(),n=[this.model.y]),this.vertical?(x=i,w=o,b=f.bandwidth,_=r,M=1):(x=o,w=i,b=r,_=f.bandwidth,M=0),e=g.getStack().keys(n)(e),(E=y.data(e).enter().append("g").classed("group",!0).attr("fill",function(t){return d(t.key)}).merge(y).attr("fill",function(t){return d(t.key)}).attr("stroke",g.modelProperty("stroke",l)).attr("stroke-opacity",g.modelProperty("strokeOpacity",l)).selectAll("rect").data(a)).enter().append("rect").attr("x",x).attr("y",w).attr("height",_).attr("width",b).attr("rx",m).attr("ry",m).on("mouseover",g.mouseOver()).on("mouseout",g.mouseOut()).merge(E).transition().attr("x",x).attr("y",w).attr("height",_).attr("width",b),this.model.label){var k=g.getModel("font"),A=this.model.label,T=g.font(this.box)+"px",C=t.selectAll(".labels").data(e),S=this.vertical?Wy[this.model.labelLocation]||"baseline":"middle",N=Vy[this.model.labelLocation],P=this.model.labelWidth,O=this.model.labelOffset;(E=C.enter().append("g").classed("labels",!0).merge(C).selectAll("text").data(a)).enter().append("text").classed("label",!0).attr("transform",u).style("fill",s).style("font-size",T).text(c).merge(E).text(c).style("font-size",T).call(Yy,function(t){return P*b(t)},function(){g.select(this).attr("alignment-baseline",S).attr("text-anchor","middle")}).transition(g.transition("text")).attr("transform",u).style("fill",s)}},grouped:function(t,e,n){function r(t){return u(t[l])}function i(t){return s(t.value)}function o(t){return s(0)-s(t.value)}var a=this.viz.getModel("color"),u=this.sx,s=this.sy,c=this.sz,l=this.model.x,f=this.viz,h=this.model.radius,d=u.paddingInner(),p=f.getScale("band").domain(n).paddingInner(.5*d),v=t.selectAll(".group"),g=void 0,m=void 0,y=void 0,b=void 0;s.domain([0,Ql(e,function(t){return n.reduce(function(e,n){return Math.max(e,t[n])},0)})]).nice(),this.vertical?(p.rangeRound([0,u.bandwidth()]),y=r,g=p.bandwidth,m=o):(y=r,m=p.bandwidth,g=o),(v=v.data(e)).exit().remove(),(b=v.enter().append("g").classed("group",!0).attr("transform",function(t){return f.translate(y(t),0)}).merge(v).attr("transform",function(t){return f.translate(y(t),0)}).selectAll("rect").data(function(t){return n.map(function(e){return{key:e,value:t[e]}})})).exit().transition().style("opacity",0).remove(),b.enter().append("rect").attr("x",function(t){return p(t.key)}).attr("y",i).attr("rx",h).attr("ry",h).attr("height",m).attr("width",g).attr("stroke",a.stroke).attr("stroke-opacity",0).attr("fill",function(t){return c(t.key)}).on("mouseover",f.mouseOver()).on("mouseout",f.mouseOut()).merge(b).transition(f.transition("rect")).attr("x",function(t){return p(t.key)}).attr("y",i).attr("height",m).attr("width",g).attr("stroke",a.stroke).attr("stroke-opacity",a.strokeOpacity).attr("fill",function(t){return c(t.key)}),b.exit().remove()}};xs.prototype=Os({},Gy,{axis:function(t){this.model.axisX&&this.viz.xAxis1(!0===this.model.axisX?"bottom":this.model.axisX,this.sx,this.box,t[0]),this.model.axisY&&this.viz.yAxis1(!0===this.model.axisY?"left":this.model.axisY,this.sy,this.box)}}),ws.prototype=Os({},Gy,{axis:function(t){this.model.axisX&&this.viz.xAxis1(!0===this.model.axisX?"left":this.model.axisX,this.sx,this.box,t[0]),this.model.axisY&&this.viz.yAxis1(!0===this.model.axisY?"bottom":this.model.axisY,this.sy,this.box)}}),Ov("boxchart",By,{options:{orientation:"vertical",lineWidth:1,x:"x",y:"y",scaleX:"linear",scaleY:"linear",gradient:!0},doDraw:function(t){var e=this,n=this.getModel(),r=e.getDataInfo(t),i=this.boundingBox(),o=Ms(),a=this.paper().size(i),u=Eh(n.x),s=a.group().attr("transform",this.translate(i.total.left,i.total.top)).selectAll(".box").data(r.data),c=t.groupby(n.x),l=this.getScale(n.scaleX).domain(Bl(t.data,u)),f=i.innerWidth;"vertical"===n.orientation?l.range([0,i.innerWidth]):(l.range([0,i.innerHeight]),f=this.innerHeight),o.width(this.dim(n.width,f,f/c.length-2)),s.enter().append("g").classed("box",!0).call(o)}}),Ov("areachart",By,{options:{lineWidth:1,curve:"natural",x:"x",y:"y",groupby:null,scaleX:"linear",scaleY:"linear",gradient:!0,lineDarken:.2,stack:!0,stackOrder:"descending",axisX:!0,axisY:!0},doDraw:function(t){function e(t){return d(t.data[a])}function n(t){return p(t[0])}function r(t){return p(t[1])}var i=this,o=this.getModel(),a=o.x,u=o.y,s=this.getModel("color"),c=this.boundingBox(),l=qy().groupby(o.groupby).stack(this.getStack()).x(a).y(u)(t),f=l.rangeX(),h=l.rangeY(),d=this.getScale(o.scaleX).domain(f).rangeRound([0,c.innerWidth]),p=this.getScale(o.scaleY).domain(h).rangeRound([c.innerHeight,0]).nice(),v=this.group(),g=this.group("chart"),m=g.selectAll(".areagroup").data(l.data),y=this.colors(l.data.length),b=o.gradient?y.map(function(t,e){return i.linearGradient(t,c,"vertical","fill"+i.model.uid+"-"+e)}):y,_=this.curve(o.curve);this.applyTransform(v,this.translate(c.padding.left,c.padding.top)),this.applyTransform(g,this.translate(c.margin.left,c.margin.top));var x=m.enter().append("g").classed("areagroup",!0).merge(m).selectAll("path").data(function(t){var i=pg().curve(_).x(e).y1(r).y0(n),a=dg().curve(_).x(e).y(r),u=Hr(y[t.index]);return[{type:"area",data:t,draw:i(t),stroke:"none",fill:b[t.index]},{type:"line",data:t,draw:a(t),fill:"none",stroke:u.darker(o.lineDarken)}]});x.enter().append("path").attr("class",function(t){return t.type}).attr("fill",function(t){return t.fill}).attr("stroke",function(t){return t.stroke}).attr("d",function(t){return t.draw}).merge(x).transition(this.transition("area")).attr("d",function(t){return t.draw}).attr("fill",function(t){return t.fill}).attr("stroke",function(t){return t.stroke}).attr("fill-opacity",s.fillOpacity).attr("stroke-width",o.lineWidth).attr("stroke-opacity",s.strokeOpacity),x.exit().transition().style("opacity",0).remove(),o.axisX&&this.xAxis1(!0===o.axisX?"bottom":o.axisX,d,c,f[0]),o.axisY&&this.yAxis1(!0===o.axisY?"left":o.axisY,p,c,h[0]),l.data.length>1&&this.legend({type:"color",scale:this.getScale("ordinal").range(y).domain(l.data.map(function(t){return t.key}))},c)},ticks:function(t,e){return Math.max(Math.floor(t/e),1)}});var Zy=Math.PI/180,Jy={proportionalData:function(t,e){return t.dimension(e).top(1/0)},total:function(t){function e(e){return n+=e[t],e[t]}var n=0;return e.total=function(){return n},e}};Ov("piechart",Jy,{options:{field:"data",label:"label",startAngle:0,endAngle:360,sort:!1,innerRadius:0,padAngle:0,cornerRadius:0,lineWidth:1,fractionFormat:".1%",legendType:"color",legendLabel:"label + ' - ' + format(fraction)",center:null,centerOpacity:1,centerFontSize:"7%"},doDraw:function(t){var e=this.getModel(),n=this.getModel("color"),i=e.field,o=this.boundingBox(),a=Math.min(o.innerWidth,o.innerHeight)/2,u=Zi(e.innerRadius,a),s=this.total(i),c=mg().padAngle(Zy*e.padAngle).startAngle(Zy*e.startAngle).endAngle(Zy*e.endAngle).value(s),l=fg().innerRadius(u).outerRadius(a).cornerRadius(e.cornerRadius),f=this.group(),h=this.group("chart"),d=c(this.proportionalData(t,i)),p=this.fill(d),v=h.selectAll(".slice").data(d);if(this.applyTransform(f,this.translate(o.padding.left,o.padding.top)),this.applyTransform(h,this.translate(o.margin.left+o.innerWidth/2,o.margin.top+o.innerHeight/2)),v.enter().append("path").attr("class","slice").attr("stroke",n.stroke).attr("stroke-opacity",0).attr("fill",p).attr("stroke-width",e.lineWidth).on("mouseover",this.mouseOver()).on("mouseout",this.mouseOut()).merge(v).transition().attr("stroke",n.stroke).attr("stroke-opacity",n.strokeOpacity).attr("d",l).attr("fill",p),v.exit().transition().remove(),e.center){var g=r(d.reduce(function(t,e){return t[e.data.label]=e,t})),m=this.dataStore.eval(e.center,{total:s.total(),d:g});if(m){var y=this.getModel("font"),b=this.dim(e.centerFontSize,o.innerWidth),_=h.selectAll(".info").data([m]);_.enter().append("text").attr("class","info").attr("text-anchor","middle").attr("alignment-baseline","middle").style("font-size",b+"px").style("fill-opacity",0).merge(_).text(m).style("fill-opacity",e.centerOpacity).style("fill",y.stroke).call(Yy,1.5*(u||a))}}if(e.legendType){s=s.total();var x=jf(e.legendLabel),w=Jp(e.fractionFormat),M=d.map(function(t,n){return x.eval({d:t,value:t.value,format:w,total:s,fraction:t.value/s,label:t.data[e.label]||n})});this.legend({scale:so().domain(M).range(p.colors)},o)}}});var Ky=function(){function t(t){var o=void 0,a=void 0,u=void 0,s=void 0,c=void 0,l=void 0,f=void 0,h=0,d=0,p=t.length,v=new Array(p),g=new Array(p),m=r/p;for(o=0;o<p;++o)v[g[o]=o]=+e(t[o],o,t);for(g.sort(function(t,e){return Ry(v[t],v[e])}),c=v[g[0]],o=0;o<p;++o)a=g[o],s=v[a]/c,u=[[(l=i*s)/2,d+(f=h)],[-l/2,d+f],[-l/2,d+m-(h=r*(o===p-1?0:.5*n(s,o)))],[l/2,d+m-h]],d+=m,v[a]={index:o,value:v[a],fraction:s,points:u,data:t[a]};return v}var e=py,n=hy(0),r=1,i=1;return t.value=function(n){return arguments.length?(e="function"==typeof n?n:hy(+n),t):e},t.base=function(e){return arguments.length?(i=e,t):i},t.height=function(e){return arguments.length?(r=e,t):r},t.pad=function(e){return arguments.length?(n="function"==typeof e?e:hy(+e),t):n},t},Qy=function(t){return{draw:function(e){t.forEach(function(t,n){n?e.lineTo(t[0],t[1]):e.moveTo(t[0],t[1])}),e.closePath()}}};Ov("pyramidchart",Jy,{options:{field:"data",label:"label",pad:.005,lineWidth:1,inverted:!1,funnel:!1,legendType:"color",invereted:!1,legendLabel:"label + ' - ' + format('.1%', fraction)"},doDraw:function(t){var e=this.getModel(),n=e.field,r=this.getModel("color"),i=this.boundingBox(),o=(e.funnel?Ky():Fy()).pad(e.pad).value(function(t){return t[n]}),a=this.getScale("linear").rangeRound([0,i.innerWidth]),u=this.getScale("linear").rangeRound(e.inverted?[i.innerHeight,0]:[0,i.innerHeight]),s=t.new(o(this.proportionalData(t,n))).dimension("fraction").bottom(1/0),c=kg().type(function(t){return Qy(t.points.map(function(t){return[a(t[0]),u(t[1])]}))}).size(1),l=this.fill(s),f=this.group(),h=this.group("chart"),d=h.style("shape-rendering","crispEdges").selectAll(".segment").data(s);if(this.applyTransform(f,this.translate(i.padding.left,i.padding.top)),this.applyTransform(h,this.translate(i.margin.left+i.innerWidth/2,i.margin.top)),d.enter().append("path").attr("class","segment").attr("stroke",r.stroke).attr("stroke-opacity",0).attr("fill",l).attr("stroke-width",e.lineWidth).attr("d",c).on("mouseover",this.mouseOver()).on("mouseout",this.mouseOut()).merge(d).transition().attr("stroke",r.stroke).attr("stroke-opacity",r.strokeOpacity).attr("d",c).attr("fill",l),d.exit().remove(),e.legendType){var p=jf(e.legendLabel),v=this,g=s.map(function(t,n){return p.eval(v.getContext({d:t,value:t.value,fraction:t.fraction,label:t.data[e.label]||n}))});this.legend({scale:this.getScale("ordinal").domain(g).range(l.colors)},i)}}}),Ov("treemap",{requires:["d3-hierarchy"],options:{label:"label",field:"data",padding:2,tile:"resquarify",format:","},doDraw:function(t,e){function n(t){return[t]}function r(t){var e=void 0;return t.map(function(t){return(e=t.children)&&(t._children=r(e),delete t.children),t})}var i=this,o=this.getModel(),a=this.getModel("font"),u=this.boundingBox(),s=Eh(o.label),c=Eh(o.field),l=Jp(o.format),f=e.hierarchy(function(t){return t={children:r(t)},t[o.label]="root",t}(t.data)).sum(c).sort(function(t,e){return e.value-t.value}).eachBefore(function(t){t.parent?(t.data._counter=t.parent.data._counter,t.parent.data._counter++):t.data._counter=0}),h=e.treemap().tile(Nv(e,"treemap",o.tile,!0)).size([u.innerWidth,u.innerHeight]).round(!0).padding(o.padding),d=this.fill(f.children).colors,p=this.group().attr("transform",this.translate(u.total.left,u.total.top)).style("shape-rendering","crispEdges"),v=h(f).leaves(),g=p.selectAll("g").data(v),m=this;this.paper().size(u),g.exit().remove();var y=(g=g.enter().append("g").attr("transform",function(t){return i.translate(t.x0,t.y0)}).merge(g).attr("transform",function(t){return i.translate(t.x0,t.y0)})).selectAll("rect").data(n);y.enter().append("rect").attr("width",function(t){return t.x1-t.x0}).attr("height",function(t){return t.y1-t.y0}).attr("fill",function(t){return d[t.data._counter]}).attr("stroke","none").on("mouseover",this.mouseOver()).on("mouseout",this.mouseOut()).merge(y).transition().attr("width",function(t){return t.x1-t.x0}).attr("height",function(t){return t.y1-t.y0}).attr("fill",function(t){return d[t.data._counter]}),(y=g.selectAll("text").data(n)).enter().append("text").style("fill",function(t){return Xy(d[t.data._counter],"#fff",a.stroke)}).selectAll("tspan").data(function(t){var e=m.font({height:Math.min(t.x1-t.x0,t.y1-t.y0)}),n=s(t.data).split(/(?=[A-Z][^A-Z])/g);return n.push(l(t.value)),n.map(function(t){return{size:e,text:t}})}).enter().append("tspan").style("font-size",function(t){return t.size}).attr("x",4).attr("y",function(t,e){return 1.5*t.size+1.2*e*t.size}).text(function(t){return t.text})}}),Ov("text",{options:{label:"label",data:"data",text:'label + " " + data',sizeReduction:.7},doDraw:function(t){function e(t,e){return n.translate((e+.5)*l,0)}var n=this,r=this.getModel(),i=this.getModel("font"),o=this.boundingBox(),a=this.font(o),u=this.group(),s=this.group("chart"),c=s.selectAll("text").data(t.data),l=o.innerWidth/t.data.length,f=.4*l,h=this.dataStore,d=this.modelProperty("stroke",i);this.applyTransform(u,this.translate(o.padding.left,o.padding.top)),this.applyTransform(s,this.translate(o.margin.left,o.margin.top+o.innerHeight/2)),c.enter().append("text").attr("transform",e).attr("text-anchor","middle").attr("alignment-baseline","middle").style("fill",d).merge(c).attr("transform",e).text(function(t){return h.eval(r.text,t)}).style("fill",d).call(Yy,f,function(t,e){var i=a;e&&(i=r.sizeReduction*a),n.select(this).attr("font-size",i+"px")}),u.exit().remove()}}),Ov("heatmap",By,{options:{shape:"square",layout:"heatmap",buckets:10,pad:.005,x:"x",y:"y",z:"data",label:null,axisX:!0,axisY:!0,reverseColors:!0,tableColors:null},doDraw:function(t){function e(t){return t.data[r.label]}function n(t){return Xy(t.color,"#fff",o.stroke)}var r=this.getModel(),i=this.getModel("color"),o=this.getModel("font"),a=r.layout,u=this.boundingBox(),s=Bl(t.data,Eh(r.z));s[0]<0&&"punchcard"===a&&(a="heatmap");var c=this.heatmap(a,t,u,s),l=(u.innerWidth-c.width)/2,f=(u.innerHeight-c.height)/2,h=this.getSymbol(r.shape).size(function(t){return t.size*t.size}),d=this.group(),p=this.group("chart"),v=p.selectAll(".shape").data(c.data);if(this.applyTransform(d,this.translate(u.padding.left,u.padding.top)),this.applyTransform(p,this.translate(u.margin.left+l,u.margin.top+f)),Wl[0]<0&&"punchcard"===a&&(a="heatmap"),v.enter().append("path").classed("shape",!0).attr("transform",function(t){return"translate("+t.x+", "+t.y+")"}).attr("fill",function(t){return t.color}).attr("fill-opacity",0).attr("stroke-opacity",0).attr("stroke",i.stroke).attr("d",h).on("mouseover",this.mouseOver()).on("mouseout",this.mouseOut()).merge(v).transition(this.transition()).attr("transform",function(t){return"translate("+t.x+", "+t.y+")"}).attr("fill-opacity",i.fillOpacity).attr("fill",function(t){return t.color}).attr("stroke-opacity",i.strokeOpacity).attr("stroke",i.stroke).attr("d",h),r.label&&"heatmap"===a){var g=this.font(u)+"px",m=p.selectAll(".labels").data(c.data);m.enter().append("text").classed("labels",!0).attr("transform",function(t){return"translate("+t.x+", "+t.y+")"}).style("text-anchor","middle").style("alignment-baseline","middle").style("fill",n).style("font-size",g).text(e).merge(m).text(e).style("font-size",g).call(Yy,Math.ceil(.8*c.size)).transition(this.transition("text")).attr("transform",function(t){return"translate("+t.x+", "+t.y+")"}).style("fill",n)}var y={innerWidth:c.width,innerHeight:c.height,margin:{top:u.margin.top+f,left:u.margin.left+l}};r.axisX&&this.xAxis1(!0===r.axisX?"bottom":r.axisX,c.scaleX,y),r.axisY&&this.yAxis1(!0===r.axisY?"left":r.axisY,c.scaleY,y),"heatmap"===a?this.legend({type:"color",shape:r.shape,scale:c.colors},u):"punchcard"===a&&this.legend({type:"size",shape:r.shape,scale:c.sizes},u)},heatmap:function(t,e,n,i){var o=this.getModel(),a=o.pad,u=o.x,s=o.y,c=o.z,l=e.dimension(o.x).group().size(),f=e.dimension(o.y).group().size(),h=Math.min(o.buckets,l*f),d=(1-a*(l+1))*n.innerWidth/l,p=(1-a*(f+1))*n.innerHeight/f,v=[],g=[],m=[],y=r(),b=r(),_=void 0,x=void 0,w=void 0,M=void 0,E=void 0,k=void 0,A=void 0,T=void 0,C=void 0,S=void 0;if(d<p?(T=d,C=n.innerWidth,S=f*(T+(a*=C))+a):(T=p,S=n.innerHeight,C=l*(T+(a*=S))+a),i=Uy(i,h),"heatmap"===t){var N=this.fill(Wl(h)).colors;o.reverseColors&&(N=N.reverse()),k=this.getScale("quantile").range(N).domain(i),A=function(){return 1}}else{var P=this.colors(1)[0];k=function(){return P},A=this.getScale("quantile").range(Wl(h).map(function(t){return(t+1)/h})).domain(i)}return e.data.forEach(function(t){_=t[u],x=t[s],w=t[c],y.has(_)||(y.set(_,g.length),g.push(_)),b.has(x)||(b.set(x,m.length),m.push(x)),M=y.get(_),E=b.get(x),v.push({i:M,j:E,x:a+T/2+M*(T+a),y:a+T/2+E*(T+a),color:k(w),size:T*A(w),data:t})}),{data:v,size:T,width:C,height:S,scaleX:this.getScale("band").domain(g).range([0,C]),scaleY:this.getScale("band").domain(m).range([0,S]),colors:k,sizes:A}}}),Ov("geochart",{requires:["d3-geo","topojson","d3-geo-projection"],options:{geometry:"countries",geoKey:"id",dataKey:"id",dataLabelKey:"label",dataValueKey:"value",buckets:10,choroplethScale:"quantile",boundGeometry:null,boundScaleFactor:.9,projection:null,graticule:!1,leaflet:!1,scale:200,mouseover:["darken","tooltip"]},doDraw:function(t,e){var n=this.getGeoData(t);if(!n)return Ch("Topojson data not available - cannot draw topology");this._geoPath||this.createGeoPath(e,n),this.update(e,n)},update:function(t,e){var n=this.getModel(),r=this.getModel("color"),i=this.boundingBox(),o=this.group(),a=this.group("geo"),u=this._geoPath,s=t.feature(e.topology,e.topology.objects[n.geometry]).features,c=a.selectAll(".geometry").data(s),l="none";o.transition(this.transition("group0")).attr("transform",this.translate(i.padding.left,i.padding.top)),a.transition(this.transition("group1")).attr("transform",this.translate(i.margin.left,i.margin.top)),this.center(t,e),e.data&&(l=this.choropleth(e.data,i)),c.enter().append("path").attr("class","geometry").attr("d",u).style("fill","none").style("stroke",r.stroke).style("stroke-opacity",0).style("fill-opacity",0).on("mouseover",this.mouseOver()).on("mouseout",this.mouseOut()).merge(c).transition(this.transition("geometry")).attr("d",u).style("stroke",r.stroke).style("stroke-opacity",r.strokeOpacity).style("fill",l).style("fill-opacity",r.fillOpacity),c.exit().remove()},createGeoPath:function(t,e){var n,r=this.getModel(),i=Nv(t,"geo",e.projection).scale(r.scale),o=t.geoPath().projection(i),a=this;if(this._geoPath=o,this.center(t,e),r.leaflet){var u="leaflet-"+r.uid,s=this.paper();this.visualParent.paper.append("div").attr("id",u),(n=new t.Map(u,{center:[37.8,-96.9],zoom:4}).addLayer(new t.TileLayer("http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"))).getPanes().overlayPane.appendChild(s.element),i=t.transform({point:function(e,r){var i=n.latLngToLayerPoint(new t.LatLng(r,e));this.stream.point(i.x,i.y)}}),n.on("viewreset",function(){return a.update(t,e)})}return o},getGeoData:function(t){var e={};if("frameCollection"===t.type?t.frames.each(function(t){"Topology"===t.type?e.topology=t:"dataframe"===t.type&&(e.data=t)}):"Topology"===t.type&&(e.topology=t),e.topology){var n=this.getModel();return n.projection?e.projection=n.proection:e.projection="kavrayskiy7",e}},center:function(t,e){var n=this.getModel();if(n.boundGeometry){var r=this._geoPath,i=r.projection(),o=this.boundingBox(),a=t.feature(e.topology,e.topology.objects[n.boundGeometry]).features;i.scale(1).translate([0,0]);var u=r.bounds(a[0]),s=u[0],c=u[1],l=(c[0]-s[0])/o.innerWidth,f=(c[1]-s[1])/o.innerHeight,h=Math.round(n.boundScaleFactor/Math.max(l,f)),d=[(o.innerWidth-h*(c[0]+s[0]))/2,(o.innerHeight-h*(c[1]+s[1]))/2];i.scale(h).translate(d)}},choropleth:function(t,e){var n=this.getModel(),r=Math.min(n.buckets,t.data.length),i=n.dataKey,o=n.dataLabelKey,a=n.dataValueKey,u=n.geoKey,s=Uy(Bl(t.data,Eh(a)),r),c=this.getScale(n.choroplethScale).range(this.colors(r).reverse()).domain(s),l=t.data.reduce(function(t,e){return t[e[i]]=e,t},{}),f=void 0,h=void 0;return this.legend({type:"color",scale:c},e),function(t){return f=t.properties[u],h=l[f],t.choropleth={label:h[o]||f,value:h[a],color:c(h[a])},t.choropleth.color}}}),Os(zp.options.dataContext,{$geoDataCode:function(t){if(this.filters){var e=Cs(this.filters.country).code+"-regions";return t?e+"-"+t:e}},$region:function(){}}),function(t){Xs.readyCallbacks.push(t),"complete"!==document.readyState?(document.addEventListener("DOMContentLoaded",oe),window.addEventListener("load",oe)):ae()}(function(){As().mount("body")}),t.mapsVersion="0.0.4",Object.defineProperty(t,"__esModule",{value:!0})});